<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="CommonSupllierDecorator">
        <section>
            <actions>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="headerItem" value="suppliers"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="pre-body">
                        <section>
                            <widgets>
                                <include-menu name="SupplierTabBar" location="component://purchases/widget/PurchasesMenus.xml"/>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <section>
                                    <condition>
                                        <not>
                                            <if-empty field="parameters.supplierId"/>
                                        </not>
                                    </condition>
                                    <widgets>
                                        <include-menu name="QuotesSubTabBar" location="component://purchases/widget/PurchasesMenus.xml"/>
                                        <container style="leftclear">
                                            <label style="h1" text="Quote From Supplier: ${quote.supplierId} of Quote ID: [${quoteId}]  ${${extraFunctionName}}"/>
                                        </container>
                                    </widgets>
                                </section>
                                <decorator-section-include name="body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CommonOrderDecorator">
        <section>
            <actions>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="headerItem" value="orders"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="pre-body">
                        <section>
                            <widgets>
                                <include-menu name="SupplierTabBar" location="component://purchases/widget/PurchasesMenus.xml"/>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <section>
                                    <condition>
                                        <not>
                                            <if-empty field="parameters.supplierId"/>
                                        </not>
                                    </condition>
                                    <widgets>
                                        <include-menu name="QuotesSubTabBar" location="component://purchases/widget/PurchasesMenus.xml"/>
                                        <container style="leftclear">
                                            <label style="h1" text="Quote From Supplier: ${quote.supplierId} of Quote ID: [${quoteId}]  ${${extraFunctionName}}"/>
                                        </container>
                                    </widgets>
                                </section>
                                <decorator-section-include name="body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>


    <screen name="homeScreen">
        <section>
            <actions>
                <set field="headerItem" value="main"/><!-- this highlights the selected menu-item with name "main" -->
            </actions>
            <widgets>
                <decorator-screen name="PurchasesCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="Purchases Management">
                            <platform-specific><html><html-template location="component://purchases/webapp/purchases/main.ftl"/></html></platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="FindSupplierScreen">
        <section>
            <actions>
                <set field="headerItem" value="suppliers"/><!-- this highlights the selected menu-item with name "suppliers" -->
                <set field="tabButtonItem" value="find"/>
                <set field="supplierCtx" from-field="parameters" />
            </actions>
            <widgets>
                <decorator-screen name="CommonSupllierDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="menu-bar">
                                <include-menu name="SupplierSubTabBar" location="component://purchases/widget/PurchasesMenus.xml"/>
                                <container style="clear"/>
                            </decorator-section>
                            <decorator-section name="search-options">
                                <include-form name="FindSupplierForm" location="component://purchases/widget/PurchasesForms.xml" />
                            </decorator-section>
                            <decorator-section name="search-results">
                                <include-form name="ListSupplierForm" location="component://purchases/widget/PurchasesForms.xml" />
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!--
        EditSupplierScreen
    -->
    <screen name="EditSupplierScreen">
        <section>
            <actions>
                <set field="titleProperty" value="Document Approval"/>
                 <set field="tabButtonItem" value="editSupplier"/>
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createSupplier"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <entity-one entity-name="Supplier" value-field="supplierContext"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonSupllierDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-has-permission permission="PARTYMGR" action="_CREATE"/>
                            </condition>
                            <widgets>
                                <screenlet title="Purchasing Management: Edit Supplier">
                                    <include-form name="EditSupplierForm" location="component://purchases/widget/PurchasesForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>
                        <section name="search-results">
                            <widgets>
                                <screenlet title="Purchasing Management: Suppliers List">
                                    <include-form name="SupplierListForm" location="component://purchases/widget/PurchasesForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!--
        Contact Person Screen
    -->
    <screen name="ContactPersonScreen">
        <section>
            <actions>
                <set field="titleProperty" value="Supplier Contacts Persons"/>
                 <set field="tabButtonItem" value="editContactPerson"/>
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createContactPerson"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <entity-one entity-name="ContactPerson" value-field="contactPersonContext"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonSupllierDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section name="search-results">
                            <widgets>
                                <screenlet title="Purchasing Management: Contact Persons List">
                                    <include-form name="ListContactPersonForm" location="component://purchases/widget/PurchasesForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                        <section>
                            <condition>
                                <if-has-permission permission="PARTYMGR" action="_CREATE"/>
                            </condition>
                            <widgets>
                                <screenlet title="Purchasing Management: Edit Contact Person">
                                    <include-form name="ContactPersonForm" location="component://purchases/widget/PurchasesForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!--
        Find Orders Screen
     -->

    <screen name="FindOrdersScreen">
        <section>
            <actions>
                <set field="headerItem" value="orders"/><!-- this highlights the selected menu-item with name "suppliers" -->
                <set field="tabButtonItem" value="find"/>
                <set field="purchaseOrdersCtx" from-field="parameters" />
            </actions>
            <widgets>
                <decorator-screen name="CommonOrderDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="menu-bar">
                                <include-menu name="SupplierSubTabBar" location="component://purchases/widget/PurchasesMenus.xml"/>
                                <container style="clear"/>
                            </decorator-section>
                            <decorator-section name="search-options">
                                <include-form name="FindOrderForm" location="component://purchases/widget/PurchasesForms.xml" />
                            </decorator-section>
                            <decorator-section name="search-results">
                                <include-form name="ListOrderForm" location="component://purchases/widget/PurchasesForms.xml" />
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

</screens>
