<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

    <form
        name="FindPurchaseQuotes"
        default-map-name="purchaseQuote"
        target="findPurchaseQuote"
        type="single">

        <auto-fields-entity entity-name="PrchseQteHdr" default-field-type="find"/>
         <field name="noConditionFind"><hidden value="Y"/></field>

        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>

    </form>

    <form
        name="ListPurchaseQuotes"
        type="list"
        list-name="listIt"
        paginate-target="FindPurchaseQuotes"
        default-entity-name="PrchseQteHdr"
        separate-columns="true"
        odd-row-style="alternate-row"
        header-row-style="header-row-2"
        default-table-style="basic-table hover-bar">

        <actions>
            <service service-name="performFind" result-map="result"
                result-map-list="listIt">
                <field-map field-name="inputFields" from-field="purchaseQuoteCtx" />
                <field-map field-name="entityName" value="PrchseQteHdr" />
                <field-map field-name="orderBy" from-field="parameters.sortField" />
                <field-map field-name="viewIndex" from-field="viewIndex" />
                <field-map field-name="viewSize" from-field="viewSize" />
            </service>
        </actions>
        <row-actions>
            <service service-name="getPartyNameForDate" result-map="partyNameResultFrom">
                <field-map field-name="partyId" from-field="supplierId"/>
            </service>
        </row-actions>

        <field name="quoteId" title="Quote Id" widget-style="buttontext">
            <hyperlink also-hidden="false" description="${quoteId}" target="editPurchaseQuote">
                <parameter param-name="quoteId" />
            </hyperlink>
        </field>


        <field name="quoteDate" sort-field="true">
            <display type="date"/>
        </field>
        <field name="statusId" title="Status" sort-field="true">
            <display/>
        </field>
        <field name="partyId" title="Prepared By" sort-field="true">
            <display/>
        </field>
        <field name="supplierRefId" sort-field="true">
            <display type="date"/>
        </field>
    </form>

    <form
        name="EditPurchaseQuote"
        type="single"
        target="updatePurchaseQuote"
        title=""
        default-map-name="quote"
        default-entity-name="PrchseQteHdr" >
        <actions>
            <entity-one entity-name="StatusItem" value-field="currentStatus" auto-field-map="false">
                <field-map field-name="statusId" from-field="quote.statusId"/>
            </entity-one>
<!--        <service service-name="getPartyNameForDate" result-map="partyNameResultFrom">
                <field-map field-name="partyId" from-field="quote.partyId"/>
            </service> -->
        </actions>

        <alt-target use-when="quote==null" target="createPurchaseQuote" />
        <auto-fields-service service-name="updatePurchaseQuote" map-name="quote"/>


        <field name="quoteId" use-when="quote==null @and quoteId==null" title="Quote Id">
            <ignored/>
        </field>
        <field name="quoteId" use-when="quote!=null" title="Quote id" tooltip="${uiLabelMap.CommonNotModifRecreat}">
            <display />
        </field>
        <field name="quoteDate" use-when="quote==null">
            <hidden/>
        </field>
        <field name="quoteDate" use-when="quote!=null" title="Creation Date">
            <display type="date"/>
        </field>
        <field name="statusId" use-when="quote==null">
            <hidden/>
        </field>
        <field name="statusId" use-when="quote!=null" title="Status">
            <display-entity entity-name="StatusItem"/>
        </field>
        <field name="partyId">
            <hidden/>
        </field>
<!--         <field name="partyId" title="Prepared By" use-when="quote!=null">
            <hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="${partyNameResultFrom.fullName}">
                <parameter param-name="partyId" from-field="quote.partyId"/>
            </hyperlink>
        </field> -->
        <field name="partyId" title="Prepared By" use-when="quote!=null">
            <display-entity entity-name="Party"/>
        </field>
        <field name="supplierId" title="Supplier">
            <lookup target-form-name="LookupPartyName"/>
        </field>
        <field name="confirmDate">
            <hidden/>
        </field>

        <field name="submitButton" use-when="quote==null" title="${uiLabelMap.CommonCreate}">
            <submit button-type="button" />
        </field>

        <field name="submitButton" use-when="quote!=null" title="${uiLabelMap.CommonUpdate}">
            <submit button-type="button" />
        </field>
    </form>


















</forms>
