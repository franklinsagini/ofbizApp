<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

    
    
    <!-- New Loan Security -->
    <form name="NewLoanSecurity" type="single" target="createLoanSecurity"
        focus-field-name="description" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanSecurityContext">
        
        <field name="loanSecurityId"><hidden/></field>
        <field name="description" title="Name" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listLoanSecurity" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanSecurity" paginate-target="findLoanSecurity"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanSecurity">
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanSecurity"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="loanSecurityId"> <hidden/> </field>
        <field name="description"> <!-- display also-hidden="false"/ --> <text></text> </field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanSecurity" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanSecurityId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- Loan Status -->
    <form name="NewLoanStatus" type="single" target="createLoanStatus"
        focus-field-name="name" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanStatusContext">
        
       
        <field name="name" title="Name" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        <field name="description" title="Description"><textarea/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="text-link"/></field>
    </form>
    
    <form name="listLoanStatus" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanStatus" paginate-target="findLoanStatus"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanStatus">
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanStatus"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="name"> <text></text> </field>
        <field name="description" title="Description"><textarea/></field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanStatus" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="name"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
     <form name="ViewLoanApplicationDetails" type="single" default-map-name="lookupLoanApplication">
     	<actions>
     		<entity-one entity-name="LoanApplication" value-field="loanApplication">
     			<field-map field-name="loanApplicationId" from-field="parameters.loanApplicationId"/>
     		</entity-one>
     		
     		<entity-one entity-name="LoanProduct" value-field="loanProduct">
     			<field-map field-name="loanProductId" value="${loanApplication.loanProductId}"/>
     		</entity-one>
     	</actions>
        <!--  field name="personalImage" use-when="partyContentId!=null" title="${uiLabelMap.FormFieldTitle_personalImage}"><image value="${personalImage}" style="cssImgStandard"/></field-->
        <field name="loanApplicationId"><hidden/></field>
        <field name="partyId" title="Member">
        	<display-entity description="${firstName} ${middleName} ${lastName}" entity-name="Member" also-hidden="false" ></display-entity>
        </field>
        <field name="loanProductId" title="Loan Product"><display description="${loanProduct.name} - ${loanProduct.code}"/></field>
        <!-- field name="comments" title="${uiLabelMap.PartyComments}"><display/></field -->
        <field name="loanAmt" title="Amount"><display  type="currency" currency="KES" also-hidden="false"/></field>
        <field name="interestRatePM" title="Interest Rate(P.M.)"><display also-hidden="false"/></field>
        <field name="repaymentPeriod" title="Repayment Period(Months)"><display also-hidden="false"/></field>
        <field name="paymentMethodTypeId" title="Payment Method">
        	<display-entity entity-name="PaymentMethodType" key-field-name="paymentMethodTypeId" description="${lookupPaymentMethodType.description}"/>
        </field>
        <!-- field name="externalId"><display/></field -->
        <field name="loanStatusId" title="Status">
        	<display-entity entity-name="LoanStatus" description="${name}" key-field-name="loanStatusId"></display-entity>
        </field>
    </form>
    
    <!--Loan Application Security -->
    <form name="NewLoanApplicationSecurity" type="single" target="createLoanApplicationSecurity"
        focus-field-name="loanSecurityId" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanApplicationSecurityContext">
        
        <actions>
        	<entity-condition entity-name="LoanSecurity" list="loanSecurityList">
            </entity-condition>
            <set field="loanApplicationId" from-field="parameters.loanApplicationId"/>
            <entity-one entity-name="LoanApplication" value-field="loanApplication">
            	<field-map field-name="loanApplicationId" from-field="loanApplicationId"/>
            </entity-one>
            <set field="partyId" value="${loanApplication.partyId}" type="Long"/>
            <set field="guaranteedTotal" value="${bsh:org.ofbiz.loans.LoanServices.getTotalGuaranteedValueByMember(partyId);}" type="String"/>
            <set field="totalAvailableAmount" value="${bsh:org.ofbiz.loans.LoanServices.getTotalAvailableValueByMember(partyId);}" type="String"/>
            <set field="loanAmt" value="${loanApplication.loanAmt}" type="String"/>
        </actions>
        
        <field name="loanApplicationSecurityId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="loanSecurityId" title="Security" widget-style="required" required-field="true">
        	<drop-down allow-empty="false">
                <list-options list-name="loanSecurityList"   key-name="loanSecurityId" description="${description}"/>
            </drop-down>
        </field>
        
        <field name="totalDepositAmount" title="Total Deposit Amount"> <text default-value="${bsh:org.ofbiz.loans.LoanServices.getTotalMemberDeposits(partyId);}" disabled="true"></text> </field>
        <field name="totalGuaranteedAmount" title="Total Guaranteed Amount"> <text  default-value="${bsh:org.ofbiz.loans.LoanServices.getTotalGuaranteedValueByMember(partyId);}" disabled="true"></text> </field>
        <field name="totalAvailableAmount" title="Available Amount"> <text  default-value="${bsh:org.ofbiz.loans.LoanServices.getTotalAvailableValueByMember(partyId);}" disabled="true"></text> </field>
        
        <!--  field name="loanSecurityId" title="Security">
        	<drop-down allow-empty="true">
                <list-options list-name="loanSecurityList" key-name="loanSecurityId" description="${description}"/>
            </drop-down>
        </field -->
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"
        event="onclick" action="javascript: return validateLoanSecurity('${loanApplicationId}'.replace(/,/g, ''), '${guaranteedTotal}'.replace(/,/g, ''), '${totalAvailableAmount}'.replace(/,/g, ''), '${loanAmt}'.replace(/,/g, ''));"><submit button-type="button"/></field>
    </form>

    <form name="ViewLoanSecurityList" type="list" list-name="loanApplicationSecurityList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanApplicationSecurity">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId" />
        	</entity-condition>
        </actions>
        <!-- field name="loanSecurityId" title="Security">
        	<display-entity description="${description}" entity-name="LoanSecurity" key-field-name="loanSecurityId" also-hidden="false"></display-entity>
        </field -->
         <field name="loanSecurityId" title="Security">
         	<display-entity entity-name="LoanSecurity" description="${description}"></display-entity>
        </field>
        <field name="loanApplicationSecurityId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <!-- field name="noOfGuarantors" title="No Of Guarantors"> <text></text> </field>
        <field name="totalDepositAmount" title="Total Deposit Amount"> <text disabled="true"></text> </field>
        <field name="totalGuaranteedAmount" title="Total Guaranteed Amount"> <text   disabled="true"></text> </field>
        <field name="totalAvailableAmount" title="Available Amount"> <text  disabled="true"></text> </field -->
        
    </form>
    
    <!-- Loan Application Collateral-->
    <form name="NewCollateral" type="single" target="createLoanApplicationCollateral"
        focus-field-name="collateralValue" header-row-style="header-row" default-table-style="basic-table" default-entity-name="LoanApplicationCallateral" default-map-name="loanApplicationCallateralContext">
  
        
        <field name="loanApplicationCallateralId" ><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="collateralValue" title="Collateral Value" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="valuingAgency" title="Valuing Agency" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="collateralType" title="Type" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="collateralSerialNo" title="Serail No." widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="collateralOwner" title="Owner" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="collateralStatus"  title="Status" widget-style="required" required-field="true">
            <drop-down allow-empty="true">
                <option key="Free" description="Free"/>
                <option key="Tied" description="Tied"/>
            </drop-down>
        </field>
        <field name="propotionofloanamt" title="Proportion of Loan Amount" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="ViewLoanCollateralList" type="list" list-name="loanApplicationCallateralList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="collateralValue" title="Collateral Value"><display also-hidden="false"/></field>
        <field name="valuingAgency" title="Valuing Agency"><display also-hidden="false"/></field>
        <field name="collateralType" title="Collateral Type"><display also-hidden="false"/></field>
        <field name="collateralSerialNo" title="Serial No."><display also-hidden="false"/></field>
        <field name="collateralOwner" title="Owner"><display also-hidden="false"/></field>
        <field name="collateralStatus" title="Status"><display also-hidden="false"/></field>
    </form>
    
    <!-- Loan Application Guarantor -->
    
        <form name="NewGuarantor" type="single" target="createLoanApplicationGuarantor"
        focus-field-name="guarantorId" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanApplicationGuarantorContext">
        
        <actions>
        	<entity-one entity-name="LoanApplication" value-field="loanApplication">
        		<field-map field-name="loanApplicationId" from-field="parameters.loanApplicationId"/>
        	</entity-one>
        	<!-- entity-condition entity-name="Member" list="memberList">
        		<condition-list combine="and">
        			<condition-expr field-name="partyId" operator="not-equals" value="${loanApplication.partyId}"/>
        			
        		</condition-list>
        		
            </entity-condition -->
            <!-- condition-expr field-name="memberStatus" operator="equals" value="ACTIVE"/ -->
            
            <!-- entity-condition entity-name="MemberStation" list="memberStationsList"></entity-condition -->
            <entity-condition entity-name="Station" list="stationList"></entity-condition>
        </actions>
        
        <field name="loanGuarantorId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <!-- field name="guarantorId" title="Guarantor" widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="memberList"   key-name="partyId" description="${firstName} ${middleName} ${lastName}"/>
            </drop-down>
        </field -->
        
        <field name="guarantorId" title="Guarantor"><lookup target-form-name="LookupActiveMember" show-description="true"/></field>
        
        <!-- field name="memberNo" title="Member No." widget-style="required" required-field="true"><text size="20" maxlength="60"/></field>
        <field name="payrolNo" title="Payrol No." widget-style="required" required-field="true"><text size="20" maxlength="60"/></field>
        <field name="depositamt" title="Deposit Amount" widget-style="required" required-field="true"><text size="20" maxlength="60"/></field>
        
        <field name="currentStationId" title="Current Station" widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="stationList"   key-name="stationId" description="${name}"/>
            </drop-down>
        </field>
        <field name="guaranteedPercentage" title="Guaranteed %"><text size="20" maxlength="60"/></field>
		<field name="guaranteedValue" title="Guaranteed Amount"><text size="20" maxlength="60"/></field -->        
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <!-- form name="ViewLoanGuarantorsList" type="list" list-name="loanGuarantorsList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" -->
        
     <form name="ViewLoanGuarantorsList" type="list" list-name="loanGuarantorsList"
		paginate-target="viewapplicationprofile" default-entity-name="LoanGuarantor"
		separate-columns="true" odd-row-style="alternate-row"
		header-row-style="header-row-2" default-table-style="basic-table hover-bar" default-map-name="loanGuarantor">
		
        <field name="loanGuarantorId"> <hidden/> </field>
        <field name="guarantorId" title="Guarantor">
                <display-entity entity-name="Member" key-field-name="partyId"  description="${firstName} ${middleName} ${lastName}" also-hidden="false"/>
        </field>
        
    
        <field name="depositamt" title="Deposit Amount"><display also-hidden="false"/></field>
        <field name="currentStationId" title="Current Station">
        	 <display-entity entity-name="Station" key-field-name="stationId"  description="${name}" also-hidden="false"/>
        </field>
        <field name="guaranteedPercentage" title="Guaranteed %"><text size="20" maxlength="60"/></field>
		<field name="guaranteedValue" title="Guaranteed Amount"><text size="20" maxlength="60"/></field> 
		<field name="myLoans" title="My Loans" widget-style="buttontext">
            <hyperlink target="myLoans" description="My Loans" also-hidden="false">
                <parameter param-name="guarantorId"/>
            </hyperlink>
        </field>
        
        <field name="myGuaranteedLoans" title="My Guaranteed Loans" widget-style="buttontext">
            <hyperlink target="myGuaranteedLoans" description="My Guaranteed Loans" also-hidden="false">
                <parameter param-name="guarantorId"/>
            </hyperlink>
        </field>
		
		<field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanApplicationGuarantor" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanGuarantorId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- Loan Application - the opening balance are entered here -->
     <!-- Loan Application -->
    <form name="memberLoanBalance" type="single" target="createLoanBalance"
        focus-field-name="partyId" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanBalanceContext">
        
        <actions>
             <entity-condition entity-name="SaccoProduct" list="productsList">
             	 <condition-expr field-name="productType" operator="equals" value="Loan"/>
            </entity-condition>
            <entity-condition entity-name="PaymentMethodType" list="paymentMethodsList">
            </entity-condition>
            
            <entity-condition entity-name="LoanStatus" list="loanStatusList">
            </entity-condition>
            
            <set field="isOpeningBalance" value="Y"/>
            <!--entity-condition entity-name="LoanSecurity" list="loanSecurityList">
            </entity-condition -->
        </actions>
        
        <field name="loanApplicationId"><hidden/></field>
        <field name="LoanNo" title="Loan No."><text size="30" maxlength="60"/></field>
        <field name="partyId" parameter-name="partyId"><hidden/></field>
        <field name="saccoProductId" title="Loan Type">
            <drop-down allow-empty="true">
                <list-options list-name="productsList" key-name="saccoProductId" description="${name} - ${code}"/>
            </drop-down>
        </field>
        <field name="loanDuration" title="Loan Duration (Months)"><text size="30" maxlength="60"/></field>
        <field name="loanStartDate" title="Loan Start Date"><date-time/></field>
        <field name="outstandingBalance" title="Outstanding Balance"><text size="30" maxlength="60"/></field>
        <field name="principalDue" title="Principal Amt Due"><text size="30" maxlength="60"/></field>
        <field name="interestDue" title="Interest Due"><text size="30" maxlength="60"/></field>
        <field name="panaltyInterestDue" title="Interest Due"><text size="30" maxlength="60"/></field>
        <field name="monthlyRepayment" title="Monthly Repayment"><text size="30" maxlength="60"/></field>
        <field name="nextInstallmentDate" title="Next Installment Date"><date-time/></field>
        <field name="isOpeningBalance" ><hidden/></field>
        

       
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="text-link"/></field>
    </form>
    
    <form name="listMemberLoanBalance" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanBalance" paginate-target="memberLoanBalance"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanApplication">
            	<!-- condition-expr field-name="productType" operator="equals" value="Account"/ -->
                <!-- condition-expr field-name="saccoProductId" from-field="saccoProductId"/ -->
                <!-- order-by field-name="saccoProductId"/ -->
                <condition-expr field-name="isOpeningBalance" operator="equals" value="Y"/>
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanApplication"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="loanNo"><display also-hidden="false"/></field>
        <field name="partyId" title="Member">
        	<display-entity description="${firstName} ${middleName} ${lastName}" entity-name="Member" also-hidden="false" ></display-entity>
            <!--  drop-down allow-empty="true">
                <entity-options description="${firstName} ${middleName} ${lastName}" entity-name="Member">
                </entity-options>
            </drop-down -->
        </field>
        <!-- field name="firstName"> <text></text> </field>
        <field name="middleName"> <text></text> </field>
        <field name="lastName"> <text></text> </field -->
        <field name="saccoProductId" title="Loan Type">
        	<display-entity description="${name} ${code}" entity-name="SaccoProduct" also-hidden="false"></display-entity>
            <!-- drop-down allow-empty="true">
                <entity-options description="${name} ${code}" entity-name="SaccoProduct">
                </entity-options>
            </drop-down -->
        </field>
        <field name="loanDuration"><display also-hidden="false"/></field>
        <field name="loanStartDate"><display also-hidden="false"/></field>
        <field name="outstandingBalance"><display also-hidden="false"/></field>
        
        <field name="principalDue"><display also-hidden="false"/></field>
        <field name="interestDue"><display also-hidden="false"/></field>
        <field name="panaltyInterestDue"><display also-hidden="false"/></field>
        
        <field name="monthlyRepayment"><display also-hidden="false"/></field>
        <field name="nextInstallmentDate"><display also-hidden="false"/></field>
        
        
        
        <!-- field name="loanSecurityId" title="LoanSecurity">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="PaymentMethodType" -->
                    <!-- entity-order-by field-name="description"/ -->
                <!--  /entity-options>
            </drop-down>
        </field -->
        

        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanBalance" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanApplicationId"/>
            </hyperlink>
        </field>
        <!--  field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field -->
    </form>
    
    <!-- Loan Processing Forms -->
    <!-- 
    	reviewLoan
    	listReviewLoan
     -->
     <form name="reviewLoan" type="single" target="createReviewLoan"
        focus-field-name="comment" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanStatusLogContext">
        
        <field name="loanStatusLogId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        
        <field name="applicationStatus" title="Status" ><text size="30" maxlength="60" default-value="REVIEWED"/></field>
        <field name="comment" title="Comment" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><textarea/></field>
        <field name="submitButton" title="Post Review" widget-style="smallSubmit"><submit button-type="text-link"/></field>
    </form>
    
    <form name="listReviewLoan" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateReviewLoan" paginate-target="loanStatusLog"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanStatusLog">
            	<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
            	<order-by field-name="-loanStatusLogId"/>
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateReviewLoan"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
         <field name="createdBy"><display also-hidden="false"></display> </field>
        <field name="applicationStatus"><display also-hidden="false"></display>  </field>
        <field name="createdStamp"><display also-hidden="false" type="date-time"></display> </field>
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteReviewLoan" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanStatusLogId"/>
            </hyperlink>
        </field -->
        <!-- field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field -->
    </form>
     
     <!-- 
    	appraiseLoan
    	listAppraiseLoan
     -->
     <form name="appraiseLoan" type="single" target="createAppraiseLoan"
        focus-field-name="comment" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanStatusLogContext">
        
        <field name="loanStatusLogId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="applicationStatus" title="Status"><text size="30" maxlength="60" default-value="APPRAISED"/></field>
        <field name="comment" title="Comment" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><textarea/></field>
        <field name="submitButton" title="Post Appraisal" widget-style="smallSubmit"><submit button-type="text-link"/></field>
    </form>
    
    <form name="listAppraiseLoan" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateAppraiseLoan" paginate-target="loanStatusLog"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanStatusLog">
            	<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
            	<order-by field-name="-loanStatusLogId"/>
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateReviewLoan"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
         <field name="createdBy"><display also-hidden="false"></display> </field>
        <field name="applicationStatus"><display also-hidden="false"></display>  </field>
         <field name="createdStamp"><display also-hidden="false" type="date-time"></display> </field>
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteAppraiseLoan" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanStatusLogId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field-->
    </form>
     
     <!-- 
    	approveLoan
    	listApproveLoan
     -->
     <form name="approveLoan" type="single" target="createApproveLoan"
        focus-field-name="comment" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanStatusLogContext">
        
        <field name="loanStatusLogId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="applicationStatus" title="Status"><text size="30" maxlength="60" default-value="APPROVED" /></field>
        <field name="comment" title="Comment" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><textarea/></field>  
        <field name="submitButton" title="Post Approval" widget-style="smallSubmit"><submit button-type="text-link"/></field>
    </form>
    
    <form name="listApproveLoan" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateApproveLoan" paginate-target="loanStatusLog"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanStatusLog">
            	<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
            	<order-by field-name="-loanStatusLogId"/>
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateApproveLoan"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
         <field name="createdBy"><display also-hidden="false"></display> </field>
        <field name="applicationStatus"><display also-hidden="false"></display>  </field>
         <field name="createdStamp"><display also-hidden="false" type="date-time"></display> </field>
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteApproveLoan" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanStatusLogId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field -->
    </form>
     <!-- 
    	disburseLoan
    	listDisburseLoan
     -->
    
     <form name="disburseLoan" type="single" target="createDisburseLoan"
        focus-field-name="comment" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanStatusLogContext">
        <actions>
        	<entity-one entity-name="LoanApplication" value-field="loanApplication">
        		<field-map field-name="loanApplicationId" from-field="parameters.loanApplicationId"/>
        	</entity-one>
        	
        	<entity-condition entity-name="LoanStatus" list="statusList"></entity-condition>
        	
        	<!-- set field="applicationStatusValue" value="${loanApplication.applicationStatus}"/ -->
        	<set field="statusName" value="DISBURSED"/>
	   		<set field="statusId" value="${bsh:org.ofbiz.party.party.SaccoUtility.getLoanStatusId(statusName);}" type="PlainString"/> 
        	
        	<set field="ready" value="${bsh:org.ofbiz.loansprocessing.LoansProcessingServices.loanReadyForDisbursement(theLoanApplicationId);}" type="Boolean"/>
        </actions>
        <field name="loanStatusLogId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="loanStatusId">
        	<hidden value="${statusId}"/>
        </field>
        <!-- field name="loanStatusId"  >
        	<drop-down>
        		<list-options key-name="loanStatusId" list-name="statusList" description="${name}"/>
        	</drop-down>
        </field -->
        <!-- field name="applicationStatus" title="Status" required-field="true"><text size="30" maxlength="60" default-value="DISBURSED" /></field-->
        <field name="comment" title="Comment" tooltip="${uiLabelMap.CommonRequired}" widget-style="required" required-field="true"><textarea/></field>
        <!-- field name="repaymentStartDate" title="Repayment Start Date"> <date-time type="date"/> </field -->
 		<!-- use-when="loanStatusId==statusId" -->
        <field name="submitButton" use-when="${ready}"  title="Post Disbursement" widget-style="smallSubmit"><submit button-type="button"/></field>
        
    </form>
    
    <form name="listDisburseLoan" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateDisburseLoan" paginate-target="loanStatusLog"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanStatusLog">
            	<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
            	<order-by field-name="-loanStatusLogId"/>
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateDisburseLoan"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
         <field name="createdBy"><display also-hidden="false"></display> </field>
        <!-- field name="applicationStatus"><display also-hidden="false"></display>  </field -->
        <field name="loanStatusId">
        	<display-entity entity-name="LoanStatus" description="${name}" key-field-name="loanStatusId"></display-entity>
        </field>
        <!-- field name="disbursementDate" title="Date Disbursed"> <display/> </field>
        
        <field name="repaymentStartDate" title="Repayment Start Date"> <display /> </field -->
        <field name="comment" title="Comments"><display></display></field>
        <field name="createdStamp" title="Date"><display also-hidden="false" type="date-time"></display> </field>
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteDisburseLoan" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanStatusLogId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field -->
    </form>
    
    <form name="listAmortizationSchedule" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateDisburseLoan" paginate-target="disburseLoan"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanAmortization">
            	<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
            </entity-condition>
        </actions>
        <!-- auto-fields-service default-field-type="hidden" service-name="updateDisburseLoan"/ -->
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
         <field name="paymentNo" title="No" widget-area-style="tabletextright"><display also-hidden="false"></display> </field>
         <field name="expectedPaymentDate" title="Expected Date" widget-area-style="tabletextright"> <display type="date" /> </field>
        <field name="paymentAmount" title="Payment Amount" widget-area-style="tabletextright"><display type="accounting-number" description="${paymentAmount}" also-hidden="false"></display>  </field>
        <field name="principalAmount" title="Principal Amount" widget-area-style="tabletextright"><display  type="accounting-number" also-hidden="false"></display>  </field>
        <field name="interestAmount" title="Interest Amount" widget-area-style="tabletextright"><display type="accounting-number" also-hidden="false"></display>  </field>
        <field name="insuranceAmount" title="Insurance Amount" widget-area-style="tabletextright"><display type="accounting-number" also-hidden="false"></display>  </field>
        <field name="balanceAmount" title="Balance Amount" widget-area-style="tabletextright"><display type="accounting-number" also-hidden="false"></display>  </field>
        <!-- field name="balanceAmount" title="Balance Amount"><display type="currency" currency="KES" also-hidden="false"></display>  </field -->
        <!--  field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteDisburseLoan" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanStatusLogId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field -->
    </form>
    
    <!-- AccountProduct -->
    <form name="AccountProduct" type="single" target="createAccountProduct"
        focus-field-name="name" header-row-style="header-row" default-table-style="basic-table" default-map-name="accountContext">
        
       
        <field name="accountProductId"><hidden/></field>
 
        <field name="name" title="Name"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
       <field name="code" title="Code" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>

      	<field name="minBalanceAmt" title="Minimum Balance"><text size="30" maxlength="60"/></field>
        
        <field name="minSavingsAmt" title="Minimum Savings Amount"><text size="30" maxlength="60"/></field>
        
        
        <field name="earnsInterest"  title="Earns Interest ?" >
            <drop-down allow-empty="false">
            	 <option key="NO" description="NO"/>
                <option key="YES" description="YES"/>
            </drop-down>
        </field>
        
        <field name="interestCalculatedPeriod"  title="Interest Calculation Period" >
            <drop-down allow-empty="true">
            	 <option key="DAILY" description="DAILY"/>
                <option key="MONTHLY" description="MONTHLY"/>
                 <option key="ANNUALLY" description="ANNUALLY"/>
            </drop-down>
        </field>
        
        <field name="hasMinimumInterestEarningAmount"  title="Has Minimum Interest Earning Amount ?" >
            <drop-down allow-empty="true">
            	 <option key="NO" description="NO"/>
                <option key="YES" description="YES"/>
            </drop-down>
        </field>
        
        <field name="minInterestEarningAmt" title="Minimum Interest Earning Amount"><text size="30" maxlength="60"/></field>
        
         <field name="whenToAddInterestToAccount"  title="When to Add Interest To Account" >
            <drop-down allow-empty="true">
            	<option key="MATURITY" description="MATURITY"/>
                <option key="ONREQUEST" description="ONREQUEST"/>
                <option key="MONTHLY" description="MONTHLY"/>
                <option key="ANNUALLY" description="ANNUALLY"/>
            </drop-down>
        </field>   
        
        <field name="accountToAddInterestTo" title="Account To Add/Post Interest" 
			required-field="false">
			<drop-down allow-empty="true">
					<entity-options description="${name} - ${code}" entity-name="AccountProduct" key-field-name="accountProductId"></entity-options>
			</drop-down>
		</field>    
        <field name="minInterestPercentageAboveSavingsAcct" title="Minimum % Above Savings Amount"><text size="30" maxlength="60"/></field>
     
     	<field name="discountOnBankersCheque"  title="Discount on Bankers Cheque ?" >
            <drop-down allow-empty="true">
                <option key="Yes" description="Yes"/>
                <option key="No" description="No"/>
            </drop-down>
        </field>
        <field name="bankersChequePercentageDiscAmt" title="Bankers Cheque Discount Amount"><text size="30" maxlength="60"/></field>
     	<field name="limitPerYearWithdrawals"  title="Limit Per Year Withdrawals?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
            </drop-down>
        </field>
     	<field name="noOfWithdrawalsPerYear" title="No Of Withdrawals Per Year" ><text size="30" maxlength="60"/></field>
     	
     	<field name="withdrawalsTriggerConversionToSavings"  title="Withdrawals Trigger Conversion to Savings A/C?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
            </drop-down>
        </field>
     	<field name="noOfWithdrawalsToTrigger" title="No Of Withdrawals To Trigger Conversion to Savings A/C" ><text size="30" maxlength="60"/></field>
     	
     	<field name="minimumPeriodInMonths" title="Minimum Period in Months" ><text size="30" maxlength="60"/></field>
     	<field name="interestPerMonth" title="Interest Per Month" ><text size="30" maxlength="60"/></field>
     	<field name="interestPerAnum" title="Interest Per Annum" ><text size="30" maxlength="60"/></field>
     	
     	<field name="allowLedgerFees"  title="Allow Ledger Fee?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
            </drop-down>
        </field>
     
     	<field name="isGroup"  title="Is Group Account?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="isSavings"  title="Is Savings A/C?">
            <drop-down allow-empty="false">
            	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="isFixedDeposit"  title="Is Fixed Deposit A/C?">
            <drop-down allow-empty="false">
            	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="isMemberDeposit"  title="Is Member Deposit A/C?">
            <drop-down allow-empty="false">
            	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="isShareCapital"  title="Is Share Deposit A/C?">
            <drop-down allow-empty="false">
            	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="isEntranceFee"  title="Is Entrance Fee?">
            <drop-down allow-empty="false">
            	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        
        <field name="saveAccountProduct" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <!-- Loan Product -->
    <form name="LoanProduct" type="single" target="createLoanProduct" focus-field-name="name" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanContext">
         <actions>
        	<entity-condition entity-name="AccountProduct" list="accountProductList">
        	</entity-condition>
        </actions>
        <field name="loanProductId"><hidden/></field>
 
        <field name="name" title="Name"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
       <field name="code" title="Code" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>

      	<field name="maxRepaymentPeriod" title="Maximum Repayment Period" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        
        <field name="interestRatePM" title="Interest Rate P.M" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        
        <field name="appraisalPercentage" title="Appraisal Percentage" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        
        <field name="minimumAmt" title="Minimum Amount" ><text size="30" maxlength="60"/></field>
        <field name="maximumAmt" title="Maximum Amount"><text size="30" maxlength="60"/></field>
        
        <field name="multipleOfSavings"  title="Multiple of Savings?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        
        <!-- Multiplier Account Product
        	MULTIPLE OF SAVINGS AMOUNT
         -->
         
         <field name="accountProductId" title="Mutliplier Account Product" 
			required-field="false">
			<drop-down allow-empty="true">
				<!-- list-options list-name="accountProductList" key-name="accountProductId"
					description="${name} - ${code}" / -->
					<entity-options description="${name} - ${code}" entity-name="AccountProduct" key-field-name="accountProductId"></entity-options>
			</drop-down>
		</field>
        
        <field name="multipleOfSavingsAmt" title="Multiple of Savings Amount"><text size="30" maxlength="60"/></field>
        
        <field name="retention"  title="Retention?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        <field name="retentionAmt" title="Retained Amount"><text size="30" maxlength="60"/></field>
        <field name="retentionPercentage" title="Retained %"><text size="30" maxlength="60"/></field>
        
         <field name="monthlyContribution"  title="Monthly Contribution?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        <field name="monthlyContributionConstant" title="Monthly Contribution Constant Amount"><text size="30" maxlength="60"/></field>
        <field name="monthlyContributionDecimal" title="Monthly Contribution fraction of Principal Amount"><text size="30" maxlength="60"/></field>
        
        <field name="retainBOSADeposit"  title="Retain BOSA Deposit?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        <field name="percentageDepositRetained" title="% of BOSA Retained"><text size="30" maxlength="60"/></field>
       
       
               <field name="affectMemberDeposit"  title="Affect Member Deposit Contribution?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        <field name="affectMemberDepositPercentage" title="% On Member Deposit Contribution"><text size="30" maxlength="60"/></field>
       
        
         <field name="percentageOfMemberNetSalary"  title="% of Member Net Salary?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        <field name="percentageOfMemberNetSalaryAmt" title="% of Member Net Salary Amount"><text size="30" maxlength="60"/></field>
        
        
        
        <field name="salaryPointShouldBeFOSA"  title="Salary Point should be FOSA?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
         <field name="deductFromMemberBonus"  title="Deduct from Member Bonus?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
         <field name="isGroup"  title="Is Group?">
            <drop-down allow-empty="false">
            	<option key="No" description="No"/>
                <option key="Yes" description="Yes"/>
                
            </drop-down>
        </field>
        
        <!-- 
			LINEAR
			REDUCING_BALANCE
		 -->
        <field name="deductionType"  title="Deduction Type" widget-style="required" required-field="true">
            <drop-down allow-empty="true">
                <option key="LINEAR" description="Linear/Flat Rate"/>
                <option key="REDUCING_BALANCE" description="Reducing/Declining Balance"/>
            </drop-down>
        </field>
        
        <field name="minimumPeriodToEligibility" title="Minimum Period To Eligibility (Months)" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
 		
        <field name="saveLoanProduct" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit  button-type="button" /></field>
    </form>
    
   <form name="listAccountProduct" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateAccountProduct" paginate-target="accountProduct"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="AccountProduct">
            	<condition-expr field-name="isActive" operator="equals" value="Y"/>
            	<order-by field-name="-accountProductId"/>
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateAccountProduct"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="accountProductId"><hidden/></field>
        <field name="name"> <text></text> </field>
        <field name="code"><text size="5"/></field>
        <field name="minBalanceAmt"><text  size="5"></text></field>
        <field name="minSavingsAmt"><text  size="5"></text></field>
        
        <field name="earnsInterest"><text  size="5"></text></field>
        <field name="hasMinimumInterestEarningAmount" title="Min Earn Amt?"><text  size="5"></text></field>
        
        <field name="minInterestEarningAmt"><text  size="5"></text></field>
        <field name="interestPerMonth"><text  size="5"></text></field>
        <field name="interestPerAnum"><text  size="5"></text></field>
        
        <!-- field name="createdStamp" title="Created"><display type="date-time"></display></field -->
         <!-- field name="createdBy" title="Created By"><display ></display></field -->
        
        <field name="Edit Account">
        	<hyperlink target="AccountProduct?accountProductId=${accountProductId}" description="Edit Account"></hyperlink>
        </field>
        
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteAccountProduct" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="saccoProductId"/>
            </hyperlink>
        </field -->
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <form name="listLoanProduct" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanProduct" paginate-target="LoanProduct"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanProduct">
            	<condition-expr field-name="isActive" operator="equals" value="Y"/>
            	<order-by field-name="-loanProductId"/>
            </entity-condition>
            
            <entity-condition entity-name="AccountProduct" list="accountProductList"></entity-condition>
        </actions>
        <!-- auto-fields-service default-field-type="hidden" service-name="updateLoanProduct"/ -->
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="loanProductId"><hidden/></field>
        <field name="name"> <text size="20"></text> </field>
        <field name="code"><text size="5"/></field>
        <field name="maxRepaymentPeriod"><text size="5"/></field>
        <field name="interestRatePM"><text size="5"/></field>
        
         <field name="minimumAmt"><text size="5"/></field>
        <field name="maximumAmt"><text size="5"/></field>
        
        <field name="deductionType"  title="Deduction Type" widget-style="required" required-field="true">
            <drop-down allow-empty="true">
                <option key="LINEAR" description="Linear/Flat Rate"/>
                <option key="REDUCING_BALANCE" description="Reducing/Declining Balance"/>
            </drop-down>
        </field>
        
        <field name="accountProductId" title="Mutliplier Account Product"
			required-field="false">
			<drop-down allow-empty="true">
				<!-- list-options list-name="accountProductList" key-name="accountProductId"
					description="${name} - ${code}" / -->
					<entity-options description="${name} - ${code}" entity-name="AccountProduct" key-field-name="accountProductId"></entity-options>
			</drop-down>
		</field>
        <field name="createdStamp" title="Created"><display type="date-time"></display></field>
         <field name="createdBy" title="Created By"><display ></display></field>
        <field name="Edit Loan">
        	<hyperlink target="LoanProduct?loanProductId=${loanProductId}" description="Edit Loan"></hyperlink>
        </field>
        
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanProduct" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanProductId"/>
            </hyperlink>
        </field>
        <!-- field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field -->
    </form>
    
    <!-- Lookup Member Forms -->
    <form name="lookupMember" target="LookupMember" title="" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <!-- <auto-fields-entity entity-name="Product" default-field-type="hidden"/> -->
        <field name="partyId" title="Member"><text-find/></field>
        <field name="firstName" title="First Name"><text-find/></field>
        <field name="lastName" title="Last Name"><text-find/></field>
        <field name="idNumber" title="ID Number"><text-find/></field>
        <field name="memberNumber" title="Member Number"><text-find/></field>
        <!-- field name="productTypeId" title="${uiLabelMap.ProductProductType}">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductType" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="primaryProductCategoryId" title="${uiLabelMap.ProductPrimaryCategory}">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="ProductCategory" key-field-name="productCategoryId">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field -->
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <!-- NOTE DEJ20070829 not sure why this is here, but it doesn't seem applicable for a general product lookup, also doesn't handle case where isVariant is null <field name="isVariant"><hidden value="N"/></field> -->
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listLookupMember" list-name="listIt" title="" type="list" paginate-target="LookupMember"
        odd-row-style="alternate-row" default-table-style="basic-table" view-size="20">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Member"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
            
        </actions>
        <!-- row-actions>            
            <set field="hasVariants" value="${groovy: org.ofbiz.entity.util.EntityUtil.filterByDate(delegator.findByAnd('ProductAssoc', org.ofbiz.base.util.UtilMisc.toMap('productId', productId, 'productAssocTypeId', 'PRODUCT_VARIANT'), null, true)).size() > 0}" type="Boolean"/>
        </row-actions -->
        <field name="partyId" title="Member" widget-style="buttontext">
            <hyperlink also-hidden="false" target-type="plain" description="${firstName} ${lastName}" target="javascript:set_value('${partyId}')"/>
        </field>
        <field name="firstName" title="First Name"><display/></field>
        <field name="lastName" title="Last Name"><display/></field>
        <field name="idNumber" title="ID Number"><display/></field>
        <field name="memberNumber" title="Member Number"><display/></field>
        <!-- field name="productTypeId" title="${uiLabelMap.ProductProductType}"><display-entity entity-name="ProductType"/></field -->
        <!-- field name="searchVariants" title=" " widget-style="buttontext" use-when="hasVariants">
            <hyperlink also-hidden="false" target-type="plain" description="Member" target="LookupMember">
                <parameter param-name="partyId"/>
            </hyperlink>
        </field -->
    </form>
    
    <!-- Salary Processing Date -->
    <form name="NewSalaryProcessingDate" type="single" target="createSalaryProcessingDate"
        focus-field-name="description" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanSecurityContext">
        
        <field name="salaryProcessingDateId"><hidden/></field>
        
        <field name="processingDay"  title="Processing Day" widget-style="required" required-field="true">
            <drop-down allow-empty="false">
                <option key="15" description="15th"/>
                <option key="1" description="1st"/>
                <option key="2" description="2nd"/>
                <option key="3" description="3rd"/>
                <option key="4" description="4th"/>
                <option key="5" description="5th"/>
                <option key="6" description="6th"/>
                <option key="7" description="7th"/>
                <option key="8" description="8th"/>
                <option key="9" description="9th"/>
                <option key="10" description="10th"/>
                <option key="11" description="11th"/>
                <option key="12" description="12th"/>
                <option key="13" description="13th"/>
                <option key="14" description="14th"/>
                <option key="16" description="16th"/>
                <option key="17" description="17th"/>
                <option key="18" description="18th"/>
                <option key="19" description="19th"/>
                <option key="20" description="20st"/>
                <option key="21" description="21st"/>
                <option key="22" description="22nd"/>
                <option key="23" description="23rd"/>
                <option key="24" description="24th"/>
                <option key="25" description="25th"/>
                <option key="26" description="26th"/>
                <option key="27" description="27th"/>
                <option key="28" description="28th"/>
                <option key="29" description="29th"/>
                <option key="30" description="30st"/>
                <option key="31" description="31st"/>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="text-link"/></field>
    </form>
    
    <form name="listSalaryProcessingDate" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateSalaryProcessingDate" paginate-target="salaryProcessingDate"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="SalaryProcessingDate">
            </entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateSalaryProcessingDate"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="processingDay">
        	 <drop-down allow-empty="true">
                <option key="15" description="15th"/>
                <option key="1" description="1st"/>
                <option key="2" description="2nd"/>
                <option key="3" description="3rd"/>
                <option key="4" description="4th"/>
                <option key="5" description="5th"/>
                <option key="6" description="6th"/>
                <option key="7" description="7th"/>
                <option key="8" description="8th"/>
                <option key="9" description="9th"/>
                <option key="10" description="10th"/>
                <option key="11" description="11th"/>
                <option key="12" description="12th"/>
                <option key="13" description="13th"/>
                <option key="14" description="14th"/>
                <option key="16" description="16th"/>
                <option key="17" description="17th"/>
                <option key="18" description="18th"/>
                <option key="19" description="19th"/>
                <option key="20" description="20st"/>
                <option key="21" description="21st"/>
                <option key="22" description="22nd"/>
                <option key="23" description="23rd"/>
                <option key="24" description="24th"/>
                <option key="25" description="25th"/>
                <option key="26" description="26th"/>
                <option key="27" description="27th"/>
                <option key="28" description="28th"/>
                <option key="29" description="29th"/>
                <option key="30" description="30st"/>
                <option key="31" description="31st"/>
            </drop-down>
        </field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteSalaryProcessingDate" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="salaryProcessingDateId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- ProductCharge -->
    <form name="NewProductCharge" type="single" target="createProductCharge"
        focus-field-name="name" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanSecurityContext">
        <actions>
        	<entity-condition entity-name="GlAccount" list="glAccountsList">
				<order-by field-name="accountName"/>
			</entity-condition>	
        </actions>
        <field name="productChargeId"><hidden/></field>
        <field name="name" title="Name" widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="chargeAccountId" title="Charge Account (A/C to Credit)" widget-style="required" required-field="true">
       		<drop-down allow-empty="true">
       			<list-options key-name="glAccountId" list-name="glAccountsList" description="${accountName} - ${accountCode}"/>
       		</drop-down>
        
        </field>
        
        <field name="isRate" title="Rate">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
                
        <field name="rateAmount" title="Rate (%)"><text /></field>
        <field name="fixedAmount" title="Amount (Total Charge)" ><text /></field>
        
        
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listProductCharge" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateProductCharge" paginate-target="NewProductCharge"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
   
        <actions>
            <entity-condition entity-name="ProductCharge">
            	<order-by field-name="-productChargeId"/>
            </entity-condition>
            
            <entity-condition entity-name="GlAccount" list="glAccountsList">
				<order-by field-name="accountName"/>
			</entity-condition>	
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateProductCharge"/>
        <!-- field name="skillTypeId">
            <display-entity entity-name="SkillType" description="${description}"/>
        </field -->
        <field name="name"> <!-- display also-hidden="false"/ --> <text></text> </field>
        
        <field name="chargeAccountId" title="Charge Account (A/C to Credit)" widget-style="required" required-field="true">
       		<drop-down allow-empty="true">
       			<list-options key-name="glAccountId" list-name="glAccountsList" description="${accountName} - ${accountCode}"/>
       		</drop-down>
        
        </field>
        
       <field name="isRate" title="Is Rate">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>

        <field name="rateAmount" title="Rate (%)"><text /></field>
        <field name="fixedAmount" title="Amount (Total Charge)"><text /></field>
        
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteProductCharge" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="productChargeId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- Find Loan Products -->
    <form name="FindLoanProduct" type="single" target="FindLoanProduct"
		default-entity-name="LoanProduct">

		<!-- form name="FindLoanApplication" type="single" target="FindLoanApplication" 
			default-entity-name="LoanApplication" -->
		<field name="noConditionFind">
			<hidden value="Y" /><!-- if this isn't there then with all fields 
				empty no query will be done -->
		</field>
		<field name="name" title="Name">
			<text-find />
		</field>
		<field name="code" title="Code">
			<text-find />
		</field>
		<field name="maxRepaymentPeriod" title="Repayment Period">
			<text-find />
		</field>
		<field name="interestRatePM" title="Interest Rate">
			<text-find />
		</field>
		<field name="deductionType" title="Deduction Method">
			<drop-down allow-empty="true">
                <option key="LINEAR" description="Linear/Flat Rate"/>
                <option key="REDUCING_BALANCE" description="Reducing/Declining Balance"/>
            </drop-down>
		</field>

		<field name="searchButton" title="${uiLabelMap.CommonFind}"
			widget-style="smallSubmit">
			<submit button-type="button" image-location="/images/icons/magnifier.png" />
		</field>
	</form>
	
	<form name="findListLoanProduct" type="list" list-name="listIt" target="updateLoanProduct" 
		paginate-target="FindLoanProduct" default-entity-name="LoanProduct"
		separate-columns="true" odd-row-style="alternate-row"
		header-row-style="header-row-2" default-table-style="basic-table hover-bar">
		<actions>
			<entity-condition entity-name="LoanProduct">
				<!-- condition-expr field-name="productType" operator="equals" value="Account"/ -->
				<!-- condition-expr field-name="saccoProductId" from-field="saccoProductId"/ -->
				<!-- order-by field-name="saccoProductId"/ -->
			</entity-condition>

			<service service-name="performFind" result-map="result"
				result-map-list="listIt">
				<field-map field-name="inputFields" from-field="loanProductCtx" />
				<field-map field-name="entityName" value="LoanProduct" />
				<field-map field-name="orderBy" from-field="parameters.sortField" />
				<field-map field-name="viewIndex" from-field="viewIndex" />
				<field-map field-name="viewSize" from-field="viewSize" />
			</service>
		</actions>
		<!-- auto-fields-service default-field-type="hidden" service-name="updateLoanApplication"/ -->
		<!-- field name="skillTypeId"> <display-entity entity-name="SkillType" 
			description="${description}"/> </field -->
		<field name="loanProductId"><hidden/></field>
        <field name="name"> <text size="20"></text> </field>
        <field name="code"><text size="10"/></field>
        <field name="maxRepaymentPeriod"><text size="5"/></field>
        <field name="interestRatePM"><text size="5"/></field>
        
         <field name="minimumAmt"><text size="10"/></field>
        <field name="maximumAmt"><text size="10"/></field>
        
        <field name="multipleOfSavings"><text size="5"/></field>
        <field name="multipleOfSavingsAmt"><text size="5"/></field>
        
        <field name="deductionType"  title="Deduction Type" widget-style="required" required-field="true">
            <drop-down allow-empty="true">
                <option key="LINEAR" description="Linear/Flat Rate"/>
                <option key="REDUCING_BALANCE" description="Reducing/Declining Balance"/>
            </drop-down>
        </field>
        
         <field name="accountProductId" title="Mutliplier Account Product"
			required-field="false">
			<drop-down allow-empty="true">
				<!-- list-options list-name="accountProductList" key-name="accountProductId"
					description="${name} - ${code}" / -->
					<entity-options description="${name} - ${code}" entity-name="AccountProduct" key-field-name="accountProductId"></entity-options>
			</drop-down>
		</field>
        
        <field name="Edit Loan">
        	<hyperlink target="LoanProduct?loanProductId=${loanProductId}" description="Edit Loan"></hyperlink>
        </field>
		
		<field name="details">
			<hyperlink target="viewloanproductdetails?loanProductId=${loanProductId}"
				description="Details"></hyperlink>
		</field>
		
		<field name="deleteLink" title="${uiLabelMap.CommonDelete}"
			widget-style="buttontext">
			<hyperlink target="deleteLoanProduct" description="${uiLabelMap.CommonDelete}"
				also-hidden="false">
				<parameter param-name="loanProductId" />
			</hyperlink>
		</field>
		<field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit 
			button-type="button"/></field>
	</form>
	
	<!-- Loan Product Charge -->
	<form name="NewLoanProductCharge" type="single" target="createLoanProductCharge"
        focus-field-name="productChargeId" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanProductChargeContext">
        
        <actions>
        	<entity-condition entity-name="ProductCharge" list="productChargeList">
            </entity-condition>
        </actions>
        
        <field name="loanProductChargeId"><hidden/></field>
        <field name="loanProductId" parameter-name="loanProductId"><hidden/></field>
        <field name="productChargeId" title="Charge"  widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/>
            </drop-down>
        </field>
        <field name="isFixed" title="Fixed"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        
        <field name="chargedUpfront" title="Charged Upfront"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        
        <field name="rateAmount" title="Rate (%)"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="fixedAmount" title="Amount (Total Charge)" ><text size="30" maxlength="60"/></field>
        
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <!-- form name="listLoanProductCharge" type="list" list-name="loanProductChargList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" -->
     <form name="listLoanProductCharge" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanProductCharge" paginate-target="viewloanproductdetails"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanProductCharge">
        		<condition-expr field-name="loanProductId" operator="equals" from-field="parameters.loanProductId"/>
        	</entity-condition>
        	<entity-condition entity-name="ProductCharge" list="productChargeList"></entity-condition>
        </actions>
        
         <field name="loanProductChargeId"><hidden/></field>
        <field name="loanProductId" parameter-name="loanProductId"><hidden/></field>
        
        <field name="productChargeId" title="Charge"  widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <!-- list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/ -->
                <entity-options description="${name}" entity-name="ProductCharge" key-field-name="productChargeId"></entity-options>
            </drop-down>
        </field>
        <field name="isFixed" title="Fixed"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        
        <field name="chargedUpfront" title="Charged Upfront"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        
        <field name="rateAmount" title="Rate (%)"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="fixedAmount" title="Amount (Total Charge)"><text size="30" maxlength="60"/></field>
		<field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanProductCharge" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanProductChargeId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- Loan Application Charge -->
    <form name="NewLoanApplicationCharge" type="single" target="createLoanApplicationCharge"
        focus-field-name="productChargeId" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanApplicationChargeContext">
        
        <actions>
        	<entity-condition entity-name="ProductCharge" list="productChargeList">
            </entity-condition>
        </actions>
        
        <field name="loanApplicationChargeId"><hidden/></field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="productChargeId" title="Charge"  widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/>
            </drop-down>
        </field>
        <field name="isFixed" title="Fixed"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        
        <field name="chargedUpfront" title="Charged Upfront"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        
        <field name="rateAmount" title="Rate (%)"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="fixedAmount" title="Amount (Total Charge)" ><text size="30" maxlength="60"/></field>
        
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listLoanApplicationCharge" type="list" list-name="loanApplicationChargeList" use-row-submit="true" separate-columns="true" target="updateLoanApplicationCharge" paginate-target="viewaccountproductdetails"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanApplicationCharge">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="parameters.loanApplicationId"/>
        	</entity-condition>
        	<entity-condition entity-name="ProductCharge" list="productChargeList"></entity-condition>
        </actions>
        <field name="loanApplicationChargeId"> <hidden/> </field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="productChargeId" title="Charge"  widget-style="required" required-field="true">
        	<!-- drop-down allow-empty="true">
                <list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/>
            </drop-down -->
            <display-entity entity-name="ProductCharge" description="${name}" key-field-name="productChargeId"></display-entity>
        </field>
        <field name="isFixed" title="Fixed"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        <field name="chargedUpfront" title="Charged Upfront"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        <field name="rateAmount" title="Rate (%)"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="fixedAmount" title="Amount (Total Charge)"><text size="30" maxlength="60"/></field>
		<field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanApplicationChargee" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanApplicationChargeId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- Disburse Application Charges List -->
    <!-- form name="listDisbursementLoanApplicationCharge" type="list" list-name="loanApplicationChargeList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" -->
     <form name="listDisbursementLoanApplicationCharge" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" paginate-target="viewaccountproductdetails"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">    
        <actions>
        	<entity-condition entity-name="LoanApplicationCharge">
        		<condition-list combine="and">
        			<condition-expr field-name="loanApplicationId" operator="equals" from-field="parameters.loanApplicationId"/>
        			<condition-expr field-name="chargedUpfront" operator="equals" value="Y"/>
        		</condition-list>
        	</entity-condition>
        	<!-- entity-condition entity-name="ProductCharge" list="productChargeList"></entity-condition -->
        </actions>
        <field name="loanApplicationChargeId"> <hidden/> </field>
        <field name="loanApplicationId" parameter-name="loanApplicationId"><hidden/></field>
        <field name="productChargeId" title="Charge">
        	<!-- drop-down allow-empty="true">
                <list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/>
            </drop-down -->
            <display-entity entity-name="ProductCharge" key-field-name="productChargeId" description="${name}"></display-entity>
        </field>
        <field name="isFixed" title="Fixed"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        <field name="chargedUpfront" title="Charged Upfront"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
                <option key="Y" description="Yes"/>
                <option key="N" description="No"/>
            </drop-down>
        </field>
        <field name="rateAmount" title="Rate (%)"  widget-style="required" required-field="true"><text size="30" maxlength="60"/></field>
        <field name="fixedAmount" title="Amount (Total Charge)"><text size="30" maxlength="60"/></field>
		
    </form>
    
    <!-- FindAccountProduct -->
    <form name="FindAccountProduct" type="single" target="FindAccountProduct"
		default-entity-name="AccountProduct">

		<!-- form name="FindLoanApplication" type="single" target="FindLoanApplication" 
			default-entity-name="LoanApplication" -->
		<field name="noConditionFind">
			<hidden value="Y" /><!-- if this isn't there then with all fields 
				empty no query will be done -->
		</field>
		<field name="name" title="Name">
			<text-find />
		</field>
		<field name="code" title="Code">
			<text-find />
		</field>
        <field name="minBalanceAmt"><text-find/></field>
        <field name="minSavingsAmt"><text-find/></field>
        <field name="minInterestEarningAmt"><text-find/></field>
        <field name="interestPerMonth"><text-find/></field>

		<field name="searchButton" title="${uiLabelMap.CommonFind}"
			widget-style="smallSubmit">
			<submit button-type="button" image-location="/images/icons/magnifier.png" />
		</field>
	</form>
    <!-- findListAccountProduct -->
    <form name="findListAccountProduct" type="list" list-name="listIt"
		paginate-target="FindAccountProduct" default-entity-name="AccountProduct"
		separate-columns="true" odd-row-style="alternate-row"
		header-row-style="header-row-2" default-table-style="basic-table hover-bar">
		<actions>
			<entity-condition entity-name="AccountProduct">
				<!-- condition-expr field-name="productType" operator="equals" value="Account"/ -->
				<!-- condition-expr field-name="saccoProductId" from-field="saccoProductId"/ -->
				<!-- order-by field-name="saccoProductId"/ -->
			</entity-condition>

			<service service-name="performFind" result-map="result"
				result-map-list="listIt">
				<field-map field-name="inputFields" from-field="accountProductCtx" />
				<field-map field-name="entityName" value="AccountProduct" />
				<field-map field-name="orderBy" from-field="parameters.sortField" />
				<field-map field-name="viewIndex" from-field="viewIndex" />
				<field-map field-name="viewSize" from-field="viewSize" />
			</service>
		</actions>
		<!-- auto-fields-service default-field-type="hidden" service-name="updateLoanApplication"/ -->
		<!-- field name="skillTypeId"> <display-entity entity-name="SkillType" 
			description="${description}"/> </field -->
        <field name="accountProductId"><hidden/></field>
        <field name="name"> <text></text> </field>
        <field name="code"><text/></field>
        <field name="minBalanceAmt"><text></text></field>
        <field name="minSavingsAmt"><text></text></field>
        <field name="minInterestEarningAmt"><text></text></field>
        <field name="interestPerMonth"><text></text></field>
        
        <field name="Edit Account">
        	<hyperlink target="AccountProduct?accountProductId=${accountProductId}" description="Edit Account"></hyperlink>
        </field>
		
		<field name="details">
			<hyperlink target="viewaccountproductdetails?accountProductId=${accountProductId}"
				description="Details"></hyperlink>
		</field>
		
	</form>
	
	<!-- AccountProductCharge Form and List -->
	<form name="NewAccountProductCharge" type="single" target="createAccountProductCharge"
        focus-field-name="productChargeId" header-row-style="header-row" default-table-style="basic-table" default-map-name="accountProductChargeContext">
        
        <actions>
        	<entity-condition entity-name="ProductCharge" list="productChargeList">
            </entity-condition>
        </actions>
        
        <field name="accountProductChargeId"><hidden/></field>
        <field name="accountProductId" parameter-name="accountProductId"><hidden/></field>
        <field name="productChargeId" title="Charge"  widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/>
            </drop-down>
        </field>
        <field name="transactionType" title="Transaction Type"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
        	 	<option key="CASHWITHDRAWAL" description="CASHWITHDRAWAL"/>
                <option key="CASHDEPOSIT" description="CASHDEPOSIT"/>
                <option key="CHEQUEWITHDRAWAL" description="CHEQUEWITHDRAWAL"/>
                <option key="CHEQUEDEPOSIT" description="CHEQUEDEPOSIT"/>
                <option key="MSACCOWITHDRAWAL" description="MSACCOWITHDRAWAL"/>
                <option key="ATMWITHDRAWAL" description="ATMWITHDRAWAL"/>
            </drop-down>
        </field>
        <field name="isFixed" title="Fixed"  widget-style="required" required-field="true">
        	 <drop-down allow-empty="true">
        	 	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="rateAmount" title="Rate (%)" ><text size="30" maxlength="60"/></field>
      
      <field name="isPercentageOfOtherCharge" title="% Of Another Charge">
        	 <drop-down allow-empty="true">
                <option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="parentChargeId" title="Parent Charge"  required-field="false">
        	<drop-down allow-empty="true">
                <list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/>
            </drop-down>
        </field>
        <field name="fixedAmount" title="Amount (Total Charge)" ><text size="30" maxlength="60"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <!-- form name="listAccountProductCharge" type="list" list-name="accountProductChargeList"
       header-row-style="header-row" default-table-style="basic-table"   odd-row-style="alternate-row" -->
      <form name="listAccountProductCharge" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateAccountProductCharge" paginate-target="viewaccountproductdetails"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="AccountProductCharge">
        		<condition-expr field-name="accountProductId" operator="equals" from-field="parameters.accountProductId"/>
        	</entity-condition>
        	<entity-condition entity-name="ProductCharge" list="productChargeList"></entity-condition>
        </actions>
        <field name="accountProductChargeId"><hidden/></field>
        <field name="accountProductId"><hidden/></field>
        <field name="productChargeId" title="Charge" >
        	<drop-down allow-empty="true">
                <!-- list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/ -->
                <entity-options description="${name}" entity-name="ProductCharge"></entity-options>
            </drop-down>
        </field>
        
        <field name="transactionType" title="Transaction Type" >
        	 <drop-down allow-empty="true" text-size="15">
        	 	<option key="CASHWITHDRAWAL" description="CASHWITHDRAWAL"/>
                <option key="CASHDEPOSIT" description="CASHDEPOSIT"/>
                <option key="CHEQUEWITHDRAWAL" description="CHEQUEWITHDRAWAL"/>
                <option key="CHEQUEDEPOSIT" description="CHEQUEDEPOSIT"/>
            </drop-down>
        </field>
        
        <field name="isFixed" title="Fixed">
        	 <drop-down allow-empty="true" text-size="15">
        	 	<option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="rateAmount" title="Rate (%)" ><text size="15" maxlength="60"/></field>
      
      <field name="isPercentageOfOtherCharge" title="% Of Another Charge">
        	 <drop-down allow-empty="true" text-size="15">
                <option key="N" description="No"/>
                <option key="Y" description="Yes"/>
            </drop-down>
        </field>
        
        <field name="parentChargeId" title="Parent Charge">
        	<drop-down allow-empty="true" text-size="15">
                <!-- list-options list-name="productChargeList"   key-name="productChargeId" description="${name}"/ -->
                <entity-options description="${name}" entity-name="ProductCharge" key-field-name="productChargeId"></entity-options>
            </drop-down>
        </field>
        
        <field name="fixedAmount" title="Amount (Total Charge)" ><text size="15" maxlength="60"/></field>
		<field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanProductCharge" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanProductChargeId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- Loan Product Class -->
	<form name="NewLoanProductClass" type="single" target="createLoanProductClass"
        focus-field-name="memberClass" header-row-style="header-row" default-table-style="basic-table" default-map-name="loanSecurityContext">
        <actions>
        	<entity-condition entity-name="LoanProduct" list="productList"></entity-condition>
        </actions>
        
        <field name="loanProductId" title="Loan Product" widget-style="required"
			required-field="true">
			<drop-down allow-empty="true">
				<list-options list-name="productList" key-name="loanProductId"
					description="${name} - ${code}" />
			</drop-down>
		</field>
		<field name="memberClass" title="Member Class">
            <drop-down allow-empty="false" no-current-selected-key="N">
                <option key="Class A" description="Class A"/>
				<option key="Class B" description="Class B"/>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listLoanProductClass" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanProductClass" paginate-target="classifyProducts"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="LoanProductClass">
            </entity-condition>
            
            <entity-condition entity-name="LoanProduct" list="productList"></entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanProductClass"/>
       <field name="loanProductId" title="Loan Product" widget-style="required"
			required-field="true">
			<drop-down allow-empty="true">
				<list-options list-name="productList" key-name="loanProductId"
					description="${name} - ${code}" />
			</drop-down>
		</field>
		<field name="memberClass" title="Member Class">
            <drop-down allow-empty="false" no-current-selected-key="N">
                <option key="Class A" description="Class A"/>
				<option key="Class B" description="Class B"/>
            </drop-down>
        </field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteLoanProductClass" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="loanProductId"/>
                <parameter param-name="memberClass"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
    </form>
    
    <!-- Add Find Member Form -->
    <form name="FindMember" type="single" target="main" default-entity-name="Member">
        <actions>
        	<entity-condition entity-name="PartyGroup" list="partyGroups">
        		<condition-expr field-name="isBranch" operator="equals" value="Y"/>
        	</entity-condition>
        </actions>
        
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>

        <field name="firstName" title="First Name"><text-find/></field>

        <field name="idNumber" title="ID Number" position="2"><text-find/></field>

        <field name="middleName" title="Middle Name"><text-find/></field>

        <field name="payrollNumber" title="Payroll Number" position="2"><text-find/></field>

        <field name="lastName" title="Last Name"><text-find/></field>

        <field name="memberNumber" title="Member No." position="2"><text-find/></field>

		
        <field name="stationId" title="Station">
            <drop-down allow-empty="true" current-description="">
                <entity-options description="${name}" key-field-name="stationId" entity-name="Station">
                    <entity-order-by field-name="name"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="branchId" title="Branch">
            <drop-down allow-empty="true" current-description="">
                <!-- entity-options description="${groupName}" key-field-name="partyId" entity-name="PartyGroup"/ -->
                <list-options key-name="partyId" list-name="partyGroups" description="${groupName}"/>
            </drop-down>
        </field>

        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button" image-location="/images/icons/magnifier.png"/></field>
    </form>
    
    <form name="members" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateMember" paginate-target="members"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        
        <actions>
        	<!-- entity-condition entity-name="Member">
        		<order-by field-name="-partyId"/>
        	</entity-condition -->
        	
        	<entity-condition entity-name="PartyGroup" list="partyGroups">
        		<condition-expr field-name="isBranch" operator="equals" value="Y"/>
        	</entity-condition>
        	<!-- entity-condition entity-name="Station" list="stationList"></entity-condition -->
        	
        	<service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="memberCtx"/>
                <field-map field-name="entityName" value="Member"/>
                <field-map field-name="orderBy" from-field="parameters.sortField"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
         <field name="partyId"><hidden/></field>
         <field name="firstName" title="First Name"><display also-hidden="false"/></field>
        <field name="lastName" title="Last Name"><display also-hidden="false"/></field>
        <field name="idNumber" title="ID Number"><display also-hidden="false"></display></field>
   
       <field name="payrollNumber" title="Payroll Number"><display also-hidden="false"></display></field>
	     <!-- field name="stationId" title="Station">
	     	<display-entity entity-name="Station" key-field-name="stationId"  description="${name}"></display-entity>
           
        </field -->
        
         <!-- drop-down allow-empty="true" >
                <list-options list-name="stationList" key-name="stationId"  description="${name}" />
            </drop-down -->
        
        <!-- field name="memberStatusId" title="Member Status">
        	<display-entity entity-name="MemberStatus" description="${name}" key-field-name="memberStatusId"></display-entity>	
        </field -->
        <field name="createdStamp" title="Created"><display  type="date"></display></field>
        <field name="createdBy" title="Created By"><display ></display></field>
        <!-- viewapplicationprofile -->
        <!-- loanapplication?partyId=${partyId} -->
        <field name="Loan Application">
        	<hyperlink target="loanapplication"  description="Loan Application for ${firstName} ${lastName}">
        		<parameter param-name="partyId" from-field="partyId"/>
        	</hyperlink>
        </field>
     </form> 
     
     <!-- LoanStatus -->
      <!--Begin LoanStatus -->

    <!--End LoanStatus -->
    <!-- 
    	
		LoanInterestChange
		LoanAmountChange
		LoanRepaymentPeriodChange
		LoanSalaryAmount
		LoanGuarantorChange
    	
     -->
     <!-- LoanStatusChange -->
     <form name="LoanStatusChange" type="single" target="createLoanStatusChange"
        focus-field-name="toStatus" header-row-style="header-row"  default-table-style="basic-table" default-map-name="loanStatusChangeContext">
        <actions>
        	<entity-condition entity-name="LoanStatus" list="loanStatusList">
        	</entity-condition>
        	<set field="fromStatus" value="${loanApplication.applicationStatus}"/>
        </actions>
        <field name="loanStatusChangeId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
        
      <field name="fromStatus" title="From" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        
      <field name="toStatus" title="To" tooltip="${uiLabelMap.CommonRequired}" widget-style="required">
            <drop-down allow-empty="true" current-description="">
                <entity-options description="${name}" key-field-name="name" entity-name="LoanStatus">
                    <entity-order-by field-name="name"/>
                </entity-options>
            </drop-down>
        </field>
        
 		               
        <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listLoanStatusChange" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanStatusChange" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanStatusChange">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanStatusChange"/>
        <field name="loanStatusChangeId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		<field name="fromStatus" title="From"><display></display></field>
		<field name="toStatus" title="To"><display></display></field>
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
     <!-- LoanInterestChange -->
           <form name="LoanInterestChange" type="single" target="createLoanInterestChange"
        focus-field-name="toInterestRate" header-row-style="header-row"  default-table-style="basic-table" default-map-name="loanInterestChangeContext">
        <actions>
        	<entity-condition entity-name="LoanStatus" list="loanStatusList">
        	</entity-condition>
        	<set field="fromInterestRate" value="${loanApplication.interestRatePM}"/>
        </actions>
        <field name="loanInterestChangeId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
        
      <field name="fromInterestRate" title="From" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
      <field name="toInterestRate" title="To" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        
   
        
 		               
        <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listLoanInterestChange" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanInterestChange" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanInterestChange">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanInterestChange"/>
        <field name="loanInterestChangeId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		<field name="fromInterestRate" title="From"><display></display></field>
		<field name="toInterestRate" title="To"><display></display></field>
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
     <!-- LoanAmountChange -->
      <form name="LoanAmountChange" type="single" target="createLoanAmountChange"
        focus-field-name="toInterestRate" header-row-style="header-row"  default-table-style="basic-table" default-map-name="loanAmountChangeContext">
        <actions>
        	<set field="fromAmount" value="${loanApplication.loanAmt}"/>
        </actions>
        <field name="loanAmountChangeId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
        
      <field name="fromAmount" title="From" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
      <field name="toAmount" title="To" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        
   
        
 		               
        <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listLoanAmountChange" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanAmountChange" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanAmountChange">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanAmountChange"/>
        <field name="loanAmountChangeId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		<field name="fromAmount" title="From"><display></display></field>
		<field name="toAmount" title="To"><display></display></field>
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
     
     <!-- LoanRepaymentPeriodChange -->
           <form name="LoanRepaymentPeriodChange" type="single" target="createLoanRepaymentPeriodChange"
        focus-field-name="toInterestRate" header-row-style="header-row"  default-table-style="basic-table" default-map-name="loanRepaymentPeriodChangeContext">
        <actions>
        	<set field="fromPeriod" value="${loanApplication.repaymentPeriod}"/>
        </actions>
        <field name="loanRepaymentPeriodChangeId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
        
      <field name="fromPeriod" title="From" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
      <field name="toPeriod" title="To" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        
   
        
 		               
        <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listLoanRepaymentPeriodChange" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanRepaymentPeriodChange" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanRepaymentPeriodChange">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanRepaymentPeriodChange"/>
        <field name="loanRepaymentPeriodChangeId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		<field name="fromPeriod" title="From"><display></display></field>
		<field name="toPeriod" title="To"><display></display></field>
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
     <!-- LoanSalaryAmount -->
     <form name="LoanSalaryAmount" type="single" target="createLoanSalaryAmount"
        focus-field-name="toInterestRate" header-row-style="header-row"  default-table-style="basic-table" default-map-name="loanSalaryAmountContext">
        <actions>
        	<set field="fromSalaryAmount" value="${loanApplication.salaryAmt}"/>
        </actions>
        <field name="loanSalaryAmountId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
        
      <field name="fromSalaryAmount" title="From" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
      <field name="toSalaryAmount" title="To" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        
   
        
 		               
        <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listLoanSalaryAmount" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanSalaryAmount" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanSalaryAmount">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanSalaryAmount"/>
        <field name="loanSalaryAmountId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		<field name="fromSalaryAmount" title="From"><display></display></field>
		<field name="toSalaryAmount" title="To"><display></display></field>
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
     
     <!-- LoanGuarantorChange -->
           <form name="LoanGuarantorChange" type="single" target="createLoanGuarantorChange"
        focus-field-name="toInterestRate" header-row-style="header-row"  default-table-style="basic-table" default-map-name="loanGuarantorChangeContext">
      
        <field name="loanGuarantorChangeId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
        
         <field name="fromGuarantor" title="Old Guarantor"><lookup target-form-name="LookupActiveMember"/></field>
     		
		<!-- To -->
		
		<!-- field name="toGuarantor" title="New Guarantor" widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="memberList"   key-name="partyId" description="${firstName} ${middleName} ${lastName}"/>
            </drop-down>
        </field -->
        <field name="toGuarantor" title="New Guarantor"><lookup target-form-name="LookupActiveMember"/></field>
        
        <!-- field name="toMemberNo" title="To Member No." widget-style="required" required-field="true"><text size="20" maxlength="60"/></field>
        <field name="toPayrolNo" title="To Payrol No." widget-style="required" required-field="true"><text size="20" maxlength="60"/></field>
        <field name="toDepositamt" title="To Deposit Amount" widget-style="required" required-field="true"><text size="20" maxlength="60"/></field>
        
        <field name="toCurrentStationId" title="To Current Station" widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="stationList"   key-name="stationId" description="${name}"/>
            </drop-down>
        </field>
        <field name="toGuaranteedPercentage" title="Guaranteed %"><text size="20" maxlength="60"/></field>
		<field name="toGuaranteedValue" title="Guaranteed Amount"><text size="20" maxlength="60"/></field -->      
   
        
 		               
        <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listLoanGuarantorChange" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateLoanGuarantorChange" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="LoanGuarantorChange">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateLoanGuarantorChange"/>
        <field name="loanGuarantorChangeId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		     <field name="fromGuarantor" title="Old Guarantor" widget-style="required" required-field="true">
        	<!-- drop-down allow-empty="true">
                <list-options list-name="memberList"   key-name="partyId" description="${firstName} ${middleName} ${lastName}"/>
            </drop-down -->
            <display-entity entity-name="Member" key-field-name="partyId"  description="${firstName} ${middleName} ${lastName}" also-hidden="false"/>
        </field>
        
        <field name="memberNo" title="Member No." widget-style="required" required-field="true"><display/></field>
        <field name="payrolNo" title="Payrol No." widget-style="required" required-field="true"><display/></field>
        <field name="depositamt" title="Deposit Amount" widget-style="required" required-field="true"><display/></field>
        
        <field name="currentStationId" title="Current Station" widget-style="required" required-field="true">
        	<!-- drop-down allow-empty="true">
                <list-options list-name="stationList"   key-name="stationId" description="${name}"/>
            </drop-down  -->
            <display-entity entity-name="Station" key-field-name="stationId"  description="${name}" also-hidden="false"/>
        </field>
        <field name="guaranteedPercentage" title="Guaranteed %"><display/></field>
		<field name="guaranteedValue" title="Guaranteed Amount"><display/></field>
		
		<!-- To -->
		
		<field name="toGuarantor" title="New Guarantor" widget-style="required" required-field="true">
        	<!-- drop-down allow-empty="true">
                <list-options list-name="memberList"   key-name="partyId" description="${firstName} ${middleName} ${lastName}"/>
            </drop-down -->
            <display-entity entity-name="Member" key-field-name="partyId"  description="${firstName} ${middleName} ${lastName}" also-hidden="false"/>
        </field>
        
        <field name="toMemberNo" title="To Member No." widget-style="required" required-field="true"><display/></field>
        <field name="toPayrolNo" title="To Payrol No." widget-style="required" required-field="true"><display/></field>
        <field name="toDepositamt" title="To Deposit Amount" widget-style="required" required-field="true"><display/></field>
        
        <field name="toCurrentStationId" title="To Current Station" widget-style="required" required-field="true">
        	<drop-down allow-empty="true">
                <list-options list-name="stationList"   key-name="stationId" description="${name}"/>
            </drop-down>
        </field>
        <field name="toGuaranteedPercentage" title="Guaranteed %"><display/></field>
		<field name="toGuaranteedValue" title="Guaranteed Amount"><display/></field> 
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
    
    <form name="FindLoan" type="single" target="loanapplicationslist"
		default-entity-name="LoanApplication" default-map-name="loanApplicationCtx">

		<!-- form name="FindLoanApplication" type="single" target="FindLoanApplication" 
			default-entity-name="LoanApplication" -->
		<field name="noConditionFind">
			<hidden value="Y" /><!-- if this isn't there then with all fields 
				empty no query will be done -->
		</field>
		<field name="loanNo" title="Loan No.">
			<text-find />
		</field>
		<!-- field name="partyId" title="Member">
			<drop-down allow-empty="true" current-description="">
				<entity-options description="${firstName} ${middleName} ${lastName} - ${memberNumber}"
					key-field-name="partyId" entity-name="Member">
					
					<entity-constraint name="memberStatusId" operator="equals" value="1"/>
					<entity-order-by field-name="firstName" />
				</entity-options>
			</drop-down>
		</field -->
		<field name="partyId" title="Member"><lookup target-form-name="LookupActiveMember"/></field>

		<field name="loanProductId" title="Loan Type">
			<drop-down allow-empty="true" current-description="">
				<entity-options description="${name} ${code}"
					key-field-name="loanProductId" entity-name="LoanProduct">
					<entity-order-by field-name="name" />
				</entity-options>
			</drop-down>
		</field>
		
		<field name="loanStatusId" title="Status">
			<drop-down allow-empty="true">
				<entity-options description="${name}" entity-name="LoanStatus" key-field-name="loanStatusId"></entity-options>
			</drop-down>
		</field>
		<!--  field name="applicationStatus" title="Status">
			<text-find />
		</field -->
		<field name="loanAmt" title="Amount">
			<text-find></text-find>
		</field>
		<field name="percentInterestPerMonthAmt" title="Interest Per Month">
			<text-find />
		</field>
		<field name="repaymentPeriod" title="Repayment Period">
			<text-find />
		</field>

		<field name="searchButton" title="${uiLabelMap.CommonFind}"
			widget-style="smallSubmit">
			<submit button-type="button" image-location="/images/icons/magnifier.png" />
		</field>
	</form>
    
    <form name="listLoanApplications" type="list" list-name="listIt"
		paginate-target="FindLoanApplication" 
		separate-columns="true" odd-row-style="alternate-row"
		header-row-style="header-row-2" default-table-style="basic-table hover-bar">
		<actions>
			
			<!-- entity-condition entity-name="LoanApplication">
				
				<order-by field-name="-loanApplicationId"/>
			</entity-condition -->
				 <!-- set field="loanApplicationId" from-field="loanApplication.loanApplicationId"/ -->
			  <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="loanApplicationCtx"/>
                <field-map field-name="entityName" value="LoanApplication"/>
                <field-map field-name="orderBy" value="-loanApplicationId"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                
                
                
            </service>   							
		</actions>
		
		<!-- auto-fields-service default-field-type="hidden" service-name="updateLoanApplication"/ -->
		<!-- field name="skillTypeId"> <display-entity entity-name="SkillType" 
			description="${description}"/> </field -->
		<field name="loanNo">
			<display also-hidden="false" />
		</field>
		<field name="partyId" title="Member">
			<display-entity description="${firstName} ${middleName} ${lastName}"
				entity-name="Member" also-hidden="false"></display-entity>
			
		</field>
		
		<!-- drop-down allow-empty="true"> <entity-options description="${firstName} 
				${middleName} ${lastName}" entity-name="Member"> </entity-options> </drop-down -->
		<!-- field name="firstName"> <text></text> </field> <field name="middleName"> 
			<text></text> </field> <field name="lastName"> <text></text> </field -->
		<field name="loanProductId" title="Product">
			<display-entity description="${name} ${code}"
				entity-name="LoanProduct" also-hidden="false"></display-entity>
			<!-- drop-down allow-empty="true"> <entity-options description="${name} 
				${code}" entity-name="SaccoProduct"> </entity-options> </drop-down -->
		</field>
		<field name="loanAmt" title="Amount">
			<display also-hidden="false" />
		</field>
		
		<field name="interestRatePM" title="Interest">
			<display also-hidden="false" />
		</field>
		
		<!-- field name="salaryAmt" title="Salary Amount">
			<display also-hidden="false" />
		</field>
		<field name="interestRatePM" title="Interest Rate(P.M)">
			<display also-hidden="false" />
		</field>
		<field name="repaymentPeriod" title="Repayment Period">
			<display also-hidden="false" />
		</field>


		<field name="paymentMethodTypeId" title="Payment Method">
			<display-entity description="${description}"
				entity-name="PaymentMethodType"></display-entity>
		</field -->

		<!-- field name="loanSecurityId" title="LoanSecurity"> <drop-down allow-empty="true"> 
			<entity-options description="${description}" entity-name="PaymentMethodType" -->
		<!-- entity-order-by field-name="description"/ -->
		<!-- /entity-options> </drop-down> </field -->
		<!-- field name="applicationStatus">
			<display also-hidden="false" />
		</field -->
		
		<field name="loanStatusId" title="Status">
			<display-entity entity-name="LoanStatus" description="${name}" key-field-name="loanStatusId"></display-entity>
		</field>
		
		<field name="Edit Application">
			<hyperlink target="loanapplication?loanApplicationId=${loanApplicationId}"
				description="Edit Application"></hyperlink>
		</field>
		
		<!-- field name="Forward" use-when="applicationStatus.equals(&quot;NEW&quot;)" event="onclick"
			action="javascript: return loanApplicationFormComplete(${loanApplicationId});">
			<hyperlink target="forwardApplication?loanApplicationId=${loanApplicationId}"
				description="Forward Application"></hyperlink>
				
				
		</field -->
		<!-- field name="formStatus" title="Form" use-when="loanApplication.collateralsAvailable.equals(&quot;N&quot;)&amp;&amp;loanApplication.guarantorsAvailable.equals(&quot;N&quot;)&amp;&amp;loanApplication.guarantorsTotalDepositsEnough.equals(&quot;N&quot;)&amp;&amp;loanApplication.eacherGuarantorGreaterThanAverage.equals(&quot;N&quot;)"><display default-value="Form Incomplete, Provide Details (Guarantors, Collateral etc)"></display></field -->
		

		<!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}"
			widget-style="buttontext">
			<hyperlink target="deleteLoanProduct" description="${uiLabelMap.CommonDelete}"
				also-hidden="false">
				<parameter param-name="loanProductId" />
			</hyperlink>
		</field -->
		<!-- field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit 
			button-type="button"/></field -->
		<field name="changeLoanDetails" title="Change Loan Details"
			widget-style="buttontext">
			<hyperlink target="changeLoanDetails" description="Change Loan Details"
				also-hidden="false">
				<parameter param-name="loanApplicationId" />
			</hyperlink>
		</field>
		<field name="detailsLink" title="Details"
			widget-style="buttontext">
			<hyperlink target="viewapplicationprofile" description="Details"
				also-hidden="false">
				<parameter param-name="loanApplicationId" />
			</hyperlink>
		</field>
		
		
	</form>
	
	<!-- Monthly Repayment Change -->
	      <form name="MonthlyRepaymentChange" type="single" target="createMonthlyRepaymentChange"
        focus-field-name="toInterestRate" header-row-style="header-row"  default-table-style="basic-table" default-map-name="monthlyRepaymentChangeContext">
        <actions>
        	<set field="monthlyRepayment" value="${loanApplication.monthlyRepayment}"/>
        </actions>
        <field name="monthlyRepaymentChangeId"><hidden/></field>
        
       <field name="loanApplicationId"><hidden value="${loanApplicationId}"/></field>
      <field name="fromMonthlyRepayment" title="From" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60" default-value="${monthlyRepayment}"/></field>
      <field name="toMonthlyRepayment" title="To" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
      <field name="change" title="Change" widget-style="buttontext" > <submit/> </field>
    </form>
    
    <form name="listMonthlyRepaymentChange" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateMonthlyRepaymentChange" paginate-target="changeMember"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="MonthlyRepaymentChange">
        		<condition-expr field-name="loanApplicationId" operator="equals" from-field="loanApplicationId"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateMonthlyRepaymentChange"/>
        <field name="monthlyRepaymentChangeId"><hidden/></field>
        
        <field name="loanApplicationId"><hidden/></field>
		<field name="fromMonthlyRepayment" title="From"><display></display></field>
		<field name="toMonthlyRepayment" title="To"><display></display></field>
        

        <field name="changedBy" title="Changed By"><display></display></field>
        <field name="createdStamp" title="On"><display type="date-time"></display></field>
    </form>
</forms>