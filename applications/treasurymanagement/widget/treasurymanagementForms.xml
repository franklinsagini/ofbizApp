<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">
	
	<!-- TreasuryType -->
	<form name="NewTreasuryType" type="single" target="createTreasuryType"
	focus-field-name="name" header-row-style="header-row"
	default-table-style="basic-table" default-map-name="treasuryTypeContext">
        <actions>
        	
        </actions>
       
        <field name="treasuryTypeId"><hidden/></field>
		
		
        <field name="name" title="Name"  widget-style="required" required-field="true"><text></text></field>
         <field name="limitAmount" title="Limit Amount"><text></text></field>
        
       
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
       </form>
        
      <form name="listTreasuryType" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasuryType" paginate-target="treasuryType"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="TreasuryType">
            </entity-condition>
            
           
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateTreasuryType"/>
		
		
        <field name="treasuryTypeId"><hidden/></field>
		
		
        <field name="name" title="Name"  widget-style="required" required-field="true"><text></text></field>
         <field name="limitAmount" title="Limit Amount"  widget-style="required" required-field="true"><text></text></field>
        
        

       
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteTreasuryType" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="treasuryTypeId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="buttontext"> <submit button-type="button"/></field>
    </form>
    
    <!-- Treasury -->
    	<form name="NewTreasury" type="single" target="createTreasury"
	focus-field-name="name" header-row-style="header-row"
	default-table-style="basic-table" default-map-name="treasuryContext">
        <actions>
        	<entity-condition entity-name="TreasuryType" list="treasuryTypeList">
			</entity-condition>
			
			<entity-condition entity-name="FinAccount" list="finAccountList">
			</entity-condition>
			
			<entity-condition entity-name="Person" list="employeesList">
			</entity-condition>
			
			<entity-condition entity-name="GlAccount" list="glAccountsList">
				<order-by field-name="accountName"/>
			</entity-condition>
        </actions>
       
        <field name="treasuryId"><hidden/></field>
		
		
        <field name="name" title="Name"  widget-style="required" required-field="true"><text></text></field>
        
         <field name="treasuryTypeId" title="Treasury Type" widget-style="required" required-field="true" >
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryTypeId" list-name="treasuryTypeList" description="${name}"/>
       		</drop-down>
        </field>
        
        <field name="finAccountId" title="Financial/Bank Account" >
       		<drop-down allow-empty="true">
       			<list-options key-name="finAccountId" list-name="finAccountList" description="${finAccountName}"/>
       		</drop-down>
        </field>
        
        <field name="employeeResponsible" title="Employee Responsible" >
       		<drop-down allow-empty="true">
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}"/>
       		</drop-down>
        </field>
        
         <field name="glAccountId" title="Account (Posting Account)" widget-style="required" required-field="true">
       		<drop-down allow-empty="true">
       			<list-options key-name="glAccountId" list-name="glAccountsList" description="${accountName} - ${accountCode}"/>
       		</drop-down>
        </field>
        
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
       </form>
        
      <form name="listTreasury" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasury" paginate-target="treasury"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="Treasury">
            </entity-condition>
        	<entity-condition entity-name="TreasuryType" list="treasuryTypeList">
			</entity-condition>
			
			<entity-condition entity-name="FinAccount" list="finAccountList">
			</entity-condition>
			
			<!-- entity-condition entity-name="Person" list="employeesList">
			</entity-condition -->
			
			 <!-- entity-condition entity-name="GlAccount" list="glAccountsList">
				<order-by field-name="accountName"/>
			</entity-condition -->
        </actions>
       
        <field name="treasuryId"><hidden/></field>
		
		
        <field name="name" title="Name"  widget-style="required" required-field="true"> <display></display> </field>
        
         <field name="treasuryTypeId" title="Treasury Type" widget-style="required" required-field="true" >
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="treasuryTypeId" list-name="treasuryTypeList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="TreasuryType" description="${name}" key-field-name="treasuryTypeId"></display-entity>
        </field>
        
                <field name="finAccountId" title="Financial/Bank Account" >
       
       		<display  default-value="${bsh:org.ofbiz.treasurymanagement.TreasuryUtility.getFinAccountName(finAccountId);}"  description="${finAccountName}"> </display>
       		<!-- display-entity entity-name="FinAccount" description="${finAccountName}" ></display-entity -->
        </field>
        
        <!-- field name="finAccountId" title="Financial/Bank Account" >
       		
       		<display-entity entity-name="FinAccount" description="${finAccountName}" key-field-name="finAccountId"></display-entity>
        </field -->
        <!-- drop-down allow-empty="true">
       			<list-options key-name="finAccountId" list-name="finAccountList" description="${finAccountName}"/>
       		</drop-down -->
        
        <field name="employeeResponsible" title="Employee Responsible" >
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}"/>
       		</drop-down -->
       		<display-entity entity-name="Person" key-field-name="partyId"  description="${firstName} ${lastName}"></display-entity>
        </field>
        
        <field name="glAccountId" title="Account (Posting Account)" widget-style="required" required-field="true">
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="glAccountId" list-name="glAccountsList" description="${accountName} - ${accountCode}"/>
       		</drop-down -->
       		<display-entity entity-name="GlAccount" key-field-name="glAccountId" description="${accountName} - ${accountCode}"></display-entity>
        </field>
       
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteTreasury" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="treasuryId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="buttontext"> <submit button-type="button"/></field -->
    </form>
    <!-- TreasuryTransaction -->
    
    <form name="NewTreasuryTransaction" type="single" target="createTreasuryTransaction"
	focus-field-name="name" header-row-style="header-row"
	default-table-style="basic-table" default-map-name="treasuryTransactionContext">
        <actions>
        	<entity-condition entity-name="TreasuryTransfer" list="treasuryTransferList">
			</entity-condition>
			<entity-condition entity-name="Treasury" list="treasuryList">
			</entity-condition>
			
        </actions>
       
        <field name="treasuryTransactionId"><hidden/></field>
		<field name="treasuryTransferId" title="Transfer" >
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryTransferId" list-name="treasuryTransferList" description="${transactionAmount}"/>
       		</drop-down>
        </field>
        
        <field name="treasuryId" title="Treasury(Teller/Vault)" >
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryId" list-name="treasuryList" description="${name}"/>
       		</drop-down>
        </field>
		
        <field name="transactionAmount" title="Transaction Amount"  widget-style="required" required-field="true"><text></text></field>
        <field name="transactionType" title="Transaction Type">
        	<drop-down allow-empty="false">
                <option key="DEPOSIT" description="DEPOSIT"/>
                <option key="WITHDRAWAL" description="WITHDRAWAL"/>
            </drop-down>
      	</field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
      </form>
        
      <form name="listTreasuryTransaction" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasuryTransaction" paginate-target="treasuryTransaction"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="TreasuryTransaction">
            </entity-condition>
        	<entity-condition entity-name="TreasuryTransfer" list="treasuryTransferList">
			</entity-condition>
			<entity-condition entity-name="Treasury" list="treasuryList">
			</entity-condition>
			
        </actions>
       
        <field name="treasuryTransactionId"><hidden/></field>
		<field name="treasuryTransferId" title="Transfer" >
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryTransferId" list-name="treasuryTransferList" description="${transactionAmount}"/>
       		</drop-down>
        </field>
        
        <field name="treasuryId" title="Treasury" >
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryId" list-name="treasuryList" description="${name}"/>
       		</drop-down>
        </field>
		
        <field name="transactionAmount" title="Transaction Amount"  widget-style="required" required-field="true"><text></text></field>
        <field name="transactionType" title="Transaction Type">
        	<drop-down allow-empty="false">
                <option key="DEPOSIT" description="DEPOSIT"/>
                <option key="WITHDRAWAL" description="WITHDRAWAL"/>
            </drop-down>
      	</field>
       <field name="increaseDecrease" title="Increase/Decrease"  widget-style="required" required-field="true"><text></text></field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteTreasuryTransaction" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="treasuryTransactionId"/>
            </hyperlink>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="buttontext"> <submit button-type="button"/></field>
    </form>
    <!-- TreasuryTransfer -->
    <form name="NewTreasuryTransfer" type="single" target="createTreasuryTransfer?treasuryId=${treasuryId}"
	focus-field-name="name" header-row-style="header-row"
	default-table-style="basic-table" default-map-name="TreasuryTransferContext">
        <actions>
        	<entity-one entity-name="Treasury" value-field="treasury">
				<field-map field-name="treasuryId" from-field="parameters.treasuryId"/>
			</entity-one>
			<set field="treasuryId" from-field="treasuryId"/>
        	<entity-condition entity-name="Treasury" list="treasuryFromList">
			</entity-condition>
			
			<!-- entity-condition entity-name="Treasury" list="treasuryToList">
			</entity-condition -->
			<entity-condition entity-name="TreasuryDestinations" list="treasuryToList">
				<!-- select-field field-name=""/ -->
				<condition-list combine="and">
					<condition-expr field-name="destinationTreasuryType" operator="equals" value="${treasury.treasuryTypeId}"/>
					<condition-expr field-name="treasuryId" operator="not-equals" value="${treasuryId}"/>
				</condition-list>
				
			</entity-condition>
			
			<entity-condition entity-name="Person" list="employeesList">
				<order-by field-name="firstName"/>
			</entity-condition>
			
			
        </actions>
       
        <field name="treasuryTransferId"><hidden/></field>
		
		<!-- field name="sourceTreasury" title="From"   widget-style="required" required-field="true">
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryId" list-name="treasuryFromList" description="${name}"/>
       		</drop-down>
        </field -->
        <field name="from" title="From" widget-style="required" required-field="true">
        	<text disabled="true" default-value="${treasury.name}"></text>
        </field>
        <field name="sourceTreasury" widget-style="required" required-field="true">
        	<hidden value="${treasuryId}"/>
        	<!-- display-entity entity-name="Treasury" description="${name}" key-field-name="treasuryId" ></display-entity -->
        </field>
        
        <field name="availableInSource" title="Availabe In Source" widget-style="required" required-field="true" >
       		<!-- drop-down allow-empty="true" >
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}" />
       		</drop-down -->
       		<text disabled="true" default-value="${bsh:org.ofbiz.treasurymanagement.TreasuryReconciliation.getNetAllocation(treasuryId);}"></text>
        </field>
        
        <field name="destinationTreasury" title="To"   widget-style="required" required-field="true">
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryId" list-name="treasuryToList"  description="${name}"/>
       		</drop-down>
        </field>
        
        <field name="destinationLimit" title="Destination Limit" >
       		<text disabled="true" default-value=""></text>
        </field>
        
        <field name="availableInDestination" title="Availabe In Destination" >
       		<!-- drop-down allow-empty="true" >
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}" />
       		</drop-down -->
       		<text disabled="true" default-value=""></text>
        </field>
        
         <field name="maxAllowedTransfer" title="Max Allowed Transfer">
       		<!-- drop-down allow-empty="true" >
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}" />
       		</drop-down -->
       		<text disabled="true" default-value=""></text>
        </field>
        
        
        
        
        <field name="employeeResponsible" title="Employee Responsible" >
       		<!-- drop-down allow-empty="true" >
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}" />
       		</drop-down -->
       		<hidden/>
        </field>
        
        <field name="employeeResponsibleVisible" title="Employee Responsible" >
       		<!-- drop-down allow-empty="true" >
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}" />
       		</drop-down -->
       		<text disabled="true"></text>
        </field>
        
        <field name="chequeNumber" title="Cheque No."><text></text></field>
        <field name="comments" title="Description." widget-style="required" required-field="true"><textarea></textarea></field>
        
        
        <field name="transactionAmount" title="Amount"  widget-style="required" required-field="true"> <text></text> </field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit" event="onclick" action="javascript: return amountValidation();"><submit button-type="button"/></field>
       </form>
        
      <form name="listTreasuryTransfer" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasuryTransfer" paginate-target="treasuryTransfer"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="TreasuryTransfer">
            	<order-by field-name="-createdStamp"/>
            </entity-condition>
            
            <entity-condition entity-name="Treasury" list="treasuryFromList">
			</entity-condition>
			
			<entity-condition entity-name="Treasury" list="treasuryToList">
			</entity-condition>
        </actions>
       
        <field name="treasuryTransferId"><hidden/></field>
		
		<field name="sourceTreasury" title="From" >
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="treasuryId" list-name="treasuryFromList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="Treasury" description="${name}" key-field-name="treasuryId"></display-entity>
        </field>
        
        <field name="destinationTreasury" title="To" >
       		<!-- drop-down allow-empty="true" text-size="20">
       			<list-options key-name="treasuryId" list-name="treasuryToList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="Treasury" description="${name}" key-field-name="treasuryId"></display-entity>
        </field>
         <field name="employeeResponsible" title="Employee Responsible" >
       		<!-- drop-down allow-empty="true">
       			<entity-options description="${firstName} ${lastName}" entity-name="Person" key-field-name="partyId"></entity-options>
       		</drop-down -->
       		
       		<display-entity entity-name="Person" description="${firstName} ${lastName}" key-field-name="partyId" ></display-entity>
        </field>
        <field name="chequeNumber" title="Cheque No.">
        	<!-- text size="15"></text -->
        	<display></display>
        </field>
        <field name="comments" title="Description"><display></display></field>
        <field name="transactionAmount" title="Amount"  widget-style="required" required-field="true"><display></display> </field>
        <field name="createdStamp" title="When"><display type="date-time"></display></field>
         <!-- field name="comments" title="Comments"  widget-style="required" required-field="true"><textarea cols="40"></textarea></field -->       
        <!-- field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteTreasuryTransfer" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="treasuryTransferId"/>
            </hyperlink>
        </field -->
        <!-- field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="buttontext"> <submit button-type="button"/></field-->
    </form>
    
    <!-- Reconcile Treasury -->
    <form name="listReconcileTreasury" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasuryTransfer" paginate-target="treasuryTransfer"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="TreasuryTransfer">
            	<order-by field-name="-treasuryTransferId"/>
            </entity-condition>
            
            <entity-condition entity-name="Treasury" list="treasuryFromList">
			</entity-condition>
			
			<entity-condition entity-name="Treasury" list="treasuryToList">
			</entity-condition>
        </actions>
       
        <field name="treasuryTransferId"><hidden/></field>
		
       
        <field name="destinationTreasury" title="To" >
       		<!-- drop-down allow-empty="true" text-size="20">
       			<list-options key-name="treasuryId" list-name="treasuryToList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="Treasury" key-field-name="treasuryId" description="${name}"></display-entity>
        </field>
        
        <field name="transactionAmount" title="Amount Allocated" ><display></display></field>
         <field name="comments" title="Comments"><display></display></field>   
          <field name="createdStamp" title="Time Tranferred"><display type="date-time"></display></field> 
           <field name="createdBy" title="Tranferred By"><display></display></field>       
        <!-- field name="processReconciliation" title="Process Reconciliation" widget-style="buttontext">
            <hyperlink target="processReconciliation" description="Process Reconciliation" also-hidden="false">
                <parameter param-name="processReconciliation"/>
            </hyperlink>
        </field -->
        
          <field name="showTransactions" title="Show Transactions" widget-style="buttontext">
            <hyperlink target="showTransactions" description="Show Transactions" also-hidden="false">
                <parameter param-name="treasuryTransferId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- listShowTreasuryTransfers -->
        <form name="listShowTreasuryTransfers" type="list" list-name="mergedSortedDetailsMapList" use-row-submit="true" separate-columns="true" target="updateTreasuryTransfer" paginate-target="treasuryTransfer"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <!-- entity-condition entity-name="TreasuryTransfer">
            	<condition-list combine="or">
            	<condition-list combine="and">
            		<condition-expr field-name="destinationTreasury" operator="equals" from-field="destinationTreasury"/>
            		<condition-expr field-name="transferDate" operator="equals" from-field="transferDate"/>
            	</condition-list>
            	
            	<condition-list combine="and">
            		<condition-expr field-name="sourceTreasury" operator="equals" from-field="destinationTreasury"/>
            		<condition-expr field-name="transferDate" operator="equals" from-field="transferDate"/>
            	</condition-list>
            	</condition-list>
            </entity-condition -->
            
            <entity-condition entity-name="Treasury" list="treasuryFromList">
			</entity-condition>
			
			<entity-condition entity-name="Treasury" list="treasuryToList">
			</entity-condition>
        </actions>
       
        <!-- field name="treasuryTransferId"><hidden/></field -->
		
       
        <field name="treasuryFrom" title="From" >
       		<!-- drop-down allow-empty="true" text-size="20">
       			<list-options key-name="treasuryId" list-name="treasuryToList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="Treasury" key-field-name="treasuryId" description="${name}"></display-entity>
        </field>
        
        <field name="treasuryTo" title="To" >
       		<!-- drop-down allow-empty="true" text-size="20">
       			<list-options key-name="treasuryId" list-name="treasuryToList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="Treasury" key-field-name="treasuryId" description="${name}"></display-entity>
        </field>
        
        <field name="amountIn" title="Amount In" ><display></display></field>
        <field name="amountOut" title="Amount Out" ><display></display></field>
        
         <field name="comment" title="Comments"><display></display></field>   
         <field name="timeTransferred" title="Time Tranferred"><display type="date-time"></display></field> 
         <field name="transferredBy" title="Tranferred By"><display></display></field>   
         
         <field name="runningBalance" title="Running Balance" ><display></display></field>    
        <!-- field name="processReconciliation" title="Process Reconciliation" widget-style="buttontext">
            <hyperlink target="processReconciliation" description="Process Reconciliation" also-hidden="false">
                <parameter param-name="processReconciliation"/>
            </hyperlink>
        </field -->
        
          <!-- field name="showTransactions" title="Show Transactions" widget-style="buttontext">
            <hyperlink target="showTransactions" description="Show Transactions" also-hidden="false">
                <parameter param-name="treasuryTransferId"/>
            </hyperlink>
        </field -->
    </form>
    
    <!-- reconcileTreasuryOutgoing -->
     <form name="listReconcileTreasuryOutgoing" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasuryTransfer" paginate-target="treasuryTransferOutgoing"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="TreasuryTransfersOutgoingTotal">
            	<order-by field-name="-transferDate"/>
            </entity-condition>
            
            <entity-condition entity-name="Treasury" list="treasuryFromList">
			</entity-condition>
			
			<entity-condition entity-name="Treasury" list="treasuryToList">
			</entity-condition>
        </actions>
       
  
  
        <field name="name" title="Treasury" ><display></display></field>
        <field name="transactionAmount" title="Amount Allocated" ><display></display></field>
        <field name="transferDate" title="Transfer Date" ><display type="date"></display></field>
        <!-- field name="processReconciliation" title="Process Reconciliation" widget-style="buttontext">
            <hyperlink target="processReconciliation" description="Process Reconciliation" also-hidden="false">
                <parameter param-name="processReconciliation"/>
            </hyperlink>
        </field -->
        
          <field name="showTransactions" title="Show Transactions" widget-style="buttontext">
            <hyperlink target="showTransactions" description="Show Transactions" also-hidden="false">
                <!-- parameter param-name="treasuryTransferId"/ -->
            </hyperlink>
        </field>
    </form>
    
    <!-- form name="listReconcileTreasuryIncoming" type="list" list-name="transfers"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="name" title="Treasury" ><display></display></field>
        <field name="transferDate" title="Transfer Date" ><display type="date"></display></field>
        
        <field name="amountIn" title="Amount In" ><display></display></field>
    </form -->
    
    <!-- listReconcileTreasuryIncoming -->
         <form name="listReconcileTreasuryIncoming" type="list" list-name="transfers"   default-map-name="transferTotal" use-row-submit="true" separate-columns="true" target="updateTreasuryTransfer" paginate-target="treasuryTransferIncoming"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <!-- entity-condition entity-name="TreasuryTransfersIncomingTotal">
            	<order-by field-name="-transferDate"/>
            </entity-condition -->
            
            <!-- entity-condition entity-name="Treasury" list="treasuryFromList">
			</entity-condition>
			
			<entity-condition entity-name="Treasury" list="treasuryToList">
			</entity-condition -->
			
        </actions>
       
  
  		<!-- field name="destinationTreasury"><hidden/></field -->
        <field name="name" title="Treasury" ><display></display></field>
        <field name="transferDate" title="Transfer Date" ><display type="date"></display></field>
        <field name="openingBalance" title="Opening Balance" ><display></display></field>
        <field name="amountIn" title="Transfers In" ><display></display></field>
        <field name="amountOut" title="Transfers Out" ><display></display></field>
        
        <field name="transactionsIn" title="Transactions In" ><display></display></field>
        <field name="transactionsOut" title="Transactions Out" ><display></display></field>
        
        <field name="amountBalance" title="Balance" ><display></display></field>
        <!-- field name="processReconciliation" title="Process Reconciliation" widget-style="buttontext">
            <hyperlink target="processReconciliation" description="Process Reconciliation" also-hidden="false">
                <parameter param-name="processReconciliation"/>
            </hyperlink>
        </field -->
        
         <field name="showTransfers" title="Transfers" widget-style="buttontext">
            <hyperlink target="showTransfers" description="Tranfers" also-hidden="false">
                
                <parameter param-name="destinationTreasury"/>
                <parameter param-name="transferDate"/>
            </hyperlink>
        </field>
          <field name="showTransactions" title="Transactions" widget-style="buttontext">
            <hyperlink target="showTransactions" description="Transactions" also-hidden="false">
              
                <parameter param-name="destinationTreasury"/>
                <parameter param-name="transferDate"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- teller transactions -->
    <form name="listTellerTransactions" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateCashWithdrawal" paginate-target="showTransactions"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	    <set field="treasuryTransferId" from-field="parameters.treasuryTransferId"/>
        	    <set field="treasuryId" from-field="parameters.destinationTreasury"/>
        	    <set field="transferDate" from-field="parameters.transferDate" type="Date"/>
        	    <set field="endOfDay" value="${bsh:org.ofbiz.treasurymanagement.TreasuryUtility.getEndOfDay(transferDate);}"/>
                <!-- set field="creatorId" global="true" value="${bsh:org.ofbiz.treasurymanagement.TreasuryReconciliation.getUserLogin(treasuryTransferId);}" type="String"/>
     			<set field="treasuryId" value="${bsh:org.ofbiz.treasurymanagement.TreasuryUtility.getTellerId(userLogin);}" / -->
            <entity-condition entity-name="AccountTransaction" >
            	
            	<condition-list combine="or">
            		<condition-list combine="and">
            			<condition-expr field-name="isActive" value="Y"/>
            			<condition-expr field-name="treasuryId" operator="equals" value="${treasuryId}"/>
            			<condition-expr field-name="createdStamp" operator="greater-equals" value="${transferDate}"/>
            			<condition-expr field-name="createdStamp" operator="less" value="${endOfDay}"/>
            			<condition-expr field-name="transactionType" operator="equals" value="CASHDEPOSIT"/>
            		</condition-list>
 
             		<condition-list combine="and">
            			<condition-expr field-name="isActive" value="Y"/>
            			<condition-expr field-name="treasuryId" operator="equals" value="${treasuryId}"/>
            			<condition-expr field-name="createdStamp" operator="greater-equals" value="${transferDate}"/>
            			<condition-expr field-name="createdStamp" operator="less" value="${endOfDay}"/>
            			<condition-expr field-name="transactionType" operator="equals" value="CASHWITHDRAWAL"/>
            		</condition-list>
            	
            	</condition-list>
            	<order-by field-name="-accountTransactionId"></order-by>
            </entity-condition>
            
            <entity-condition entity-name="Member" list="memberList">
        		<order-by field-name="firstName"/>
        	</entity-condition>
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateCashWithdrawal"/>
		

        <field name="memberAccountId" title="Account">
        	<display-entity entity-name="MemberAccount" key-field-name="memberAccountId" description="${accountNo}" ></display-entity>
        </field>
        <field name="transactionType" title="Transaction Type"><display also-hidden="false"></display></field>
        <!-- field name="slipNumber" title="SLIP Number"><display also-hidden="false"></display></field -->
      
      	<field name="acctgTransId" title="Ledger Number/ID">
      		<display></display>
      	</field>
        <field name="transactionAmount" title="Amount"><display also-hidden="false" description="${transactionAmount}" type="currency" currency="KES"></display></field>
        
        <field name="createdBy" title="Served By"><display also-hidden="false"></display></field>
        <field name="createdStamp" title="Transaction Date"><display also-hidden="false" type="date-time"></display></field>
        <field name="clearDate" title="Clear By"><display also-hidden="false" type="date-time"></display></field>

		        
        
        
        <field name="payee" title="Payee"><display also-hidden="false"></display></field>
		<field name="bankDetailsId" title="Bank">
      		<!-- drop-down allow-empty="false">
      			<list-options key-name="bankDetailsId" list-name="bankDetailsList" description="${bankName}"/>
      		</drop-down -->
      		<display-entity entity-name="BankDetails" key-field-name="bankDetailsId" description="${bankName}"></display-entity>
      	</field>
      	
      	<field name="bankBranchId" title="Branch">
      		<!-- drop-down allow-empty="false">
      			<list-options key-name="bankBranchId" list-name="bankBranchList" description="${branchName}"/>
      		</drop-down -->
      		<display-entity entity-name="BankBranch" key-field-name="bankBranchId" description="${branchName}"></display-entity>
      		
      	</field>      	
        <field name="drawer" title="Drawer" ><display also-hidden="false"/></field>
        <field name="chequeNo" title="Cheque No" ><display also-hidden="false"/></field>
        
    </form>
    
    <!-- sourceOfTransfer -->
    <form name="sourceOfTransfer" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTransferRule" paginate-target="transferrules"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="TreasuryType">
            </entity-condition>
            
           
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateTransferRule"/>
		
        <field name="treasuryTypeId"><hidden/></field>
		
		
        <field name="name" title="Name"  widget-style="required" required-field="true"><display></display></field>
        <field name="Add Destination" title="Add Destination" widget-style="buttontext">
            <hyperlink target="transferdestinations" description="Add Possible Destinations" also-hidden="false">
                <parameter param-name="treasuryTypeId"/>
            </hyperlink>
        </field>
        <!-- field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="buttontext"> <submit button-type="button"/></field -->
    </form>
    
    <!-- newTransferDestination -->
    <form name="NewTransferDestination" type="single" target="createTransferRule"
	focus-field-name="name" header-row-style="header-row"
	default-table-style="basic-table" default-map-name="transferRuleContext">
        <actions>
        	<entity-condition entity-name="TreasuryType" list="treasuryTypeToList">
			</entity-condition>
			
			<set field="sourceTreasuryType" from-field="parameters.treasuryTypeId"/>
        </actions>
       
        <field name="transferRuleId"><hidden/></field>
		
		<field name="sourceTreasuryType" ><hidden/></field>
        <field name="destinationTreasuryType" title="To" >
       		<drop-down allow-empty="true">
       			<list-options key-name="treasuryTypeId" list-name="treasuryTypeToList" description="${name}"/>
       		</drop-down>
        </field>
        
       
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
       </form>
    
    <!-- transferdestinations -->
      <form name="transferdestinations" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTransferRule" paginate-target="transferrules"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <entity-condition entity-name="TransferRule">
            	<condition-expr field-name="sourceTreasuryType" operator="equals" from-field="parameters.treasuryTypeId"/>
            </entity-condition>
            
           
        </actions>
        <auto-fields-service default-field-type="hidden" service-name="updateTransferRule"/>
		
        <field name="transferRuleId"><hidden/></field>
		<field name="destinationTreasuryType" title="To" >
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="treasuryTypeId" list-name="treasuryTypeToList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="TreasuryType" key-field-name="treasuryTypeId" description="${name}"></display-entity>
        </field>
		
        <!-- field name="Add Destination" title="Add Destination" widget-style="buttontext">
            <hyperlink target="transferdestinations" description="Add Possible Destinations" also-hidden="false">
                <parameter param-name="treasuryTypeId"/>
            </hyperlink>
        </field -->
        <!-- field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="buttontext"> <submit button-type="button"/></field -->
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="buttontext">
            <hyperlink target="deleteTransferRule" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="transferRuleId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- List Transfer Sources -->
    <form name="listTransferSources" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateTreasury" paginate-target="treasury"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="Treasury">
            </entity-condition>
        	<entity-condition entity-name="TreasuryType" list="treasuryTypeList">
			</entity-condition>
			
			<entity-condition entity-name="FinAccount" list="finAccountList">
			</entity-condition>
			
			<entity-condition entity-name="Person" list="employeesList">
			</entity-condition>
			
			 <entity-condition entity-name="GlAccount" list="glAccountsList">
				<order-by field-name="accountName"/>
			</entity-condition>
        </actions>
       
        <field name="treasuryId"><hidden/></field>
		
		
        <field name="name" title="Name"  widget-style="required" required-field="true"><display></display> </field>
        
         <field name="treasuryTypeId" title="Treasury Type" widget-style="required" required-field="true" >
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="treasuryTypeId" list-name="treasuryTypeList" description="${name}"/>
       		</drop-down -->
       		<display-entity entity-name="TreasuryType" description="${name}"></display-entity>
        </field>
        
        <field name="finAccountId" title="Financial/Bank Account" >
       
       		<display  default-value="${bsh:org.ofbiz.treasurymanagement.TreasuryUtility.getFinAccountName(finAccountId);}"  description="${finAccountName}"> </display>
       		<!-- display-entity entity-name="FinAccount" description="${finAccountName}" ></display-entity -->
        </field>
        <!-- drop-down allow-empty="true">
       			<list-options key-name="finAccountId" list-name="finAccountList" description="${finAccountName}"/>
       		</drop-down -->
        
        <field name="employeeResponsible" title="Employee Responsible" >
       		<!-- drop-down allow-empty="true">
       			<list-options key-name="partyId" list-name="employeesList" description="${firstName} ${lastName}"/>
       		</drop-down -->
       		<display-entity entity-name="Person" key-field-name="partyId" description="${firstName} ${lastName}"></display-entity>
        </field>
        
        <field name="balanceAmount" title="Balance Amount" widget-style="buttontext">
            <display default-value="${bsh:org.ofbiz.treasurymanagement.TreasuryReconciliation.getNetAllocation(treasuryId);}"></display>
        </field>
        
        <field name="openTransfer" title="Transfer" widget-style="buttontext">
            <hyperlink target="treasuryTransfer" description="Transfer " also-hidden="false">
                <parameter param-name="treasuryId"/>
            </hyperlink>
        </field>
    </form>
    
    <!-- NewDenomination -->
    <form name="NewDenomination" type="single" target="createDenomination"
	focus-field-name="denominationId" header-row-style="header-row"
	default-table-style="basic-table" default-map-name="denominationContext">
        
       
        <field name="denominationId" widget-style="required" required-field="true"><text></text></field>
		
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="smallSubmit"><submit button-type="button"/></field>
       </form>
    <!-- listDenomination -->
    <form name="listDenomination" type="list" list-name="listIt" use-row-submit="true" separate-columns="true" target="updateDenomination" paginate-target="currencyDenominations"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        	<entity-condition entity-name="Denomination"></entity-condition>
        </actions>
        <field name="denominationId"><display></display></field>
	 </form>
    
</forms>