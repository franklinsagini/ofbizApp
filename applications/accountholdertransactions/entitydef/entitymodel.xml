<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
    <!-- ========================================================= -->
    <!-- ======================== Defaults ======================= -->
    <!-- ========================================================= -->
    <title>Entity of an Open For Business Project Component</title>
    <description>None</description>
    <version>1.0</version>
    <default-resource-name>AccountHolderTransactionsEntityLabels</default-resource-name>

    <!-- ========================================================= -->
    <!-- ======================== Data Model ===================== -->
    <!-- The modules in this file are as follows:                  -->
    <!--  - org.ofbiz.example.example -->
    <!--  - org.ofbiz.example.feature -->
    <!-- ========================================================= -->

    <!-- ========================================================= -->
    <!-- org.ofbiz.accountholdertransactions 
    	Entities
    	
    	CashWithdrawal
    	CashDeposit
    	ChequeWithdrawal
    	ChequeDeposit
    	LoanRepayment
    	StandingOrder
    -->
    	
    <!-- ========================================================= -->
    <entity entity-name="AccountTransaction" sequence-bank-size="1" package-name="org.ofbiz.accountholdertransactions" title="AccountTransaction Entity">
        <field name="accountTransactionId" type="id"   enable-audit-log="true"><description>primary sequenced ID</description></field>
		<field name="accountTransactionParentId" type="id"   enable-audit-log="true"></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="branchId" type="name"   enable-audit-log="true"></field>
        <field name="treasuryId" type="id"   enable-audit-log="true"></field>
        <field name="acctgTransId" type="id"   enable-audit-log="true"></field>
        <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="slipNumber" type="name"   enable-audit-log="true"></field>
        
        <field name="bankSlipNumber" type="name"   enable-audit-log="true"></field>
         <field name="bankAccountNumber" type="name"   enable-audit-log="true"></field>
         <field name="finAccountId" type="id-ne"    enable-audit-log="true"></field>
        
        <field name="transactionAmount" type="fixed-point"   enable-audit-log="true"></field>
        <field name="availableAmount" type="fixed-point"   enable-audit-log="true"></field>
        <field name="bookBalanceAmount" type="fixed-point"   enable-audit-log="true"></field>
        <field name="transactionType" type="name"   enable-audit-log="true"></field>
        <field name="paymentMethodTypeId" type="id"   enable-audit-log="true"></field>
        
        <!-- Cheque Withdrawal -->
        <field name="chequeNo" type="name"   enable-audit-log="true"></field>
        <field name="payee" type="name"   enable-audit-log="true"></field>
        
        <!-- Cheque Deposit -->
        <field name="internalexternal" type="name"   enable-audit-log="true"></field> <!-- INTERNAL or EXTERNAL -->
         <field name="chequeTypeId" type="id-int"   enable-audit-log="true"></field> <!-- Bankers or Ordinary Cheque -->
        <field name="bankDetailsId" type="id-int"   enable-audit-log="true"></field>
         <field name="bankBranchId" type="id-int"   enable-audit-log="true"></field>
         <field name="drawer" type="name"   enable-audit-log="true"></field>
         <field name="receiptNo" type="name"   enable-audit-log="true"></field>
         
         <field name="clearDuration" type="numeric"   enable-audit-log="true"></field>
         <field name="clearDate" type="date-time"   enable-audit-log="true"></field>
         
         <field name="manuallyCleared" type="indicator"   enable-audit-log="true"></field>
         <field name="originalClearDuration" type="numeric"   enable-audit-log="true"></field>
         <field name="clearedBy" type="id"   enable-audit-log="true"></field>
         <field name="originalClearDate" type="date-time"   enable-audit-log="true"></field>
         
         <field name="productChargeId" type="id-int"   enable-audit-log="true"></field>
         <field name="increaseDecrease" type="indicator"   enable-audit-log="true"></field>
         <field name="isPosted" type="name"   enable-audit-log="true"></field>
         <field name="datePosted" type="date-time"   enable-audit-log="true"></field>
         
         <field name="memberAccountVoucherId" type="id-vlong-int" enable-audit-log="true"></field>
         <field name="generalMemberVoucherId" type="id-vlong-int" enable-audit-log="true"></field>
         
         <field name="loanApplicationId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="accountProductId" type="id-vlong-int"   enable-audit-log="true"></field>
         
        <prim-key field="accountTransactionId"/>
        
        <relation type="one" fk-name="TreasuryTransactionDest_Treasury" rel-entity-name="Treasury">
            <key-map  field-name="treasuryId"/>
        </relation>
        
        <relation type="one" fk-name="AccountTransaction_Charge" rel-entity-name="ProductCharge">
        	<key-map field-name="productChargeId"/>
      	</relation>
      	
      	<relation type="one" fk-name="AccountTransaction_Parent" rel-entity-name="AccountTransactionParent">
        	<key-map field-name="accountTransactionParentId"/>
      	</relation>
        
        <relation type="one" fk-name="ACCOUNTTRANSACTION_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
        
        <relation fk-name="ACCOUNTTRANSACTION_MEMBER_MEMBERACC" rel-entity-name="MemberAccount" type="one">
        	<key-map field-name="memberAccountId"/>
        </relation>
        
        <relation type="one" fk-name="ACCOUNTTRANSACTION_PMT" rel-entity-name="PaymentMethodType">
        <key-map field-name="paymentMethodTypeId"/>
      </relation>
        
        <relation type="one" fk-name="CHEQUEDEPOSIT_CHEQUETYPE" rel-entity-name="ChequeType">
            <key-map field-name="chequeTypeId"/>
        </relation>
        
        <relation type="one" fk-name="CHEQUEDEPOSIT_BANKDETAILS" rel-entity-name="BankDetails">
            <key-map field-name="bankDetailsId"/>
        </relation>
        <relation type="one" fk-name="CHEQUEDEPOSIT_BANKBRANCH" rel-entity-name="BankBranch">
            <key-map field-name="bankBranchId"/>
        </relation>
    </entity>
    
    <entity entity-name="AccountTransactionParent" sequence-bank-size="1" package-name="org.ofbiz.accountholdertransactions" title="AccountTransaction Entity">
        <field name="accountTransactionParentId" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="branchId" type="name"   enable-audit-log="true"></field>
        <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
        
        <field name="approved" type="name"   enable-audit-log="true"></field>
        <field name="approvedBy" type="name"   enable-audit-log="true"></field>
        <field name="dateApproved" type="date-time"   enable-audit-log="true"></field>
        
        <field name="rejected" type="name"   enable-audit-log="true"></field>
        <field name="rejectedBy" type="name"   enable-audit-log="true"></field>
        <field name="dateRejected" type="date-time"   enable-audit-log="true"></field>
        
        <field name="posted" type="name"   enable-audit-log="true"></field>
        <field name="datePosted" type="date-time"   enable-audit-log="true"></field>
        
        <field name="comments" type="name"   enable-audit-log="true"></field>
        
        <prim-key field="accountTransactionParentId"/>
        <relation type="one" fk-name="ACCOUNTTRANSACTIONPARENT_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
     </entity>
     
     
    <entity entity-name="ATMTransactions" table-name="t_ATMTransactions" sequence-bank-size="1" package-name="org.ofbiz.accountholdertransactions" title="ATMTransactions Entity">
        <field name="AccountID" col-name="AccountID" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
		<field name="SystemTrace" col-name="SystemTrace" type="id" enable-audit-log="true"></field>
		
		<field name="transactionId" type="id"   enable-audit-log="true"></field>
        <field name="Amount" col-name="Amount" type="currency-amount"   enable-audit-log="true"></field>
        <field name="TransactionDate" col-name="TransactionDate" type="date-time"   enable-audit-log="true"></field>
        
        <prim-key field="transactionId"/>
     </entity>
     
     
     <entity entity-name="ATMTransactionsLog" table-name="ATMTransactionsLog" sequence-bank-size="1" package-name="org.ofbiz.accountholdertransactions" title="ATMTransactions Entity">
        <field name="atmransactionsLogId" col-name="AccountID" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
		<field name="cardNumber"  type="id"   enable-audit-log="true"></field>
		<field name="transactionType"  type="id"   enable-audit-log="true"></field>
        
        <prim-key field="atmransactionsLogId"/>
     </entity>
    
    <entity entity-name="CashWithdrawal" package-name="org.ofbiz.accountholdertransactions" title="CashWithdrawal Entity">
        <field name="cashWithdrawalId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="active" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="memberAccountId" type="id-int"   enable-audit-log="true"></field>
        <field name="slipNumber" type="name"   enable-audit-log="true"></field>
        <field name="cashAmount" type="currency-amount"   enable-audit-log="true"></field>
        <field name="availableAmount" type="currency-amount"   enable-audit-log="true"></field>
       
        <prim-key field="cashWithdrawalId"/>
        
        <relation type="one" fk-name="CASHWITHDRAWAL_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
        
        <relation fk-name="CASHWIDTHDRAWAL_MEMBERACC" rel-entity-name="MemberAccount" type="one">
        	<key-map field-name="memberAccountId"/>
        </relation>
    </entity>
    
    <entity entity-name="StationAccountTransaction" package-name="org.ofbiz.accountholdertransactions" sequence-bank-size="1" title="StationAccountTransaction Entity">
        <field name="stationAccountTransactionId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="branchId" type="id-int"   enable-audit-log="true"></field>
         <field name="stationId" type="id-int"   enable-audit-log="true"></field>
         <field name="employerCode" type="id"   enable-audit-log="true"></field>
        <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="slipNumber" type="name"   enable-audit-log="true"></field>
        <field name="monthyear" type="name"   enable-audit-log="true"></field>
        <field name="chequeNumber" type="name"   enable-audit-log="true"></field>
        <field name="transactionAmount" type="fixed-point"   enable-audit-log="true"></field>
        
        <field name="acctgTransId" type="id"   enable-audit-log="true"></field>
       
        <prim-key field="stationAccountTransactionId"/>
        
        <relation type="one" fk-name="STATIONACCOUNTTRANSACTION_PARTYGROUP" rel-entity-name="PartyGroup">
            <key-map field-name="branchId" rel-field-name="partyId"/>
        </relation>
 		<relation type="one" fk-name="STATIONACCOUNTTRANSACTION_STATION" rel-entity-name="Station">
            <key-map field-name="stationId"/>
        </relation>
    </entity>

    <entity entity-name="CashDeposit" package-name="org.ofbiz.accountholdertransactions" title="CashDeposit Entity">
        <field name="cashDepositId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="active" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="slipNumber" type="name"   enable-audit-log="true"></field>
        <field name="cashAmount" type="currency-amount"   enable-audit-log="true"></field>
        
        
        <field name="paymentMethodTypeId" type="id"   enable-audit-log="true"></field>
        <field name="availableAmount" type="currency-amount"   enable-audit-log="true"></field>
       
        <prim-key field="cashDepositId"/>
        
        <relation type="one" fk-name="CASHDEPOSIT_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
        
        <relation type="one" fk-name="CASHDEPOSIT_PMT" rel-entity-name="PaymentMethodType">
        <key-map field-name="paymentMethodTypeId"/>
      </relation>
      <relation fk-name="CASHDEPOSIT_MEMBERACC" rel-entity-name="MemberAccount" type="one">
      	<key-map field-name="memberAccountId"/>
      </relation>
    </entity>
    
     <entity entity-name="ChequeType" package-name="org.ofbiz.accountholdertransactions" title="ChequeType Entity">
        <field name="chequeTypeId" type="id-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="name" type="name"   enable-audit-log="true"></field>
        
        <prim-key field="chequeTypeId"/>
    </entity>
    
    <entity entity-name="ChequeWithdrawal" package-name="org.ofbiz.accountholdertransactions" title="ChequeWithdrawal Entity">
        <field name="chequeWithdrawalId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="active" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
         <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="chequeNo" type="name"   enable-audit-log="true"></field>
        <field name="payee" type="name"   enable-audit-log="true"></field>
        <field name="chequeAmount" type="currency-amount"   enable-audit-log="true"></field>
        <prim-key field="chequeWithdrawalId"/>
        <relation type="one" fk-name="CHEQUEWITHDRAWAL_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
        <relation fk-name="CHEQUEWITHDRAWAL_MEMBERACC" rel-entity-name="MemberAccount" type="one">
        	<key-map field-name="memberAccountId"/>
        </relation>
    </entity>
    
    
    
    
     <entity entity-name="ChequeDeposit" package-name="org.ofbiz.accountholdertransactions" title="ChequeDeposit Entity">
        <field name="chequeDepositId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="active" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
         <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="internalexternal" type="name"   enable-audit-log="true"></field> <!-- INTERNAL or EXTERNAL -->
         
         
         <field name="chequeTypeId" type="id-int"   enable-audit-log="true"></field> <!-- Bankers or Ordinary Cheque -->
        
        <field name="bankDetailsId" type="id-int"   enable-audit-log="true"></field>
         <field name="bankBranchId" type="id-int"   enable-audit-log="true"></field>
         <field name="drawer" type="name"   enable-audit-log="true"></field>
         <field name="chequeNo" type="name"   enable-audit-log="true"></field>
         <field name="receiptNo" type="name"   enable-audit-log="true"></field>
        <field name="chequeAmount" type="currency-amount"   enable-audit-log="true"></field>
        
        
        
        <prim-key field="chequeDepositId"/>
        <relation type="one" fk-name="CHEQUEDEPOSIT_FINACCT" rel-entity-name="FinAccount">
            <key-map field-name="saccoAccountId" rel-field-name="finAccountId"/>
        </relation>
        
        <relation type="one" fk-name="CHEQUEDEPOSIT_CHEQUETYPE" rel-entity-name="ChequeType">
            <key-map field-name="chequeTypeId"/>
        </relation>
        
        <relation type="one" fk-name="CHEQUEDEPOSIT_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
        
        <relation type="one" fk-name="CHEQUEDEPOSIT_BANKDETAILS" rel-entity-name="BankDetails">
            <key-map field-name="bankDetailsId"/>
        </relation>
        <relation type="one" fk-name="CHEQUEDEPOSIT_BANKBRANCH" rel-entity-name="BankBranch">
            <key-map field-name="bankBranchId"/>
        </relation>
        
        <relation fk-name="CHEQUEDEPOSIT_MEMBERACC" rel-entity-name="MemberAccount" type="one">
        	<key-map field-name="memberAccountId"/>
        </relation>
    </entity>
    
     <entity entity-name="LoanRepayment" package-name="org.ofbiz.accountholdertransactions" title="LoanRepayment Entity">
        <field name="loanRepaymentId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
         <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="branchId" type="id-int"   enable-audit-log="true"></field>
         
         
         <field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="accountNo" type="name"   enable-audit-log="true"></field>
         <field name="accountName" type="name"   enable-audit-log="true"></field>
         <field name="accountBalance" type="currency-amount"   enable-audit-log="true"></field>
         
         <field name="loanApplicationId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="loanNo" type="name"   enable-audit-log="true"></field>
         <field name="loanTypeId" type="id-int"   enable-audit-log="true"></field> <!-- Sacco Product Id type of LOAN -->
         
         <field name="loanAmt" type="currency-amount"   enable-audit-log="true"></field>
         <field name="loanBalanceAmt" type="currency-amount"   enable-audit-log="true"></field>
         <field name="interestBalanceAmt" type="currency-amount"   enable-audit-log="true"></field>
         <field name="loanRepaymentAmt" type="currency-amount"   enable-audit-log="true"></field>
         <field name="interestRepaymentAmt" type="currency-amount"   enable-audit-log="true"></field>
         
         <field name="repaymentType" type="name"   enable-audit-log="true"></field> <!-- INTEREST, INSURANCE, PRINCIPAL, EXCESS (to account) -->
         <field name="repaymentMode" type="name"   enable-audit-log="true"></field> <!-- CASH/CHEQUE/REMITTANCE -->
         
         <field name="totalLoanDue" type="currency-amount"   enable-audit-log="true"></field>
         <field name="totalInterestDue" type="currency-amount"   enable-audit-log="true"></field>
         <field name="totalInsuranceDue" type="currency-amount"   enable-audit-log="true"></field>
         <field name="totalPrincipalDue" type="currency-amount"   enable-audit-log="true"></field>
         
         <field name="interestAmount" type="currency-amount"   enable-audit-log="true"></field>
         <field name="insuranceAmount" type="currency-amount"   enable-audit-log="true"></field>
         <field name="principalAmount" type="currency-amount"   enable-audit-log="true"></field>
         <field name="excessAmount" type="currency-amount"   enable-audit-log="true"></field>
         
         <field name="acctgTransId" type="id"   enable-audit-log="true"></field>
         
         <field name="transactionAmount" type="currency-amount"   enable-audit-log="true"></field>
         <field name="month" type="id"   enable-audit-log="true"></field>
        <prim-key field="loanRepaymentId"/>
        
        <relation type="one" fk-name="LOANREPAYMENT_MEMBER" rel-entity-name="Member">
            <key-map field-name="partyId"/>
        </relation>
        
        <relation type="one" fk-name="LOANREPAYMENT_MEMBERACCOUNT" rel-entity-name="MemberAccount">
            <key-map field-name="memberAccountId"/>
        </relation>
        
        <relation type="one" fk-name="LOANREPAYMENT_LOANAPP" rel-entity-name="LoanApplication">
            <key-map field-name="loanApplicationId"/>
        </relation>
        
         <relation type="one" fk-name="LOANREPAYMENT_LOANPRODUCT" rel-entity-name="LoanProduct">
            <key-map field-name="loanTypeId" rel-field-name="loanProductId"/>
        </relation>
    </entity>
    
     <entity entity-name="StandingOrder" package-name="org.ofbiz.accountholdertransactions" title="StandingOrder Entity">
        <field name="standingOrderId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="partyId" type="id-vlong-int"   enable-audit-log="true"></field>
        <field name="branchId" type="id-int"   enable-audit-log="true"></field>
        
        <field name="memberNo" type="name"   enable-audit-log="true"></field>
        <field name="payrollNo" type="name"   enable-audit-log="true"></field>
     
     	<field name="standingOrderAmount" type="currency-amount"   enable-audit-log="true"></field>
     	<field name="orderStartDate" type="date-time"   enable-audit-log="true"></field>
     	
     	<field name="internalexternal" type="name"   enable-audit-log="true"></field> <!-- INTERNAL EXTERNAL -->
     	<field name="transactionTYpe" type="name"   enable-audit-log="true"></field> <!-- LOAN OTHERS -->
     	
     	<!-- LOAN -->
     	
         <field name="loanTypeId" type="id-int"   enable-audit-log="true"></field> <!-- Sacco Product Id type of LOAN -->
         <field name="loanApplicationId" type="id-vlong-int"   enable-audit-log="true"></field>
         <field name="loanBalanceAmt" type="currency-amount"   enable-audit-log="true"></field>
     	
     	<!-- Inhouse Beneficiary -->
     	<field name="beneficiaryId" type="id-vlong-int"   enable-audit-log="true"></field> <!-- Member -->
     	<field name="memberAccountId" type="id-vlong-int"   enable-audit-log="true"></field>
     	<field name="accountNo" type="name"   enable-audit-log="true"></field>
     	<field name="accountName" type="name"   enable-audit-log="true"></field>
     	
     	<!-- External Beneficiary -->
     	<field name="bankDetailsId" type="id-int"   enable-audit-log="true"></field>
         <field name="bankBranchId" type="id-int"   enable-audit-log="true"></field>
     	
     	
     	<prim-key field="standingOrderId"/>  
     	
     	<relation type="one" fk-name="STANDINGORDER_BANKDETAILS" rel-entity-name="BankDetails">
            <key-map field-name="bankDetailsId"/>
        </relation>
        <relation type="one" fk-name="STANDINGORDER_BANKBRANCH" rel-entity-name="BankBranch">
            <key-map field-name="bankBranchId"/>
        </relation>  
     </entity>
     
     <entity entity-name="ChequeSetup" package-name="org.ofbiz.accountholdertransactions" title="ChequeSetup Entity">
        <field name="chequeSetupId" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="durationToClear" type="numeric"   enable-audit-log="true"></field>
        <field name="comments" type="name"   enable-audit-log="true"></field>
        
       
        <prim-key field="chequeSetupId"/>
        
    </entity>
    
    <entity entity-name="AccountHolderTransactionSetup" package-name="org.ofbiz.accountholdertransactions" title="AccountHolderTransactionSetup Entity">
        <field name="accountHolderTransactionSetupId" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="cashAccountId" type="id"   enable-audit-log="true"></field>
        <field name="memberDepositAccId" type="id"   enable-audit-log="true"></field>
        
        <field name="comments" type="description"   enable-audit-log="true"></field>
        
       
        <prim-key field="accountHolderTransactionSetupId"/>
        <relation type="one" fk-name="AccountHolderTransactionSetup_CASHACC" rel-entity-name="GlAccount">
            <key-map field-name="cashAccountId" rel-field-name="glAccountId"/>
        </relation>
        <relation type="one" fk-name="AccountHolderTransactionSetup_DEPOSITACC" rel-entity-name="GlAccount">
            <key-map field-name="memberDepositAccId" rel-field-name="glAccountId"/>
        </relation>  
    </entity>
    
    <!-- Expected Payment -->
    <entity entity-name="ExpectedPayment" package-name="org.ofbiz.accountholdertransactions" title="ExpectedPayment Entity">
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
		<field name="createdBy" type="name"   enable-audit-log="true"></field>
		<field name="branchId" type="name"   enable-audit-log="true"></field>
        <field name="month" type="name"   enable-audit-log="true"></field>
        <field name="loanNo" type="name"   enable-audit-log="true"></field>
        <field name="employerNo" type="name"   enable-audit-log="true"></field>
        <field name="remitanceCode" type="name"   enable-audit-log="true"></field>
        <field name="amount" type="fixed-point"   enable-audit-log="true"></field>
        <field name="remitanceDescription" type="id"   enable-audit-log="true"></field>
        <field name="payrollNo" type="name"   enable-audit-log="true"></field>
        <field name="name" type="name"   enable-audit-log="true"></field>
        <field name="status" type="name"   enable-audit-log="true"></field>
        <field name="generatedDate" type="date-time"   enable-audit-log="true"></field>

       
        <prim-key field="remitanceCode"/>
        <prim-key field="payrollNo"/>
        
    </entity>
    
    <!-- Generate 
    	Go through Members, pick out stations that have members
    	then create expectation
     -->
    
    <!-- Station Expectation (Station/Month) 
    -->
   <entity entity-name="StationExpectation" package-name="org.ofbiz.accountholdertransactions" title="StationExpectation Entity">
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
		<field name="createdBy" type="name"   enable-audit-log="true"></field>
		<field name="updatedBy" type="name"   enable-audit-log="true"></field>
		<field name="branchId" type="name"   enable-audit-log="true"></field>
		<field name="employerCode" type="id"   enable-audit-log="true"></field>
		<field name="employerName" type="name"   enable-audit-log="true"></field>
		
		<field name="stationNumber" type="id"   enable-audit-log="true"></field>
		<field name="Onlinecode" type="id" enable-audit-log="true"></field>
		<field name="stationName" type="name"   enable-audit-log="true"></field>
		<field name="total" type="numeric"   enable-audit-log="true"></field>
        <field name="month" type="name"   enable-audit-log="true"></field>
        
        <prim-key field="stationNumber"/>
        <prim-key field="month"/>
        
    </entity>
    
     <entity entity-name="StationEmployer" package-name="org.ofbiz.accountholdertransactions" title="StationEmployer Entity">
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
		<field name="createdBy" type="name"   enable-audit-log="true"></field>
		<field name="updatedBy" type="name"   enable-audit-log="true"></field>
		<field name="branchId" type="name"   enable-audit-log="true"></field>
		<field name="employerCode" type="id"   enable-audit-log="true"></field>
		<field name="employerName" type="name"   enable-audit-log="true"></field>
		
        <field name="month" type="name"   enable-audit-log="true"></field>
        
        <prim-key field="employerCode"/>
        <prim-key field="month"/>
        
    </entity>
    
    
    <view-entity entity-name="EmployerExpectation" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="SE" entity-name="StationExpectation"></member-entity>
    	<member-entity entity-alias="S" entity-name="Station"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ -->
    	 
    	<!--  alias entity-alias="SE" name="employerCode" group-by="true" col-alias="employerCode"  field="employerCode"/ -->
    	<!-- alias entity-alias="SE" name="employerName" group-by="true"   / -->
    	<!-- alias entity-alias="SE" name="month" group-by="true" / -->
    	<!-- alias entity-alias="SE" name="stationNumber" function="count" col-alias="employerTotal"/ --> 
    	<alias entity-alias="SE" name="employerCode"  group-by="true" col-alias="employerCode" field="employerCode"></alias>
    	<alias entity-alias="SE" name="employerName"  group-by="true" col-alias="employerName"  field="employerName"></alias>
    	<alias entity-alias="SE" name="month"  group-by="true" col-alias="month"  field="month"></alias>
   
   		<view-link entity-alias="SE" rel-entity-alias="S"> 
            <key-map field-name="stationNumber" rel-field-name="stationNumber"/> 
        </view-link> 
    </view-entity>
    
    
    
    <!-- Expectation Sent 
    	Generate Expectation to send ExpectedPaymentSe
    	
    	Shares for each
    	Each Account Contribution for each
    	Each Loan Repayment 
    		Principal
    		Interest
    		Insurance
    --> 
    <entity entity-name="ExpectedPaymentSent" package-name="org.ofbiz.accountholdertransactions" title="ExpectedPaymentSent Entity">
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
		<field name="isReceived" type="indicator"   enable-audit-log="true"></field>
		<field name="createdBy" type="name"   enable-audit-log="true"></field>
		<field name="updatedBy" type="name"   enable-audit-log="true"></field>
		<field name="branchId" type="name"   enable-audit-log="true"></field>
		<field name="remitanceCode" type="name"   enable-audit-log="true"></field>
		<field name="stationNumber" type="name"   enable-audit-log="true"></field>
		<field name="stationName" type="name"   enable-audit-log="true"></field>
		<field name="payrollNo" type="name"   enable-audit-log="true"></field>
		<field name="employerCode" type="id"   enable-audit-log="true"></field>
		<field name="employeeNumber" type="name"   enable-audit-log="true"></field>
		<field name="memberNumber" type="name"   enable-audit-log="true"></field>
		
		
        <field name="month" type="name"   enable-audit-log="true"></field>
        <field name="loanNo" type="name"   enable-audit-log="true"></field>
        <field name="employerNo" type="name"   enable-audit-log="true"></field>
        
        <field name="amount" type="fixed-point"   enable-audit-log="true"></field>
        <field name="remitanceDescription" type="name"   enable-audit-log="true"></field>
        
        <field name="employeeName" type="name"   enable-audit-log="true"></field>
        <field name="employerName" type="name"   enable-audit-log="true"></field>
        <field name="status" type="name"   enable-audit-log="true"></field>
        <field name="generatedDate" type="date-time"   enable-audit-log="true"></field>

		<field name="expectationType" type="name"   enable-audit-log="true"></field> <!-- SHARES, LOAN, ACCOUNT -->
		<field name="totalAmount" type="fixed-point"   enable-audit-log="true"></field>
       
        <prim-key field="remitanceCode"/>
        <prim-key field="payrollNo"/>
        <prim-key field="month"/>
        
    </entity>
    
    <!-- Expectation Received -->
     <entity entity-name="ExpectedPaymentReceived"  package-name="org.ofbiz.accountholdertransactions" title="ExpectedPaymentReceived Entity">
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="isReceived" type="indicator"   enable-audit-log="true"></field>
		<field name="createdBy" type="name"   enable-audit-log="true"></field>
		<field name="updatedBy" type="name"   enable-audit-log="true"></field>
		<field name="branchId" type="name"   enable-audit-log="true"></field>
		<field name="remitanceCode" type="name"   enable-audit-log="true"></field>
		<field name="stationNumber" type="name"   enable-audit-log="true"></field>
		<field name="stationName" type="name"   enable-audit-log="true"></field>
		<field name="payrollNo" type="name"   enable-audit-log="true"></field>
		<field name="employerCode" type="id"   enable-audit-log="true"></field>
		<field name="employerName" type="name"   enable-audit-log="true"></field>
		<field name="employeeNumber" type="name"   enable-audit-log="true"></field>
		<field name="memberNumber" type="name"   enable-audit-log="true"></field>
		
        <field name="month" type="name"   enable-audit-log="true"></field>
        <field name="loanNo" type="name"   enable-audit-log="true"></field>
        <field name="employerNo" type="name"   enable-audit-log="true"></field>
        
        <field name="amount" type="fixed-point"   enable-audit-log="true"></field>
        <field name="remitanceDescription" type="name"   enable-audit-log="true"></field>
        
        <field name="employeeName" type="name"   enable-audit-log="true"></field>
        <field name="status" type="name"   enable-audit-log="true"></field>
        <field name="generatedDate" type="date-time"   enable-audit-log="true"></field>
        
        <field name="processed" type="indicator"   enable-audit-log="true"></field>
        <field name="dateProcessed" type="date-time"   enable-audit-log="true"></field>
		<field name="totalAmount" type="fixed-point"   enable-audit-log="true"></field>
		
       <field name="expectationType" type="name"   enable-audit-log="true"></field> <!-- SHARES, LOAN, ACCOUNT -->
        <prim-key field="remitanceCode"/>
        <prim-key field="payrollNo"/>
        <prim-key field="month"/>
        
    </entity>
    
     <entity entity-name="CodesSetup" package-name="org.ofbiz.accountholdertransactions" title="CodesSetup Entity">
        <field name="isActive" type="indicator"   enable-audit-log="true"></field>
        <field name="createdBy" type="id"   enable-audit-log="true"></field>
        <field name="updatedBy" type="id"   enable-audit-log="true"></field>
        <field name="name" type="name"   enable-audit-log="true"></field>
        <field name="code" type="name"   enable-audit-log="true"></field>
        <prim-key field="name"/>
        
    </entity>
    
            <entity entity-name="SubStation" package-name="org.ofbiz.accountholdertransactions" title="SubStation Entity">
        	<field name="subStationId" type="id-vlong-int" enable-audit-log="true"><description>primary sequenced ID</description></field>
        	<field name="stationId" type="id-ne" enable-audit-log="true"><description>Station ID</description></field>
        	<field name="isActive" type="indicator"   enable-audit-log="true"></field>
        	<field name="createdBy" type="name"   enable-audit-log="true"></field>
        	<field name="updatedBy" type="name"   enable-audit-log="true"></field>
        	<field name="branchId" type="name"   enable-audit-log="true"></field>
        	<field name="stationNumber" type="id"  enable-audit-log="true"></field>
        	<field name="employerCode" type="id" enable-audit-log="true"></field>
        	<field name="employerName" type="name"  enable-audit-log="true"></field>
       		<field name="name" type="name"  enable-audit-log="true"></field>
        	<field name="employerId" type="id"   enable-audit-log="true"></field>
        	<field name="partyId" type="id"   enable-audit-log="true"></field>

        	<field name="boxAddress" type="name"  enable-audit-log="true"></field>
        	<field name="fax" type="name"  enable-audit-log="true"></field>
        	<field name="telephoneNo" type="name"  enable-audit-log="true"></field>
        	<field name="mobile" type="name"  enable-audit-log="true"></field>
        	<field name="email" type="name"  enable-audit-log="true"></field>
        	<field name="contactPerson" type="name"  enable-audit-log="true"></field>

        	<prim-key field="subStationId"/>
        	<relation type="one" fk-name="subStation_Station" rel-entity-name="Station">
            	<key-map field-name="stationId"/>
        	</relation>
        </entity>
    
         <entity entity-name="ATMTransactionsLog" table-name="ATMTransactionsLog" sequence-bank-size="1" package-name="org.ofbiz.accountholdertransactions" title="ATMTransactions Entity">
        <field name="atmransactionsLogId" col-name="AccountID" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
		<field name="cardNumber"  type="id"   enable-audit-log="true"></field>
		<field name="transactionType"  type="id"   enable-audit-log="true"></field>
        
        <prim-key field="atmransactionsLogId"/>
     </entity>
     
     <entity entity-name="MsaccoTransactionsLog" table-name="MsaccoTransactionsLog" sequence-bank-size="1" package-name="org.ofbiz.accountholdertransactions" title="MsaccoTransactionsLog Entity">
        <field name="msaccoTransactionsLogId" type="id" enable-audit-log="true"><description>primary sequenced ID</description></field>
		<field name="phoneNo"  type="id"   enable-audit-log="true"></field>
		<field name="transactionType"  type="id"   enable-audit-log="true"></field>
        <field name="transactionAmount" type="currency-amount"   enable-audit-log="true"></field>
        <prim-key field="msaccoTransactionsLogId"/>
     </entity>
     
     
     <view-entity entity-name="MonthStationCount" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="SE" entity-name="StationExpectation"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="SE" name="month" group-by="true" />
    	<alias entity-alias="SE" name="total" function="count"/> 
    
    </view-entity>
    
    
    
     <view-entity entity-name="MemberStationList" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="M" entity-name="Member"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="M" name="stationId" group-by="true" />
    </view-entity>
    
   	<entity entity-name="MissingMemberLog" package-name="org.ofbiz.accountholdertransactions"
		title="MissingMemberLog Entity">
		
		<field name="missingMemberLogId" type="id-vlong-int"   enable-audit-log="true"></field>
		<field name="isActive" type="indicator"   enable-audit-log="true"></field>
		<field name="createdBy" type="id"   enable-audit-log="true"></field>
		<field name="employerCode" type="id"   enable-audit-log="true"></field>
		<field name="employerName" type="name"   enable-audit-log="true"></field>
		
		<field name="payrollNumber" type="id"   enable-audit-log="true"></field>
		<field name="names" type="name"   enable-audit-log="true"></field>
		<field name="month" type="id"   enable-audit-log="true"></field>
		
		
		<field name="code" type="id"   enable-audit-log="true"></field>
		<field name="productName" type="name"   enable-audit-log="true"></field>
		
		<field name="loanNo" type="name"   enable-audit-log="true"></field>
		
		<field name="employeeNumber" type="name" enable-audit-log="true"></field>
		
		<prim-key field="missingMemberLogId"/>
	</entity>
	
	
	<view-entity entity-name="MemberAccountWithProduct" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="MA" entity-name="MemberAccount"></member-entity>
    	<member-entity entity-alias="AP" entity-name="AccountProduct"></member-entity>
    	
    	<alias entity-alias="MA" name="memberAccountId"></alias>
    	<alias entity-alias="MA" name="accountNo"></alias>
    	<alias entity-alias="MA" name="accountName"></alias>
    	
    	<alias entity-alias="MA" name="partyId"></alias>
    	<alias entity-alias="MA" name="withdrawable"></alias>
    	
    	
    	<alias entity-alias="AP" name="name"/>
    	<alias entity-alias="AP" name="code"/>
      	
    	
    	<view-link  entity-alias="MA" rel-entity-alias="AP">
    		<key-map field-name="accountProductId" rel-field-name="accountProductId"/>
    		<!-- entity-condition>
    			<condition-expr entity-alias="T" field-name="treasuryTypeId" operator="equals" rel-entity-alias="TR" rel-field-name="sourceTreasuryType"/>
    		</entity-condition -->
    	</view-link>
    	
    </view-entity>
    
    <!-- Received Payroll Numbers -->
    <view-entity entity-name="ExpectedPaymentReceivedPayrolls" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="PR" entity-name="ExpectedPaymentReceived"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="PR" name="payrollNo" group-by="true" />
    	<alias entity-alias="PR" name="employerCode" group-by="true" />
    	<alias entity-alias="PR" name="month" group-by="true"  />
    </view-entity>
    
    <view-entity entity-name="ExpectedPaymentReceivedProducts" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="PR" entity-name="ExpectedPaymentReceived"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="PR" name="loanNo" group-by="true" />
    	<alias entity-alias="PR" name="remitanceCode" group-by="true" />
    	<alias entity-alias="PR" name="employerCode" group-by="true" />
    	<alias entity-alias="PR" name="month" group-by="true"  />
    	
    	<!-- entity-condition>
    		<condition-expr field-name="loanNo" operator="equals" value="0"/>
    	</entity-condition -->
    </view-entity>
    
     <view-entity entity-name="ExpectedPaymentReceivedLoans" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="PR" entity-name="ExpectedPaymentReceived"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="PR" name="loanNo" group-by="true" />
    	<alias entity-alias="PR" name="employerCode" group-by="true" />
    	<alias entity-alias="PR" name="month" group-by="true"  />
    	
    	<!-- entity-condition>
    		<condition-expr field-name="loanNo" operator="equals" value="0"/>
    	</entity-condition -->
    </view-entity>
    
    
    
    
   <view-entity entity-name="ExpectedPaymentReceivedProductTotal" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="PR" entity-name="ExpectedPaymentReceived"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="PR" name="loanNo" group-by="true" />
    	<alias entity-alias="PR" name="remitanceCode" group-by="true" />
    	<alias entity-alias="PR" name="employerCode" group-by="true" />
    	<alias entity-alias="PR" name="month" group-by="true"  />
    	<alias entity-alias="PR" name="amount" function="sum"/>
    	<!-- entity-condition>
    		<condition-expr field-name="loanNo" operator="equals" value="0"/>
    	</entity-condition -->
    </view-entity>
    
    
    <!-- view-entity entity-name="ReceivedSentMonthsSummary" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="EPR" entity-name="ExpectedPaymentReceived"></member-entity>
    	<member-entity entity-alias="EPS" entity-name="ExpectedPaymentSent"></member-entity -->
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	
    	<!-- alias entity-alias="EPR"  name="month" group-by="true" />
    	<alias entity-alias="SE" name="total" function="count"/> 
    
    </view-entity -->
    
      <view-entity entity-name="ExpectedPaymentReceivedAll" package-name="org.ofbiz.accountholdertransactions">
    	<member-entity entity-alias="PR" entity-name="ExpectedPaymentReceived"></member-entity>
    	<!-- member-entity entity-alias="TR" entity-name="Treasury"></member-entity>
    	<alias entity-alias="TT" name="sourceTreasury" group-by="true"></alias>
    	<alias entity-alias="TR" name="name" group-by="true"/ --> 
    	<alias entity-alias="PR" name="employerCode" field="employerCode"  col-alias="employerCode" />
    	<alias entity-alias="PR" name="employerName" field="employerName" col-alias="employerName"/>
    	<alias entity-alias="PR" name="month" 		 field="month"        col-alias="month" />
    	
    	<!-- alias entity-alias="PR" name="totalAmount" field="totalAmount" col-alias="totalAmount" function="count"/ -->
    	<!-- entity-condition>
    		<condition-expr field-name="loanNo" operator="equals" value="0"/>
    	</entity-condition -->
    </view-entity>
    
</entitymodel>
