<?xml version="1.0" encoding="UTF-8"?>
<!-- Licensed to the Apache Software Foundation (ASF) under one or more contributor
	license agreements. See the NOTICE file distributed with this work for additional
	information regarding copyright ownership. The ASF licenses this file to
	you under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of
	the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required
	by applicable law or agreed to in writing, software distributed under the
	License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
	OF ANY KIND, either express or implied. See the License for the specific
	language governing permissions and limitations under the License. -->

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

	<!-- Party Find Screen -->
	<screen name="findparty">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleFindParty" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="findparty" />

				<service service-name="findParty" auto-field-map="parameters" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://party/webapp/partymgr/party/findparty.ftl" />
									</html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- List Sacco Members -->
	<screen name="listsaccomembers">
		<section>
			<actions>
				<set field="titleProperty" value="List Sacco Members" />
				<set field="headerItem" value="listsaccomembers" />
				<set field="tabButtonItem" value="findparty" />

				<service service-name="listSaccoMembers" auto-field-map="parameters" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://party/webapp/partymgr/party/listsaccomembers.ftl" />
									</html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- List All Members -->
		<screen name="listAllSaccomembers">
		<section>
			<actions>
				<set field="titleProperty" value="List Sacco Members" />
				<set field="headerItem" value="listsaccomembers" />
				<set field="tabButtonItem" value="findparty" />

				<!-- service service-name="listSaccoMembers" auto-field-map="parameters" / -->
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://party/webapp/partymgr/party/listsaccomembers.ftl" />
									</html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- reviewmembers -->
	<screen name="reviewmembers">
		<section>
			<actions>
				<set field="titleProperty" value="Review Members" />
				<set field="headerItem" value="reviewmembers" />
				<set field="tabButtonItem" value="findparty" />
				<set field="memberCtx" from-field="parameters" />
				<!--  set field="statusName" value="NEW"/>
				< set field="memberStatusId" value="${bsh:org.ofbiz.party.party.SaccoUtility.getMemberStatusID(statusName);}"/> 
				
				<entity-condition list="reviewMembersList"
					entity-name="Member">
					<condition-expr field-name="memberStatusId" operator="equals"
						value="${memberStatusId}" />
				</entity-condition -->
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<!-- platform-specific> <html><html-template location="component://party/webapp/partymgr/party/listsaccomembers.ftl"/></html>
									</platform-specific -->
								<screenlet>
									<container style="button-bar">
										<link target="NewMember" text="New Member"
											style="buttontext">
											<!-- parameter param-name="loanApplicationId"/ -->
											<image url-mode="raw"
												src="${iconsLocation}/add.png" />
										</link>

									</container>
								</screenlet>

								<screenlet title="Search Members">
									<include-form name="FindMember"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>

								<screenlet title="Members List">
									<include-form
										location="component://party/widget/partymgr/PartyForms.xml"
										name="reviewmembers" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Party Profile Screens -->

	<screen name="viewprofile">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewPartyProfile" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="PartyTaxAuthInfos" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="layoutSettings.javaScripts[]" value="/partymgr/js/PartyProfileContent.js"
					global="true" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/ViewProfile.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<if-empty field="partyId" />
									<not>
										<if-empty field="parameters.telno" />
									</not>
								</and>
							</condition>
							<actions>
								<service service-name="findPartyFromTelephone"
									auto-field-map="true" result-map="telnoMap" />
								<entity-one entity-name="Party" value-field="party">
									<field-map field-name="partyId" from-field="telnoMap.partyId" />
								</entity-one>
								<set field="parameters.partyId" from-field="party.partyId" />
							</actions>
							<widgets />
						</section>
						<section>
							<condition>
								<and>
									<if-empty field="partyId" />
									<not>
										<if-empty field="parameters.email" />
									</not>
								</and>
							</condition>
							<actions>
								<service service-name="findPartyFromEmailAddress"
									result-map="emailMap">
									<field-map field-name="address" from-field="parameters.email" />
								</service>
								<entity-one entity-name="Party" value-field="party">
									<field-map field-name="partyId" from-field="emailMap.partyId" />
								</entity-one>
								<set field="parameters.partyId" from-field="party.partyId" />
							</actions>
							<widgets />
						</section>
						<section>
							<condition>
								<not>
									<if-empty field="party" />
								</not>
							</condition>
							<widgets>
								<section>
									<condition>
										<if-compare field="showOld" operator="equals"
											value="true" type="Boolean" />
									</condition>
									<widgets>
										<container style="button-bar button-style-2">
											<link target="viewprofile" text="${uiLabelMap.PartyHideOld}">
												<parameter param-name="partyId" from-field="party.partyId" />
											</link>
										</container>
									</widgets>
									<fail-widgets>
										<container style="button-bar button-style-2">
											<link target="viewprofile" text="${uiLabelMap.PartyShowOld}">
												<parameter param-name="partyId" from-field="party.partyId" />
												<parameter param-name="SHOW_OLD" value="true" />
											</link>
										</container>
									</fail-widgets>
								</section>
								<section>
									<widgets>
										<include-portal-page id="PartyProfile" />
									</widgets>
								</section>
							</widgets>
							<fail-widgets>
								<container>
									<label style="h3">${uiLabelMap.PartyNoPartyFoundWithPartyId}:
										${parameters.partyId}</label>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="viewroles">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewPartyRole" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="viewroles" />
				<set field="labelTitleProperty" value="PartyMemberRoles" />
				<entity-condition entity-name="RoleTypeAndParty"
					list="partyRoles">
					<condition-list combine="and">
						<condition-expr field-name="partyId" operator="equals"
							value="${parameters.partyId}" />
						<condition-expr field-name="roleTypeId" operator="not-equals"
							value="_NA_" />
					</condition-list>
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PartyMemberRoles}"
							navigation-form-name="ViewPartyRoles">
							<include-form name="ViewPartyRoles"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_UPDATE" />
							</condition>
							<widgets>
								<screenlet title="${uiLabelMap.PartyAddToRole}">
									<container>
										<label style="h2">${uiLabelMap.PartyAddToMainRole}</label>
										<include-form name="AddPartyMainRole"
											location="component://party/widget/partymgr/PartyForms.xml" />
										<container id="addPartySecondaryRole" />
									</container>
									<label style="h2">${uiLabelMap.PartyAddToRoleViewAll}</label>
									<include-form name="AddPartyRole"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<actions>
								<entity-condition entity-name="RoleType" list="parentRoleList">
									<condition-expr field-name="parentTypeId"
										operator="equals" from-field="nullField" />
									<order-by field-name="description" />
								</entity-condition>
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.PartyNewRoleType}">
									<include-form name="AddRoleType"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="AddPartySecondaryRoles">
		<section>
			<actions>
				<property-map map-name="uiLabelMap" resource="CommonUiLabels" />
				<property-map map-name="uiLabelMap" resource="PartyUiLabels" />
			</actions>
			<widgets>
				<label style="h2">${uiLabelMap.PartyAddToSecondRole}</label>
				<include-form name="AddPartySecondaryRoles"
					location="component://party/widget/partymgr/PartyForms.xml" />
			</widgets>
		</section>
	</screen>
	<screen name="linkparty">
		<section>
			<actions>
				<set field="titleProperty" value="PartyLink" />
				<set field="headerItem" value="link" />
				<set field="tabButtonItem" value="linkparty" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_UPDATE" />
							</condition>
							<widgets>
								<screenlet title="${uiLabelMap.PartyLink}">
									<label text="${uiLabelMap.PartyLinkExplanation}"></label>
									<include-form name="PartyLink"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditPartyRelationships">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditPartyRelationships" />
				<set field="tabButtonItem" value="EditPartyRelationships" />
				<set field="labelTitleProperty" value="PartyRelationships" />
				<set field="headerItem" value="find" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="Party" value-field="party" />
				<entity-condition entity-name="RoleType" list="roleTypes">
					<order-by field-name="description" />
					<order-by field-name="roleTypeId" />
				</entity-condition>
				<entity-condition entity-name="RoleTypeAndParty"
					list="roleTypesForCurrentParty">
					<condition-expr field-name="partyId" from-field="partyId" />
					<order-by field-name="description" />
					<order-by field-name="roleTypeId" />
				</entity-condition>
				<entity-condition entity-name="PartyRelationshipType"
					list="relateTypes">
					<order-by field-name="description" />
					<order-by field-name="partyRelationshipTypeId" />
				</entity-condition>
				<entity-condition entity-name="PartyRelationship"
					list="partyRelationships">
					<condition-list combine="or">
						<condition-expr field-name="partyIdTo" from-field="partyId" />
						<condition-expr field-name="partyIdFrom"
							from-field="partyId" />
					</condition-list>
					<order-by field-name="partyIdTo" />
					<order-by field-name="partyRelationshipTypeId" />
					<order-by field-name="-fromDate" />
				</entity-condition>
				<entity-condition entity-name="SecurityGroup" list="securityGroups" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PartyRelationships}"
							navigation-form-name="ListPartyRelationships">
							<include-form name="ListPartyRelationships"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<container style="lefthalf">
							<section>
								<condition>
									<if-has-permission permission="PARTYMGR"
										action="_CREATE" />
								</condition>
								<widgets>
									<screenlet title="${uiLabelMap.PartyNewRelationshipType}">
										<include-form name="AddPartyRelationshipType"
											location="component://party/widget/partymgr/PartyForms.xml" />
									</screenlet>
								</widgets>
							</section>
						</container>
						<container style="righthalf">
							<screenlet title="${uiLabelMap.PartyAddOtherRelationship}">
								<include-form name="AddOtherPartyRelationship"
									location="component://party/widget/partymgr/PartyForms.xml" />
							</screenlet>
						</container>
						<container style="clear" />
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="viewvendor">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewVendorParty" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="viewvendor" />

				<set field="labelTitleProperty" value="PartyVendorInformation" />

				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="Party" value-field="party" />
				<entity-one entity-name="Vendor" value-field="vendor" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PartyVendorInformation}">
							<include-form name="EditVendor"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditPartyAttribute">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditPartyAttribute" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="viewvendor" />

				<set field="labelTitleProperty" value="PartyAttribute" />

				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="attrName" from-field="parameters.attrName" />
				<entity-one entity-name="Party" value-field="party" />
				<entity-one entity-name="PartyAttribute" value-field="attribute" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PartyAttribute}">
							<include-form name="EditPartyAttribute"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditPartyTaxAuthInfos">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditPartyTaxAuthInfos" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="EditPartyTaxAuthInfos" />
				<set field="labelTitleProperty" value="PartyTaxAuthInfos" />

				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="Party" value-field="party" />
				<entity-and entity-name="PartyTaxAuthInfo" list="partyTaxInfos">
					<field-map field-name="partyId" />
					<order-by field-name="taxAuthGeoId" />
					<order-by field-name="taxAuthPartyId" />
					<order-by field-name="fromDate" />
				</entity-and>
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet id="AddPartyTaxAuthInfospanel"
							title="${uiLabelMap.PageTitleAddPartyTaxAuthInfos}" collapsible="true">
							<include-form name="AddPartyTaxAuthInfo"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<include-form name="UpdatePartyTaxAuthInfo"
							location="component://party/widget/partymgr/PartyForms.xml" />
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="editShoppingList">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleShoppingList" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="editShoppingList" />

				<set field="labelTitleProperty" value="PartyShoppingLists" />

				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/EditShoppingList.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<platform-specific>
							<html>
								<html-template
									location="component://party/webapp/partymgr/party/editShoppingList.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="editcontactmech">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditContactMech" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="editcontactmech" />

				<set field="labelTitleProperty" value="PageTitleEditContactMech" />

				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/HasPartyPermissions.groovy" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/EditContactMech.groovy" />

				<set field="dependentForm" value="editcontactmechform" />
				<set field="paramKey" value="countryGeoId" />
				<set field="mainId" value="countryGeoId" />
				<set field="dependentId" value="stateProvinceGeoId" />
				<set field="requestName" value="getAssociatedStateList" />
				<set field="responseName" value="stateList" />
				<set field="dependentKeyName" value="geoId" />
				<set field="descName" value="geoName" />
				<set field="selectedDependentOption" from-field="mechMap.postalAddress.stateProvinceGeoId"
					default-value="_none_" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<or>
									<if-compare field="hasViewPermission" operator="equals"
										value="true" type="Boolean" />
									<if-compare field="hasPcmCreatePermission" operator="equals"
										value="true" type="Boolean" />
									<if-compare field="hasPcmUpdatePermission" operator="equals"
										value="true" type="Boolean" />
									<if-compare-field field="parameters.partyId"
										operator="equals" to-field="userLogin.partyId" />
									<not>
										<if-empty field="mechMap.partyContactMech" />
									</not>
								</or>
							</condition>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://common/webcommon/includes/setDependentDropdownValuesJs.ftl" />
										<html-template
											location="component://party/webapp/partymgr/party/editcontactmech.ftl" />
									</html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="button-bar">
									<link target="backHome" text="[${uiLabelMap.CommonBack}]"
										style="smallSubmit" />
								</container>
								<container>
									<label style="h3">${uiLabelMap.PartyMsgContactNotBelongToYou}
									</label>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditPerson">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditPersonalInformation" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="headerItem" value="find" />
				<set field="labelTitleProperty" value="PageTitleEditPersonalInformation" />

				<set field="donePage" from-field="parameters.DONE_PAGE"
					default-value="viewprofile" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="PartyAndPerson" value-field="personalInfo" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PageTitleEditPersonalInformation}">
							<include-form name="AddNewPerson"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditPartyGroup">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditGroupInformation" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="headerItem" value="find" />
				<set field="labelTitleProperty" value="PageTitleEditGroupInformation" />

				<set field="donePage" from-field="parameters.DONE_PAGE"
					default-value="viewprofile" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="PartyAndGroup" value-field="partyGroup" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PageTitleEditGroupInformation}">
							<include-form name="EditPartyGroup"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="addBranch">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditGroupInformation" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="headerItem" value="find" />
				<set field="labelTitleProperty" value="PageTitleEditGroupInformation" />

				<set field="donePage" from-field="parameters.DONE_PAGE" default-value="viewprofile" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="PartyAndGroup" value-field="partyGroup" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="Branch Information ">
							<include-form name="addBranch" location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditUserLogin">
		<section>
			<actions>
				<set field="titleProperty" value="UserLoginUpdateSecuritySettings" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="UserLoginUpdateSecuritySettings" />
				<set field="updateUserLoginSecurityURI" value="ProfileUpdateUserLoginSecurity" />
				<set field="updatePasswordURI" value="ProfileUpdatePassword" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="userLoginId" from-field="parameters.userLoginId" />
				<entity-one entity-name="UserLogin" value-field="editUserLogin" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<container style="page-title">
							<label
								text="${uiLabelMap.UserLoginUpdateSecuritySettings} - ${userLoginId}" />
						</container>
						<include-form name="updateUserLoginSecurity"
							location="component://common/widget/SecurityForms.xml" />
						<screenlet title="${uiLabelMap.UserLoginChangePassword}">
							<include-form name="updatePassword"
								location="component://common/widget/SecurityForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="CreateUserLogin">
		<section>
			<actions>
				<set field="titleProperty" value="CreateUserLogin" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="CreateUserLogin" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="lastLocale" value="en-GB" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.CreateUserLogin}">
							<include-form name="AddUserLogin"
								location="component://common/widget/SecurityForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditUserLoginSecurityGroups">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditUserLoginSecurityGroups" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="addUserLoginSecurityGroupURI" value="ProfileAddUserLoginToSecurityGroup" />
				<set field="removeUserLoginSecurityGroupURI" value="ProfileRemoveUserLoginFromSecurityGroup" />
				<set field="updateUserLoginSecurityGroupURI" value="ProfileUpdateUserLoginToSecurityGroup" />
				<set field="userLoginId" from-field="parameters.userLoginId" />
				<entity-one entity-name="UserLogin" value-field="editUserLogin" />
				<set field="partyId" from-field="parameters.partyId"
					default-value="${editUserLogin.partyId}" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet id="AddUserLoginSecurityGroupsPanel"
							title="${uiLabelMap.AddUserLoginToSecurityGroup}" collapsible="true">
							<include-form name="AddUserLoginSecurityGroup"
								location="component://common/widget/SecurityForms.xml" />
						</screenlet>
						<include-form name="ListUserLoginSecurityGroups"
							location="component://common/widget/SecurityForms.xml" />
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="AddPartyNote">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleNewPartyNote" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="PageTitleNewPartyNote" />

				<set field="donePage" from-field="parameters.DONE_PAGE"
					default-value="viewprofile" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PageTitleNewPartyNote}">
							<include-form name="AddPartyNote"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditPartyRates">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditPartyRates" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="EditPartyRates" />
				<set field="labelTitleProperty" value="PageTitleEditPartyRates" />

				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet id="AddPartyRatesPanel" title="${uiLabelMap.PageTitleEditPartyRates}"
							collapsible="true">
							<include-form name="AddPartyRate"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<include-form name="ListPartyRates"
							location="component://party/widget/partymgr/PartyForms.xml" />
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="ViewSegmentRoles">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewPartySegmentRoles" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="ViewSegmentRoles" />

				<set field="labelTitleProperty" value="ViewSegmentRoles" />

				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="Party" value-field="party" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet id="AddSegmentRolePanel"
							title="${uiLabelMap.PageTitleAddPartySegmentRoles}" collapsible="true">
							<include-form name="AddSegmentRole"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<include-form name="ListSegmentRoles"
							location="component://party/widget/partymgr/PartyForms.xml" />
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Create New Party Screen -->
	<screen name="CreateNewParty">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleCreateNewPartyDetail" />
				<set field="headerItem" value="find" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>
								<screenlet title="${uiLabelMap.PartyCreateNewParty}">
									<include-menu
										location="component://party/widget/partymgr/PartyMenus.xml"
										name="create-new-party" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- New Customer Party Screen -->
	<screen name="NewCustomer">
		<section>
			<actions>
				<set field="titleProperty" value="PartyCreateNewCustomer" />
				<set field="headerItem" value="find" />
				<set field="target" value="createCustomer" />
				<set field="previousParams" from-field="_PREVIOUS_PARAMS_"
					from-scope="user" />
				<property-to-field field="defaultCountryGeoId"
					resource="general" property="country.geo.id.default" default="KEN" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<actions>
								<!-- fields for setDependentDropdownValuesJs.ftl -->
								<set field="dependentForm" value="NewUser" />
								<set field="paramKey" value="countryGeoId" />
								<set field="mainId" value="USER_COUNTRY" />
								<set field="dependentId" value="USER_STATE" />
								<set field="requestName" value="getAssociatedStateList" />
								<set field="responseName" value="stateList" />
								<set field="dependentKeyName" value="geoId" />
								<set field="descName" value="geoName" />
								<set field="selectedDependentOption" value="_none_" />
							</actions>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://common/webcommon/includes/setDependentDropdownValuesJs.ftl" />
									</html>
								</platform-specific>
								<screenlet title="${uiLabelMap.PartyCreateNewCustomer}">
									<include-form name="NewUser"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- New Prospect Party Screen -->
	<screen name="NewProspect">
		<section>
			<actions>
				<set field="titleProperty" value="PartyCreateNewProspect" />
				<set field="headerItem" value="find" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="createProspect" />
				<set field="previousParams" from-field="_PREVIOUS_PARAMS_"
					from-scope="user" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<actions>
								<!-- fields for setDependentDropdownValuesJs.ftl -->
								<set field="dependentForm" value="NewUser" />
								<set field="paramKey" value="countryGeoId" />
								<set field="mainId" value="USER_COUNTRY" />
								<set field="dependentId" value="USER_STATE" />
								<set field="requestName" value="getAssociatedStateList" />
								<set field="responseName" value="stateList" />
								<set field="dependentKeyName" value="geoId" />
								<set field="descName" value="geoName" />
								<set field="selectedDependentOption" value="_none_" />
							</actions>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://common/webcommon/includes/setDependentDropdownValuesJs.ftl" />
									</html>
								</platform-specific>
								<screenlet title="${uiLabelMap.PartyCreateNewProspect}">
									<include-form name="NewUser"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- New Emplyee Party Screen -->
	<screen name="NewEmployee">
		<section>
			<actions>
				<set field="titleProperty" value="PartyCreateNewCustomer" />
				<set field="headerItem" value="find" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="createEmployee" />
				<set field="previousParams" from-field="_PREVIOUS_PARAMS_"
					from-scope="user" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<actions>
								<!-- fields for setDependentDropdownValuesJs.ftl -->
								<set field="dependentForm" value="NewUser" />
								<set field="paramKey" value="countryGeoId" />
								<set field="mainId" value="USER_COUNTRY" />
								<set field="dependentId" value="USER_STATE" />
								<set field="requestName" value="getAssociatedStateList" />
								<set field="responseName" value="stateList" />
								<set field="dependentKeyName" value="geoId" />
								<set field="descName" value="geoName" />
								<set field="selectedDependentOption" value="_none_" />
							</actions>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://common/webcommon/includes/setDependentDropdownValuesJs.ftl" />
									</html>
								</platform-specific>
								<screenlet title="${uiLabelMap.PartyCreateNewEmployee}">
									<include-form name="NewUser"
										location="component://party/widget/partymgr/PartyForms.xml"/>
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Create New Member -->
	<screen name="NewMember">
		<section>
			<actions>
				<set field="titleProperty" value="PartyCreateNewMember" />
				<set field="headerItem" value="listsaccomembers" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="createMember" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<property-to-field field="defaultCountryGeoId"
					resource="general" property="KEN" default="KEN" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="branchId" from-field="parameters.partyId" />

				<entity-one entity-name="Member" value-field="memberContext" />
				
				
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>
								<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>

								<screenlet title="${uiLabelMap.PartyCreateNewMember}">
									<!-- platform-specific> <html><html-template location="component://party/webapp/partymgr/party/partyHeader.ftl"/></html>
										</platform-specific -->
									<include-form name="NewMember"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								
								<screenlet title="New Members List">
									<include-form
										location="component://party/widget/partymgr/PartyForms.xml"
										name="reviewnewmembers" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Address Match Map Screen -->
	<screen name="AddressMatchMap">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleAddressMatchMap" />
				<set field="headerItem" value="addrmap" />
				<entity-condition entity-name="AddressMatchMap"
					list="addressMatchMaps">
					<order-by field-name="sequenceNum" />
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<platform-specific>
							<html>
								<html-template
									location="component://party/webapp/partymgr/party/addressMatchMap.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="FindAddressMatch">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleAddressMatches" />
				<set field="headerItem" value="addrmap" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/FindMatches.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<platform-specific>
							<html>
								<html-template
									location="component://party/webapp/partymgr/party/findMatches.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Party Content Screen -->
	<screen name="EditPartyContents">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleListContent" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="PartyContents" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="contentId" from-field="parameters.contentId" />
				<entity-one entity-name="Content" value-field="content" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PageTitleListContent}">
							<container>
								<link target="EditPartyContents" text="${uiLabelMap.CommonCreateNew}"
									style="smallSubmit">
									<parameter param-name="partyId" />
								</link>
							</container>
							<include-form name="ListPartyContents"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.PageTitleAddPartyContent}">
							<include-form name="AddPartyContent"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="editCarrierAccount">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitlePartyCarrierAccount" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PartyShipperAccount}">
							<include-form name="EditCarrierAccount"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditPartyResumes">
		<section>
			<actions>
				<set field="titleProperty" value="HumanResEditPartyResume" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="EditPartyResumes" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="resumeId" from-field="parameters.resumeId" />
				<set field="partyResumeCtx.resumeId" from-field="parameters.resumeId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet id="EditPartyResumePanel"
							title="${uiLabelMap.CommonAdd} ${uiLabelMap.PartyParty} ${uiLabelMap.HumanResPartyResume}"
							collapsible="true">
							<include-form name="EditPartyResume"
								location="component://humanres/widget/forms/PartyResumeForms.xml" />
						</screenlet>
						<include-form name="ListPartyResumes"
							location="component://humanres/widget/forms/PartyResumeForms.xml" />
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="PartyFinancialHistory">
		<section>
			<actions>
				<set field="titleProperty" value="PartyFinancialHistory" />
				<set field="headerItem" value="accountsMain" />
				<set field="tabButtonItem" value="FinancialHistory" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="Party" value-field="party" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<label style="h1" text="${uiLabelMap.PartyFinancialHistory}" />
						<section>
							<actions>
								<entity-condition entity-name="InvoiceAndApplAndPayment"
									list="ListInvoicesApplPayments">
									<condition-list combine="and">
										<condition-list combine="or">
											<condition-list combine="and">
												<condition-expr field-name="partyId"
													from-field="partyId" />
												<condition-expr field-name="partyIdFrom"
													from-field="defaultOrganizationPartyId" />
											</condition-list>
											<condition-list combine="and">
												<condition-expr field-name="partyId"
													from-field="defaultOrganizationPartyId" />
												<condition-expr field-name="partyIdFrom"
													from-field="partyId" />
											</condition-list>
										</condition-list>
										<condition-expr field-name="statusId" operator="not-equals"
											value="INVOICE_IN_PROCESS" />
										<condition-expr field-name="statusId" operator="not-equals"
											value="INVOICE_CANCELLED" />
										<condition-expr field-name="statusId" operator="not-equals"
											value="INVOICE_WRITEOFF" />
									</condition-list>
								</entity-condition>
							</actions>
							<widgets>
								<section>
									<condition>
										<not>
											<if-empty field="ListInvoicesApplPayments" />
										</not>
									</condition>
									<actions>
										<set field="actualCurrency" value="false" type="Boolean" />
										<set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyUomId" />
									</actions>
									<widgets>
										<screenlet title="${uiLabelMap.AccountingInvoicesApplPayments}"
											navigation-form-name="Invoices">
											<include-form name="ListInvoicesApplPayments"
												location="component://party/widget/partymgr/PartyForms.xml" />
											<section>
												<condition>
													<and>
														<not>
															<if-empty field="party.preferredCurrencyUomId" />
														</not>
														<if-compare-field field="defaultOrganizationPartyCurrencyId"
															operator="not-equals" to-field="party.preferredCurrencyUomId" />
													</and>
												</condition>
												<actions>
													<set field="actualCurrency" value="true" type="Boolean" />
													<set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId" />
												</actions>
												<widgets>
													<label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
													<include-form name="ListInvoicesApplPayments"
														location="component://party/widget/partymgr/PartyForms.xml" />
												</widgets>
											</section>
										</screenlet>
									</widgets>
								</section>
							</widgets>
						</section>
						<section>
							<actions>
								<set field="actualCurrency" value="false" type="Boolean" />
								<set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyUomId" />
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.PartyInvoicesNotApplied}"
									navigation-form-name="partyFinancialHistoryInvoicesN">
									<include-form name="ListUnAppliedInvoices"
										location="component://party/widget/partymgr/PartyForms.xml" />
									<section>
										<condition>
											<and>
												<not>
													<if-empty field="party.preferredCurrencyUomId" />
												</not>
												<if-compare-field field="defaultOrganizationPartyCurrencyUomId"
													operator="not-equals" to-field="party.preferredCurrencyUomId" />
											</and>
										</condition>
										<actions>
											<set field="actualCurrency" value="true" type="Boolean" />
											<set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId" />
										</actions>
										<widgets>
											<label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
											<include-form name="ListUnAppliedInvoices"
												location="component://party/widget/partymgr/PartyForms.xml" />
										</widgets>
									</section>
								</screenlet>
							</widgets>
						</section>
						<section>
							<actions>
								<set field="actualCurrency" value="false" type="Boolean" />
								<set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyId" />
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.PartyPaymentsNotApplied}"
									navigation-form-name="partyFinancialHistoryPaymentsN">
									<include-form name="ListUnAppliedPayments"
										location="component://party/widget/partymgr/PartyForms.xml" />
									<section>
										<condition>
											<and>
												<not>
													<if-empty field="party.preferredCurrencyUomId" />
												</not>
												<if-compare-field field="defaultOrganizationPartyCurrencyId"
													operator="not-equals" to-field="party.preferredCurrencyUomId" />
											</and>
										</condition>
										<actions>
											<set field="actualCurrency" value="true" type="Boolean" />
											<set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId" />
										</actions>
										<widgets>
											<label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
											<include-form name="ListUnAppliedPayments"
												location="component://party/widget/partymgr/PartyForms.xml" />
										</widgets>
									</section>
								</screenlet>
							</widgets>
						</section>
						<section>
							<actions>
								<set field="actualCurrency" value="false" type="Boolean" />
								<set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyUomId" />
							</actions>
							<widgets>
								<screenlet
									title="${uiLabelMap.PartyFinancialSummary}${defaultOrganizationPartyId}"
									navigation-form-name="partyFinancialSummary">
									<include-form name="partyFinancialSummary"
										location="component://party/widget/partymgr/PartyForms.xml" />
									<section>
										<condition>
											<and>
												<not>
													<if-empty field="party.preferredCurrencyUomId" />
												</not>
												<if-compare-field field="defaultOrganizationPartyCurrencyUomId"
													operator="not-equals" to-field="party.preferredCurrencyUomId" />
											</and>
										</condition>
										<actions>
											<set field="actualCurrency" value="true" type="Boolean" />
											<set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId" />
										</actions>
										<widgets>
											<label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
											<include-form name="partyFinancialSummary"
												location="component://party/widget/partymgr/PartyForms.xml" />
										</widgets>
									</section>
								</screenlet>
							</widgets>
						</section>
						<section>
							<actions>
								<script
									location="component://accounting/webapp/accounting/WEB-INF/actions/payment/BillingAccounts.groovy" />
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.AccountingBillingAccount}">
									<include-form name="PartyBillingAccount"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section>
							<actions>
								<script
									location="component://order/webapp/ordermgr/WEB-INF/actions/return/ReturnHeader.groovy" />
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.OrderOrderReturns}">
									<include-form name="PartyReturns"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="Preferences">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewPartyPreferences" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="preferences" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-and entity-name="EnumTypeChildAndEnum" list="enumTypeChildAndEnums">
					<field-map field-name="parentEnumTypeId" value="USER_PREF_GROUPS" />
				</entity-and>
				<entity-and entity-name="UserLogin" list="userLogins">
					<field-map field-name="partyId" from-field="parameters.partyId" />
				</entity-and>
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<iterate-section entry="userLogin" list="userLogins">
							<section>
								<actions>
									<set field="userPrefUserLoginId" from-field="userLogin.userLoginId" />
								</actions>
								<widgets>
									<screenlet
										title="${uiLabelMap.CommonPreferences} ${uiLabelMap.CommonFor} userLogin: ${userPrefUserLoginId}">
										<include-form name="ListPreference"
											location="component://party/widget/partymgr/PartyForms.xml" />
									</screenlet>
								</widgets>
							</section>
						</iterate-section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="PartyGeoLocation">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitlePartyGeoLocation" />
				<set field="tabButtonItem" value="PartyGeoLocation" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/PartyGeoLocation.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<not>
									<if-empty field="geoChart" />
								</not>
							</condition>
							<widgets>
								<container style="button-bar">
									<link target="addGeoLocation" text="${uiLabelMap.CommonUpdate}"
										style="buttontext">
										<parameter param-name="partyId" from-field="parameters.partyId" />
									</link>
								</container>
								<label>${uiLabelMap.CommonLatitude} ${latestGeoPoint.latitude}
								</label>
								<label>${uiLabelMap.CommonLongitude} ${latestGeoPoint.longitude}
								</label>
								<label>${uiLabelMap.CommonElevation} ${latestGeoPoint.elevation}
									${elevationUomAbbr}</label>
								<include-screen name="geoChart"
									location="component://common/widget/CommonScreens.xml" />
							</widgets>
							<fail-widgets>
								<container style="button-bar">
									<link target="addGeoLocation" text="${uiLabelMap.CommonCreateNew}"
										style="buttontext create">
										<parameter param-name="partyId" from-field="parameters.partyId" />
									</link>
								</container>
								<include-screen name="geoChart"
									location="component://common/widget/CommonScreens.xml" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditGeoLocation">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitlePartyGeoLocation" />
				<set field="tabButtonItem" value="PartyGeoLocation" />
				<set field="partyId" from-field="parameters.partyId" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/GetGeoLocation.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<platform-specific>
							<html>
								<html-template
									location="component://party/webapp/partymgr/party/editGeoLocation.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="CreateUserNotification">
		<section>
			<actions>
				<set field="title"
					value="${uiLabelMap.MyPortalCustRequestNotificationMailCreation}" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template
							location="component://party/templates/email/CreatePartyNotification.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>


	<!-- Party Identification Type -->
	<screen name="NewPartyIdentificationType">
		<section>
			<actions>
				<set field="titleProperty" value="Party Identification Type" />
				<set field="headerItem" value="partyIdentificationType" />
				<set field="displayPassword" value="Y" />
                <set field="tabButtonItem" value="partyIdentificationType"/>
				<set field="target" value="createPartyIdentificationType" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<!-- property-to-field field="defaultCountryGeoId" resource="general"
					property="KEN" default="KEN"/ -->
				<!-- set field="loanSecurityId" from-field="parameters.loanSecurityId"/ -->

				<!--set field="staffPayrollId" from-field="parameters.staffPayrollId"/ -->

				<entity-one entity-name="PartyIdentificationType"
					value-field="partyIdentificationTypeContext" />

			</actions>
			<widgets>
				<decorator-screen name="GlobalHRSettingsDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<!-- include-menu name="PayrollTablesTabBar" location="component://payroll/widget/payroll/ExampleMenus.xml"/ -->
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>
								<screenlet title="New Party Identification Type">
									<include-form name="NewPartyIdentificationType"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>

						<section name="search-results">
							<widgets>
								<screenlet title="List Party Identification Type">
									<include-form name="listPartyIdentificationType"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>


	<!-- PartyIdentification Screen -->
	<screen name="ListPartyIdentifications">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleListPartyIdentifications" />
				<set field="headerItem" value="find" />
				<set field="tabButtonItem" value="viewidentifications" />

				<set field="labelTitleProperty" value="PartyIdentification" />

				<set field="partyId" from-field="parameters.partyId" />
				<entity-one entity-name="Party" value-field="party"
					use-cache="true" />
				<entity-one entity-name="PartyIdentification"
					value-field="partyIdentification" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PartyPartyIdentificationList}">
							<include-form name="listPartyIdentification"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.PartyPartyIdentification}"
							navigation-menu-name="newPartyIdentification" id="PartyIdentificationCreationPanel">
							<include-menu name="newPartyIdentification"
								location="component://party/widget/partymgr/PartyMenus.xml" />
							<include-form name="editPartyIdentification"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="ViewProductStoreRoles">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleFindProductStoreRoles" />
				<set field="headerItem" value="store" />
				<set field="tabButtonItem" value="FindProductStoreRoles" />
				<set field="labelTitleProperty" value="ProductProductStoreRoles" />
				<set field="parameters.fromDate" from-field="parameters.fromDate"
					type="Timestamp" />
				<entity-one entity-name="ProductStoreRole" value-field="productStoreRole"
					auto-field-map="true" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.PageTitleEditProductStoreRoles}">
							<include-form name="EditProductStoreRole"
								location="component://party/widget/partymgr/PartyForms.xml" />
						</screenlet>
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-options">
								<include-form name="FindProductStoreRole"
									location="component://party/widget/partymgr/PartyForms.xml" />
							</decorator-section>
							<decorator-section name="search-results">
								<include-form name="ListProductStoreRole"
									location="component://party/widget/partymgr/PartyForms.xml" />
							</decorator-section>
						</decorator-screen>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="postalAddressHtmlFormatter">
		<section>
			<actions>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="postalAddressTemplateSuffix" value=".ftl" />
				<set field="addressTemplatePath"
					value="${sys:getProperty('ofbiz.home')}/applications/party/webapp/partymgr/party/contactmechtemplates/" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/GetPostalAddressTemplate.groovy" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template
							location="component://party/webapp/partymgr/party/contactmechtemplates/${postalAddressTemplate}" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="postalAddressPdfFormatter">
		<section>
			<actions>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="postalAddressTemplateSuffix" value=".fo.ftl" />
				<set field="addressTemplatePath"
					value="${sys:getProperty('ofbiz.home')}/applications/party/webapp/partymgr/party/contactmechtemplates/" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/GetPostalAddressTemplate.groovy" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template
							location="component://party/webapp/partymgr/party/contactmechtemplates/${postalAddressTemplate}" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="ImportExport">
		<section>
			<actions>
				<set field="titleProperty" value="CommonImportExport" />
				<set field="headerItem" value="importexport" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet
							title="${uiLabelMap.PartyParty} ${uiLabelMap.CommonImportExport} ID Name, single role (employee, customer, supplier) and contactmechs">
							<container style="lefthalf">
								<label style="h2">${uiLabelMap.CommonImport}</label>
								<include-form name="ImportParty"
									location="component://party/widget/partymgr/PartyForms.xml" />
							</container>
							<container style="righthalf">
								<label style="h2">${uiLabelMap.CommonExport}</label>
								<include-form name="ExportParty"
									location="component://party/widget/partymgr/PartyForms.xml" />
							</container>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="PartyExportCsv">
		<section>
			<actions>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="AccountingUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="organizationPartyId" from-field="parameters.organizationPartyId" />
			</actions>
			<widgets>
				<include-form name="ExportPartyCsv"
					location="component://party/widget/partymgr/PartyForms.xml" />
			</widgets>
		</section>
	</screen>

	<!-- Member Profile -->
	<screen name="viewmemberprofile">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewPartyProfile" />
				<set field="tabButtonItem" value="viewmemberprofile" />
				<set field="labelTitleProperty" value="PartyTaxAuthInfos" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="layoutSettings.javaScripts[]" value="/partymgr/js/PartyProfileContent.js"
					global="true" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/ViewProfile.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<if-empty field="partyId" />
									<not>
										<if-empty field="parameters.telno" />
									</not>
								</and>
							</condition>
							<actions>
								<service service-name="findPartyFromTelephone"
									auto-field-map="true" result-map="telnoMap" />
								<entity-one entity-name="Party" value-field="party">
									<field-map field-name="partyId" from-field="telnoMap.partyId" />
								</entity-one>
								<set field="parameters.partyId" from-field="party.partyId" />
							</actions>
							<widgets />
						</section>
						<section>
							<condition>
								<and>
									<if-empty field="partyId" />
									<not>
										<if-empty field="parameters.email" />
									</not>
								</and>
							</condition>
							<actions>
								<service service-name="findPartyFromEmailAddress"
									result-map="emailMap">
									<field-map field-name="address" from-field="parameters.email" />
								</service>
								<entity-one entity-name="Party" value-field="party">
									<field-map field-name="partyId" from-field="emailMap.partyId" />
								</entity-one>
								<set field="parameters.partyId" from-field="party.partyId" />
							</actions>
							<widgets />
						</section>
						<section>
							<condition>
								<not>
									<if-empty field="party" />
								</not>
							</condition>
							<widgets>
								<!-- section> <condition> <if-compare field="showOld" operator="equals"
									value="true" type="Boolean"/> </condition> <widgets> <container style="button-bar
									button-style-2"> <link target="viewmemberprofile" text="${uiLabelMap.PartyHideOld}">
									<parameter param-name="partyId" from-field="party.partyId"/> </link> </container>
									</widgets> <fail-widgets> <container style="button-bar button-style-2"> <link
									target="viewmemberprofile" text="${uiLabelMap.PartyShowOld}"> <parameter
									param-name="partyId" from-field="party.partyId"/> <parameter param-name="SHOW_OLD"
									value="true"/> </link> </container> </fail-widgets> </section -->
								<section>
									<widgets>
										<include-portal-page id="PartyProfile" />
									</widgets>
								</section>
							</widgets>
							<fail-widgets>
								<container>
									<label style="h3">${uiLabelMap.PartyNoPartyFoundWithPartyId}:
										${parameters.partyId}</label>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Member Details -->


	<screen name="relationships">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="relationships" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="New Relationship">
									<include-form name="relationship"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Relationships List">
									<include-form name="listRelationships"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- employmentDetails -->
	<screen name="employmentDetails">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="employmentDetails" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Employment">
									<include-form name="employmentDetails"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Employment Details List">
									<include-form name="listEmploymentDetails"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- businessDetails -->
	<screen name="businessDetails">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="businessDetails" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Business Detail">
									<include-form name="businessDetails"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>

						<section name="search-results">
							<widgets>
								<screenlet title="Business Details List">
									<include-form name="listBusinessDetails"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- memberContribution -->
	<screen name="memberContribution">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="memberContribution" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="New Contribution">
									<include-form name="memberContribution"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Member Contributions List">
									<include-form name="listMemberContribution"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- Member Account -->
	<screen name="memberAccount">
		<section>
			<actions>
				<set field="titleProperty" value="New Member Account" />
				<set field="tabButtonItem" value="memberAccount" />
				<set field="labelTitleProperty" value="New Member Account" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Account">
									<include-form name="memberAccount"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Member Accounts List">
									<include-form name="listMemberAccount"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<!-- memberNetSalary -->
		<screen name="memberNetSalary">
		<section>
			<actions>
				<set field="titleProperty" value="Member Net Salary" />
				<set field="tabButtonItem" value="memberNetSalary" />
				<set field="labelTitleProperty" value="Member Net Salary" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Net Salary">
									<include-form name="memberNetSalary"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="List">
									<include-form name="listMemberNetSalary"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Member Referee -->
	<screen name="memberReferee">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="memberReferee" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Referee">
									<include-form name="memberReferee"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Referees List">
									<include-form name="listMemberReferee"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- memberNominee -->
	<screen name="memberNominee">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="memberNominee" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="New Nominee">
									<include-form name="memberNominee"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Nominee List">
									<include-form name="listMemberNominee"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- termsAndConditions -->
	<screen name="termsAndConditions">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="termsAndConditions" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="New Terms and Conditions">
									<include-form name="termsAndConditions"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Terms and Conditions List">
									<include-form name="listTermsAndConditions"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- sourceOfFunds -->
	<screen name="sourceOfFunds">
		<section>
			<actions>
				<set field="titleProperty" value="New Relationship" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="New Relationship" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="New Source of Fund">
									<include-form name="sourceOfFunds"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Source of Funds List">
									<include-form name="listSourceOfFunds"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- employers -->
	<screen name="employers">
		<section>
			<actions>
				<set field="titleProperty" value="New Employer" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="New Employer" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<!-- set field="partyId" from-field="parameters.partyId" / -->
				<entity-one value-field="employer" entity-name="Employer"></entity-one>
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="New Employer">
									<include-form name="employers"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<!-- List Here -->
						<section name="search-results">
							<widgets>
								<screenlet title="Employers List">
									<include-form name="listEmployer"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- openingBalance -->
	<screen name="openingBalance">
		<section>
			<actions>
				<set field="titleProperty" value="Account Details (Opening Balance)" />
				<set field="tabButtonItem" value="openingBalance" />
				<set field="labelTitleProperty" value="Account Details" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Account Details">
									<include-form name="openingBalance"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Account Details List">
									<include-form name="listOpeningBalance"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- memberLoanBalance -->
	<screen name="memberLoanBalance">
		<section>
			<actions>
				<set field="titleProperty" value="Loans" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="New Loan" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Loan">
									<include-form name="memberLoanBalance"
										location="component://loans/widget/loans/LoanForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Loans (Opening Balances)">
									<include-form name="listMemberLoanBalance"
										location="component://loans/widget/loans/LoanForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- memberShareBalance -->
	<screen name="memberShareBalance">
		<section>
			<actions>
				<set field="titleProperty" value="Shares" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="Shares" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Shares">
									<include-form name="memberShareBalance"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Member Share List">
									<include-form name="listMemberShareBalance"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Account Status -->
	<screen name="accountStatus">
		<section>
			<actions>
				<set field="titleProperty" value="Account Status" />
				<set field="tabButtonItem" value="accountStatus" />
				<set field="labelTitleProperty" value="Account Status" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="accountStatus" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<screenlet title="Add Account Status">
									<include-form name="accountStatus"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Account Status List">
									<include-form name="listAccountStatus"
										location="component://party/widget/partymgr/MemberForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="memberAttachments">
		<section>
			<actions>
				<set field="titleProperty" value="Add Attachments - Photo,ID and Signature" />
				<set field="tabButtonItem" value="memberAttachments" />
				<set field="labelTitleProperty" value="Add Attachments - Photo,ID and Signature" />
				<set field="cancelPage" from-field="parameters.CANCEL_PAGE"
					default-value="viewprofile" />
				<set field="createUserLoginURI" value="ProfileCreateUserLogin" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="photourl" value="N" />
				<set field="idfronturl" value="N" />
				<set field="idbackurl" value="N" />
				<set field="signatureurl" value="N" />
				<entity-one entity-name="Member" value-field="member" />
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/attachments/EditMemberAttachment.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonMemberDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">

						<section>
							<widgets>

							</widgets>
						</section>
						<section>
							<widgets>
								<screenlet title="Add Photo">
									<platform-specific>
										<html>
											<html-template
												location="component://party/webapp/partymgr/attachments/addMemberPhoto.ftl" />
										</html>
									</platform-specific>
									<!-- include-form name="memberPhoto" location="component://party/widget/partymgr/MemberForms.xml"/ -->
									<image src="${member.photourl}" url-mode="content" alt="Member Photo"
										style="cssImgLarge" />
									<label style="h1">Member Photo</label>
								</screenlet>
							</widgets>
						</section>

						<section>
							<widgets>
								<screenlet title="Add ID Front">
									<platform-specific>
										<html>
											<html-template
												location="component://party/webapp/partymgr/attachments/addMemberIDFront.ftl" />
										</html>
									</platform-specific>
									<image src="${member.idfronturl}" url-mode="content" alt="ID Front"
										style="cssImgLarge" />
									<label style="h1">ID Front</label>
								</screenlet>
							</widgets>
						</section>


						<section>
							<widgets>
								<screenlet title="Add ID Back">
									<platform-specific>
										<html>
											<html-template
												location="component://party/webapp/partymgr/attachments/addMemberIDBack.ftl" />
										</html>
									</platform-specific>
									<image src="${member.idbackurl}" url-mode="content" alt="ID Back"
										style="cssImgLarge" />
									<label style="h1">ID Back</label>
								</screenlet>
							</widgets>
						</section>

						<section>
							<widgets>
								<screenlet title="Add Signature">
									<platform-specific>
										<html>
											<html-template
												location="component://party/webapp/partymgr/attachments/addMemberSignature.ftl" />
										</html>
									</platform-specific>
									<image src="${member.signatureurl}" url-mode="content"
										alt="Signature" style="cssImgLarge" />
									<label style="h1">Member Signature</label>
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- ReviewMember -->
	<!-- Review Member Start -->
	<screen name="ApproveMember">
		<section>
			<actions>
				<set field="titleProperty" value="Approve Member" />
				<set field="headerItem" value="ApproveMember" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="approveMember" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<property-to-field field="defaultCountryGeoId"
					resource="general" property="KEN" default="KEN" />
				<set field="partyId" from-field="parameters.partyId" />

				<entity-one entity-name="Member" value-field="memberContext" />

				<set field="memberHasNominees" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasNominees(memberContext);}" type="String"/>
				<set field="memberHasReferees" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasReferees(memberContext);}" type="String"/>
				
				<set field="memberId" from-field="parameters.partyId" type="Long"/>
				
				<set field="memberHasPhoto" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasPhoto(memberId);}" type="Boolean"/>
				<set field="memberHasIdFront" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasIdFront(memberId);}" type="Boolean"/>
				<set field="memberHasIdBack" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasIdBack(memberId);}" type="Boolean"/>
				<set field="memberHasSignature" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasSignature(memberId);}" type="Boolean"/>
				<set field="memberHasTermsAndConditions" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasTermsAndConditions(memberId);}" type="Boolean"/>
				<set field="memberHasShareCapital" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasShareCapital(memberId);}" type="Boolean"/>
				<set field="memberHasMemberDeposit" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasMemberDeposit(memberId);}" type="Boolean"/>
				<set field="isMemberApproved" value="${bsh:org.ofbiz.party.party.PartyServices.isMemberApproved(memberId);}" type="Boolean"/>
				
				<set field="trueStatus" value="true" type="Boolean"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>
								<screenlet>
									<section>

										<widgets>

											<container style="button-bar">

												<link target="memberPrintout" text="Print Member Printout"
													style="buttontext">
													<parameter param-name="partyId" from-field="partyId"/>
													<image url-mode="raw" src="${iconsLocation}/page_white_acrobat.png" />
												</link>


											</container>
										</widgets>

									</section>
								</screenlet>
								<section>
									<condition>
										<if-compare operator="equals" value="N" field="memberHasNominees"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Nominees - Please Add</label>
										</container>
									</widgets>
								</section>

								<section>
									<condition>
										<if-compare operator="equals" value="N" field="memberHasReferees"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Referees - Please Add</label>
										</container>
									</widgets>
								</section>
								
								<!-- 
								
									<set field="memberHasPhoto" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasPhoto(memberId);}" type="Boolean"/>
									<set field="memberHasIdFront" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasIdFront(memberId);}" type="Boolean"/>
									<set field="memberHasIdBack" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasIdBack(memberId);}" type="Boolean"/>
									<set field="memberHasSignature" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasSignature(memberId);}" type="Boolean"/>
									<set field="memberHasTermsAndConditions" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasTermsAndConditions(memberId);}" type="Boolean"/>
									<set field="memberHasShareCapital" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasShareCapital(memberId);}" type="Boolean"/>
									<set field="memberHasMemberDeposit" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasMemberDeposit(memberId);}" type="Boolean"/>
									
								 -->

								<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasPhoto"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Photos - Please Add</label>
										</container>
									</widgets>
								</section>

									<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasIdFront"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Please  upload member's ID front </label>
										</container>
									</widgets>
								</section>
	
								<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasIdBack"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Please  upload member's ID Back </label>
										</container>
									</widgets>
								</section>
								
								
								
								<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasSignature"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Please  upload member's Signature </label>
										</container>
									</widgets>
								</section>
				<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasTermsAndConditions"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must check terms and conditions </label>
										</container>
									</widgets>
								</section>
			
				<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasShareCapital"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Share Capital Account </label>
										</container>
									</widgets>
								</section>
				
				<section>
									<condition>
										<if-compare-field operator="not-equals" to-field="trueStatus" field="memberHasMemberDeposit"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Member Deposits Account </label>
										</container>
									</widgets>
								</section>
								
								
								
								<section>
									<condition>
										<if-compare-field operator="equals" to-field="trueStatus" field="isMemberApproved"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member already approved (Active) </label>
										</container>
									</widgets>
								</section>
				
								<screenlet title="Approve Member ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ApproveMember"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listApproveMember"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- changeMember -->
	<screen name="changeMember">
		<section>
			<actions>
				<set field="titleProperty" value="Change Member Details" />
				<set field="headerItem" value="changeMember" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="changeMember" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<property-to-field field="defaultCountryGeoId"
					resource="general" property="KEN" default="KEN" />
				<set field="partyId" from-field="parameters.partyId" />

				<entity-one entity-name="Member" value-field="memberContext" />

				<set field="memberHasNominees" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasNominees(memberContext);}" type="String"/>
				<set field="memberHasReferees" value="${bsh:org.ofbiz.party.party.PartyServices.memberHasReferees(memberContext);}" type="String"/>

			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>
								<section>
									<condition>
										<if-compare operator="equals" value="N" field="memberHasNominees"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Nominees - Please Add</label>
										</container>
									</widgets>
								</section>

								<section>
									<condition>
										<if-compare operator="equals" value="N" field="memberHasReferees"/>
									</condition>
									<widgets>
										<container>

												<label style="h3"> Member must have Referees - Please Add</label>
										</container>
									</widgets>
								</section>



								<!-- ChangeMemberStation -->
								<screenlet title="Change Member Station for ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ChangeMemberStation"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listChangeMemberStation"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>

								<!-- ChangeMemberEmploymentType -->
								<screenlet title="Change Employment Type for ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ChangeMemberEmploymentType"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listChangeMemberEmploymentType"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<!-- ChangeMemberEmployeeNumber -->
								<screenlet title="Change Employee Number for ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ChangeMemberEmployeeNumber"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listChangeMemberEmployeeNumber"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<!-- ChangeMemberBranch -->
								<screenlet title="Change Branch for ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ChangeMemberBranch"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listChangeMemberBranch"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<!-- ChangeMemberShareAmount -->
								<screenlet title="Change ShareAmount for ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ChangeMemberShareAmount"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listChangeMemberShareAmount"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- End changeMember -->

	<!-- Approve Member End -->
	<!-- Reject Member -->
	<screen name="RejectMember">
		<section>
			<actions>
				<set field="titleProperty" value="Reject Member" />
				<set field="headerItem" value="RejectMember" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="rejectMember" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<property-to-field field="defaultCountryGeoId"
					resource="general" property="KEN" default="KEN" />
				<set field="partyId" from-field="parameters.partyId" />

				<entity-one entity-name="Member" value-field="memberContext" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>

								<screenlet
									title="Reject Member ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="RejectMember"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>

								<screenlet title="List">
									<include-form name="listRejectMember"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- Active Members -->
	<screen name="activemembers">
		<section>
			<actions>
				<set field="titleProperty" value="Active Members" />
				<set field="headerItem" value="activemembers" />
				<set field="tabButtonItem" value="findparty" />
				<set field="memberCtx" from-field="parameters" />

				<!-- service service-name="listSaccoMembers" auto-field-map="parameters"/ -->
				<!-- set field="statusName" value="ACTIVE" />
				<set field="memberStatusId"  value="${bsh:org.ofbiz.party.party.SaccoUtility.getMemberStatusID(statusName);}" global="true" type="Long"/ --> 
				
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<!-- platform-specific> <html><html-template location="component://party/webapp/partymgr/party/listsaccomembers.ftl"/></html>
									</platform-specific -->
								<screenlet title="Search Members">
									<include-form name="FindMemberActive"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="Members List">
									<include-form
										location="component://party/widget/partymgr/PartyForms.xml"
										name="activemembers" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- All Members -->
	<screen name="allmembers">
		<section>
			<actions>
				<set field="titleProperty" value="All Members" />
				<set field="headerItem" value="allmembers" />
				<set field="tabButtonItem" value="findparty" />
				<set field="memberCtx" from-field="parameters" />

				<!-- service service-name="listSaccoMembers" auto-field-map="parameters"/ -->
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<!-- platform-specific> <html><html-template location="component://party/webapp/partymgr/party/listsaccomembers.ftl"/></html>
									</platform-specific -->
								<screenlet title="Search Members">
									<include-form name="FindAllMembers"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="Members List">
									<include-form
										location="component://party/widget/partymgr/PartyForms.xml"
										name="allmembers" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- Branches -->
	<screen name="branches">
		<section>
			<actions>
				<set field="titleProperty" value="Branches" />
				<set field="headerItem" value="branches" />
				<set field="tabButtonItem" value="branches" />
				<set field="partyGroupCtx" from-field="parameters" />

				<!-- service service-name="listSaccoMembers" auto-field-map="parameters"/ -->
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck" main-action="VIEW" />
							</condition>
							<widgets>
								<!-- platform-specific> <html><html-template location="component://party/webapp/partymgr/party/listsaccomembers.ftl"/></html>
									</platform-specific -->
								<!-- screenlet title="Search Members">
									<include-form name="FindMemberActive"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet -->
								<container style="button-bar">
                                            <link target="addChaiBranch"  text="New Branch" style="buttontext create">
                                                <image url-mode="raw" src="${iconsLocation}/add.png"/>
                                            </link>
                                </container>
								<screenlet title="Branches List">
									<include-form location="component://party/widget/partymgr/PartyForms.xml" name="branches" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- Change Member Status -->
	<screen name="ChangeMemberStatus">
		<section>
			<actions>
				<set field="titleProperty" value="Change Member Status" />
				<set field="headerItem" value="ChangeMemberStatus" />
				<set field="displayPassword" value="Y" />
				<set field="target" value="createChangeMemberStatus" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<property-to-field field="defaultCountryGeoId"
					resource="general" property="KEN" default="KEN" />
				<set field="partyId" from-field="parameters.partyId" />

				<entity-one entity-name="Member" value-field="memberContext" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>

								<screenlet
									title="Change ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ChangeMemberStatus"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
								<screenlet title="List">
									<include-form name="listChangeMemberStatus"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="NewenumStaffStatus">
		<section>
			<actions>
				<set field="titleProperty" value="Staff Employment Status" />
				<set field="headerItem" value="enumStaffStatus" />
                <set field="tabButtonItem" value="enumStaffStatus"/>
				<set field="displayPassword" value="Y" />
				<set field="target" value="createEnumStaffStatus" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<!-- property-to-field field="defaultCountryGeoId" resource="general"
					property="KEN" default="KEN"/ -->
				<!-- set field="loanSecurityId" from-field="parameters.loanSecurityId"/ -->

				<!--set field="staffPayrollId" from-field="parameters.staffPayrollId"/ -->

				<entity-one entity-name="Enumeration" value-field="enumStaffStatusContext" />

			</actions>
			<widgets>
				<decorator-screen name="GlobalHRSettingsDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-has-permission permission="PARTYMGR"
									action="_CREATE" />
							</condition>
							<widgets>
								<screenlet title="New Staff Employment Status">
									<include-form name="NewenumStaffStatus"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>

						<section name="search-results">
							<widgets>
								<screenlet title="Staff Employment Status List">
									<include-form name="listenumStaffStatus"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- CSV and PDF -->
	<screen name="memberslistcsv">
		<section>
			<actions>
				<!-- set field="headerItem" value="ExampleMenuItem"/> <set field="titleProperty"
					value="PageTitleFindExample"/ -->
				<set field="headerItem" value="reviewmembers" />
				<set field="titleProperty" value="Members" />
				<set field="memberCtx" from-field="parameters" />
			</actions>
			<widgets>
				<screenlet>
					<include-form location="component://party/widget/partymgr/PartyForms.xml"
						name="printmembers" />
				</screenlet>
			</widgets>
		</section>
	</screen>

	<screen name="memberslistpdf">
		<section>
			<actions>
				<!-- set field="headerItem" value="ExampleMenuItem"/> <set field="titleProperty"
					value="PageTitleFindExample"/ -->
				<set field="headerItem" value="reviewmembers" />
				<set field="titleProperty" value="Members" />
				<set field="memberCtx" from-field="parameters" />
			</actions>
			<widgets>
				<decorator-screen name="FoReportDecorator"
					location="component://common/widget/CommonScreens.xml">
					<!-- decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}" -->
					<decorator-section name="body">

						<screenlet>
							<include-form location="component://party/widget/partymgr/PartyForms.xml"
								name="printmembers" />
						</screenlet>

					</decorator-section>
				</decorator-screen>

			</widgets>
		</section>
	</screen>

	<!-- Stations -->
	<screen name="viewstations">
		<section>
			<actions>
				<set field="titleProperty" value="Stations" />
				<set field="headerItem" value="viewstations" />
				<set field="tabButtonItem" value="viewstations" />
				<set field="stationCtx" from-field="parameters" />

				<!-- service service-name="listSaccoMembers" auto-field-map="parameters"/ -->
				<entity-one value-field="branch" entity-name="PartyGroup">
					<field-map field-name="partyId" from-field="parameters.partyId"/>
				</entity-one>
				<set field="branchId" from-field="parameters.partyId"/>

				 <entity-condition list="employerList" entity-name="Employer">
                	<order-by field-name="name"/>
                </entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
								<!-- platform-specific> <html><html-template location="component://party/webapp/partymgr/party/listsaccomembers.ftl"/></html>
									</platform-specific -->
								<!-- screenlet title="Search Members">
									<include-form name="FindMemberActive"
										location="component://party/widget/partymgr/PartyForms.xml" />
								</screenlet -->
								<screenlet>
									<container>
										<label style="h3">${branch.groupName} Stations
										</label>
									</container>
								</screenlet>
								<screenlet title="Add station to ${branch.groupName} ">
									<include-form
										location="component://party/widget/partymgr/PartyForms.xml"
										name="NewStation" />
								</screenlet>
								<screenlet title="${branch.groupName} Stations List">
									<include-form
										location="component://party/widget/partymgr/PartyForms.xml"
										name="listStations" />
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<!-- memberTypes -->
	<screen name="memberTypes">
        <section>
            <actions>
                <set field="titleProperty" value="Create Member Type"/>
                <set field="headerItem" value="memberTypes"/>
                <set field="tabButtonItem" value="memberTypes" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createMemberType"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New Member Type">
                                    <include-form name="NewMemberType" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="Member Types">
                        			<include-form name="listMemberType" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- MemberClass -->
    <screen name="MemberClass">
        <section>
            <actions>
                <set field="titleProperty" value="Create MemberClass"/>
                <set field="headerItem" value="MemberClass"/>
                <set field="tabButtonItem" value="MemberClass" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createMemberType"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New MemberClass">
                                    <include-form name="MemberClass" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="MemberClass">
                        			<include-form name="listMemberClass" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- MemberStatus -->
        <screen name="MemberStatus">
        <section>
            <actions>
                <set field="titleProperty" value="Create MemberStatus"/>
                <set field="headerItem" value="MemberStatus"/>
                <set field="tabButtonItem" value="MemberStatus" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createMemberStatus"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New MemberStatus">
                                    <include-form name="MemberStatus" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="MemberStatus">
                        			<include-form name="listMemberStatus" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- Salutation -->
        <screen name="Salutation">
        <section>
            <actions>
                <set field="titleProperty" value="Create Salutation"/>
                <set field="headerItem" value="Salutation"/>
                <set field="tabButtonItem" value="Salutation" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createSalutation"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New Salutation">
                                    <include-form name="Salutation" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="Salutation">
                        			<include-form name="listSalutation" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- MaritalStatus -->
        <screen name="MaritalStatus">
        <section>
            <actions>
                <set field="titleProperty" value="Create MaritalStatus"/>
                <set field="headerItem" value="MaritalStatus"/>
                <set field="tabButtonItem" value="MaritalStatus" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createMaritalStatus"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New MaritalStatus">
                                    <include-form name="MaritalStatus" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="MaritalStatus">
                        			<include-form name="listMaritalStatus" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

	<!-- 
		RecruitingAgent
		
	 -->
	         <screen name="RecruitingAgent">
        <section>
            <actions>
                <set field="titleProperty" value="Create RecruitingAgent"/>
                <set field="headerItem" value="RecruitingAgent"/>
                <set field="tabButtonItem" value="RecruitingAgent" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createRecruitingAgent"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New RecruitingAgent">
                                    <include-form name="RecruitingAgent" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="MaritalStatus">
                        			<include-form name="listRecruitingAgent" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	 <!-- 
	 	EmploymentType
		
	  -->
	          <screen name="EmploymentType">
        <section>
            <actions>
                <set field="titleProperty" value="Create EmploymentType"/>
                <set field="headerItem" value="EmploymentType"/>
                <set field="tabButtonItem" value="EmploymentType" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createEmploymentType"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New EmploymentType">
                                    <include-form name="EmploymentType" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="EmploymentType">
                        			<include-form name="listEmploymentType" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	  
	  <!-- 
	  	Gender
	   -->
	           <screen name="Gender">
        <section>
            <actions>
                <set field="titleProperty" value="Create Gender"/>
                <set field="headerItem" value="Gender"/>
                <set field="tabButtonItem" value="Gender" />
                <set field="displayPassword" value="Y"/>
                <set field="target" value="createGender"/>
                <set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_"/>
                <!-- property-to-field field="defaultCountryGeoId" resource="general" property="KEN" default="KEN"/ -->
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>

                            <widgets>
                            	<screenlet>
									<include-menu location="component://party/widget/partymgr/PartyMenus.xml"
										name="MemberGlobalTabBar" />
								</screenlet>
                                <screenlet title="New Gender">
                                    <include-form name="Gender" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}</label>
                            </fail-widgets>
                        </section>

                        <section name="search-results">
                        	<widgets>
                        		<screenlet title="Gender">
                        			<include-form name="listGender" location="component://party/widget/partymgr/PartyForms.xml"/>
                        		</screenlet>
                        	</widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
        <screen name="memberRegistrationByDate">
        <section>
            <actions>
                <set field="headerItem" value="memberRegistrationByDate" />
                <set field="tabButtonItem" value="memberRegistrationByDate" />
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <!-- include-menu name="MemberReportsTabBar" location="component://party/widget/partymgr/PartyMenus.xml"/ -->
                        <!-- container style="lefthalf">
                            <screenlet title="Member Listing Report">
                                <include-form name="memeberListingForm" location="component://party/widget/partymgr/MemberReportForms.xml"/>
                            </screenlet>
                        </container -->
                        <!-- style="righthalf" -->
                        <container>
                            <screenlet title="Member Registartion By Date">
                                <include-form name="memberRegistrationByDate" location="component://party/widget/partymgr/PartyForms.xml"/>
                            </screenlet>
                        </container>
                        <container style="clear"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
     <screen name="memberRegistrationByDatePDF">
        <section>
            <actions>
                <set field="viewSize" value="99999"/>
                <!-- script location="component://party/webapp/partymgr/WEB-INF/actions/reports/loanDetails.groovy"/ -->
                <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/memberRegistrationByDateReport.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="SimpleDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <!-- xsl-fo><html-template location="component://party/webapp/partymgr/member/reports/loanDetails.fo.ftl"/></xsl-fo -->
                            <xsl-fo><html-template location="component://party/webapp/partymgr/reports/memberRegistrationByDateReport.fo.ftl"/></xsl-fo>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
        </screen>
        
        <screen name="memberRegistrationByDateExcelForm">
        <section>
            <actions>
                <set field="headerItem" value="memberRegistrationByDateExcelForm" />
                <set field="tabButtonItem" value="memberRegistrationByDateExcelForm" />
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <!-- include-menu name="MemberReportsTabBar" location="component://party/widget/partymgr/PartyMenus.xml"/ -->
                        <!-- container style="lefthalf">
                            <screenlet title="Member Listing Report">
                                <include-form name="memeberListingForm" location="component://party/widget/partymgr/MemberReportForms.xml"/>
                            </screenlet>
                        </container -->
                        <!-- style="righthalf" -->
                        <container>
                            <screenlet title="Member Registartion By Date">
                                <include-form name="memberRegistrationByDateExcelForm" location="component://party/widget/partymgr/PartyForms.xml"/>
                            </screenlet>
                              <screenlet title="Reports On Gender">
                                <include-form name="memberBioDetailsExcel" location="component://loanmanagementreports/widget/LoanManagementReportsForms.xml"/>
                            </screenlet>
                            
                        </container>
                        <container style="clear"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="MemberStatusByDate">
        <section>
            <actions>
                <set field="headerItem" value="MemberStatusByDate" />
                <set field="tabButtonItem" value="MemberStatusByDate" />
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <container>
                            <screenlet title="Member Status As At">
                                <include-form name="MemberStatusByDate" location="component://party/widget/partymgr/PartyForms.xml"/>
                            </screenlet>
                        </container>
                        <container style="clear"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- memberRegistrationByDateExcel -->
    <screen name="memberRegistrationByDateExcel">
        <section>
           <actions>
                <set field="viewSize" value="99999"/>
                <!-- script location="component://party/webapp/partymgr/WEB-INF/actions/reports/loanDetails.groovy"/ -->
               <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/memberRegistrationByDateReport.groovy"/>
           </actions>
           <widgets>

                <include-form name="listMembersByDate" location="component://party/widget/partymgr/PartyForms.xml"/>
            </widgets>
        </section>
    </screen>


    <!-- MemberStatusByDateCSV -->
    <screen name="MemberStatusByDateCSV">
        <section>
           <actions>
                <set field="viewSize" value="99999"/>
               <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/memberStatusByDate.groovy"/>
           </actions>
           <widgets>
                <include-form name="MemberStatusByDateCSV" location="component://party/widget/partymgr/PartyForms.xml"/>
            </widgets>
        </section>
    </screen>
    
    <!-- memberPrintout -->
    
    	 <screen name="memberPrintout">
        <section>
            <actions>
                <set field="viewSize" value="99999"/>
                <!-- script location="component://party/webapp/partymgr/WEB-INF/actions/reports/loanDetails.groovy"/ -->
                <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/memberPrintout.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="SimpleDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <!-- xsl-fo><html-template location="component://party/webapp/partymgr/member/reports/loanDetails.fo.ftl"/></xsl-fo -->
                            <xsl-fo><html-template location="component:/party/webapp/partymgr/reports/memberPrintout.fo.ftl"/></xsl-fo>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="viewprofileLogs">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleViewPartyProfile" />
				<set field="tabButtonItem" value="viewprofile" />
				<set field="labelTitleProperty" value="PartyTaxAuthInfos" />
				<set field="partyId" from-field="parameters.partyId" />
				<!-- set field="layoutSettings.javaScripts[]" value="/partymgr/js/PartyProfileContent.js"
					global="true" / -->
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/ViewProfile.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="CommonPartyReducedDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<if-empty field="partyId" />
									<not>
										<if-empty field="parameters.telno" />
									</not>
								</and>
							</condition>
							<actions>
								<service service-name="findPartyFromTelephone"
									auto-field-map="true" result-map="telnoMap" />
								<entity-one entity-name="Party" value-field="party">
									<field-map field-name="partyId" from-field="telnoMap.partyId" />
								</entity-one>
								<set field="parameters.partyId" from-field="party.partyId" />
							</actions>
							<widgets />
						</section>
						<section>
							<condition>
								<and>
									<if-empty field="partyId" />
									<not>
										<if-empty field="parameters.email" />
									</not>
								</and>
							</condition>
							<actions>
								<service service-name="findPartyFromEmailAddress"
									result-map="emailMap">
									<field-map field-name="address" from-field="parameters.email" />
								</service>
								<entity-one entity-name="Party" value-field="party">
									<field-map field-name="partyId" from-field="emailMap.partyId" />
								</entity-one>
								<set field="parameters.partyId" from-field="party.partyId" />
							</actions>
							<widgets />
						</section>
						<section>
							<condition>
								<not>
									<if-empty field="party" />
								</not>
							</condition>
							<widgets>
								<section>
									<condition>
										<if-compare field="showOld" operator="equals"
											value="true" type="Boolean" />
									</condition>
									<widgets>
										<container style="button-bar button-style-2">
											<link target="viewprofile" text="${uiLabelMap.PartyHideOld}">
												<parameter param-name="partyId" from-field="party.partyId" />
											</link>
										</container>
									</widgets>
									<fail-widgets>
										<container style="button-bar button-style-2">
											<link target="viewprofile" text="${uiLabelMap.PartyShowOld}">
												<parameter param-name="partyId" from-field="party.partyId" />
												<parameter param-name="SHOW_OLD" value="true" />
											</link>
										</container>
									</fail-widgets>
								</section>
								<section>
									<widgets>
										<include-portal-page id="PartyProfile" />
									</widgets>
								</section>
							</widgets>
							<fail-widgets>
								<container>
									<label style="h3">${uiLabelMap.PartyNoPartyFoundWithPartyId}:
										${parameters.partyId}</label>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="MemberWithdrawalBTWDates">
        <section>
            <actions>
                <set field="headerItem" value="MemberWithdrawalBTWDates" />
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                             <screenlet title="Members Withdrawals Captured Between dates">
                                <include-form name="MemberWithdrawalBTWDates" location="component://party/widget/partymgr/PartyForms.xml"/>
                             </screenlet>
                        <container style="clear"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	
 <screen name="MemberWithdrawalBTWDatesExcel">
        <section>
           <actions>
                <set field="viewSize" value="99999"/>
                <!-- script location="component://party/webapp/partymgr/WEB-INF/actions/reports/loanDetails.groovy"/ -->
              <!--  <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/memberRegistrationByDateReport.groovy"/> -->
                <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/MemberWithdrawalBTWDatesExcel.groovy"/>
           </actions>
           <widgets>

               <!--  <include-form name="listMembersByDate" location="component://party/widget/partymgr/PartyForms.xml"/> -->
                <include-form name="listWithDrawMembersByDate" location="component://party/widget/partymgr/PartyForms.xml"/>
            </widgets>
        </section>
    </screen>

<!-- Vijana Tuinvest Screen -->

	<screen name="vijanaTuinvest">
		<section>
			<actions>
				<set field="titleProperty" value="List Sacco Members" />
				<set field="headerItem" value="vijanaTuinvest" />
<!-- 				<set field="tabButtonItem" value="findparty" />
 -->				
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
							<screenlet>
							<container>
							     <link target="PrintMembers"></link>
                               </container>
							</screenlet>
							
						  <screenlet title="Print Members">
							      <container>
							         <include-form name="printMembers"
										location="component://party/widget/partymgr/PartyForms.xml" />
							      </container>
							    </screenlet> 
							<label style="h1" text="Vijana Tu-Invest"></label>
							<screenlet title="Search Vijana Tu-invest">
							  <include-form location="component://party/widget/partymgr/PartyForms.xml" name="findVijanaTuinvest"/>
							</screenlet>
								  <include-form location="component://party/widget/partymgr/PartyForms.xml" name="vijanaTuinvestForm"/>
							</widgets>
							<fail-widgets>
								<label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}" />
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	
	<screen name="addVijanaTiunvestMember">
		<section>
			<actions>
				<set field="headerItem" value="vijanaTuinvest"/>
				<set field="tabButtonItem" value="vijanaTuinvest" />
				<set field="displayPassword" value="Y" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one value-field="party" entity-name="Member">
					<field-map field-name="partyId" value="${partyId}" />
				</entity-one>
			   <entity-one entity-name="VijanaTuinvest" value-field="vijanaTuinvestContext" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
									<label style="h1">Add Members For ${party.firstName} ${party.lastName} </label>
								<screenlet title="Adding Members">
                                      <include-form location="component://party/widget/partymgr/PartyForms.xml" name="addMembersTovijanaTuinvestForm"/>
								</screenlet>
								<label style="h1" text="Members"></label>
								<screenlet title="Adding Members">
                                      <include-form location="component://party/widget/partymgr/PartyForms.xml" name="listMembersForijanaTuinvest"/>
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
						<section name="search-results">
							<widgets>
								
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	
	
	<!-- view signitaries -->
	
		<screen name="viewSignitaries">
		<section>
			<actions>
				<set field="headerItem" value="vijanaTuinvest"/>
				<set field="tabButtonItem" value="vijanaTuinvest" />
				<set field="displayPassword" value="Y" />
				<set field="partyId" from-field="parameters.partyId" />
				<entity-one value-field="party" entity-name="Member">
					<field-map field-name="partyId" value="${partyId}" />
				</entity-one>
			   <entity-one entity-name="VijanaTuinvest" value-field="vijanaTuinvestContext" />
			  <!--  <entity-condition list="VijanaTuinvestList" entity-name="VijanaTuinvest"><condition-expr field-name="isSignitary" operator="equals" value="Y"/></entity-condition>
			   <entity-condition list="memberLi" entity-name="Member"><condition-expr field-name="partyId" operator="equals" from-field="partyId"/></entity-condition> -->
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<!-- do check for PARTYMGR, _VIEW permission -->
							<condition>
								<if-service-permission service-name="partyBasePermissionCheck"
									main-action="VIEW" />
							</condition>
							<widgets>
									<label style="h1">Signatories  For ${party.firstName} ${party.lastName} </label>
								
								<screenlet title="Signatories ">
                                      <include-form location="component://party/widget/partymgr/PartyForms.xml" name="signatoriesMembersForijanaTuinvest"/>
								</screenlet>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.PartyMgrCreatePermissionError}
								</label>
							</fail-widgets>
						</section>
						<section>
							<widgets>
								
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	
	 <screen name="printMemberVijanaCSV">
        <section>
           <actions>
                <set field="viewSize" value="99999"/>
                <script location="component://party/webapp/partymgr/WEB-INF/actions/reports/printMemberVijanaCSV.groovy"/>
           </actions>
           <widgets>

               <!--  <include-form name="listMembersByDate" location="component://party/widget/partymgr/PartyForms.xml"/> -->
                <include-form name="printMemberVijanaCSVForm" location="component://party/widget/partymgr/PartyForms.xml"/>
            </widgets>
        </section>
    </screen>

</screens>
