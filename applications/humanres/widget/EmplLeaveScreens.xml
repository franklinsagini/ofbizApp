<?xml version="1.0" encoding="UTF-8"?>
<!-- Licensed to the Apache Software Foundation (ASF) under one or more contributor
	license agreements. See the NOTICE file distributed with this work for additional
	information regarding copyright ownership. The ASF licenses this file to
	you under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of
	the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required
	by applicable law or agreed to in writing, software distributed under the
	License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
	OF ANY KIND, either express or implied. See the License for the specific
	language governing permissions and limitations under the License. -->

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">
	<screen name="EmplCarryOverLost">
        <section>
            <actions>
				<set field="titleProperty" value="HumanResFindEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="CloseFinacialYear" />
				<set field="carryoverLostCtx" from-field="parameters"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />
			<entity-condition entity-name="EmplCarryOverLost" list="listIt"></entity-condition>

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>

                            <widgets>
                            <section>
								<widgets>
									<container style="button-bar">
										<link target="closeFinacialYear" text="${uiLabelMap.HumanResCloseYr}"
											style="buttontext create" />
										<!-- <link target="resetUnusedCarryOver" text="${uiLabelMap.HumanResResetUnusedLeave}"
											style="buttontext create" /> -->
									</container>
								</widgets>
							</section>
                              <screenlet title="Search Carry Over And Lost Leave Balances">
                                        <include-form name="FindCarryOverLost"	location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>
                                <screenlet title="List Carry Over And Lost Leave Balances">
                                <include-form name="ListCarryOverLost"	location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="LeaveBalances">
        <section>
            <actions>
				<set field="titleProperty" value="HumanResFindEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="LeaveBalances" />
				<set field="leaveBalanceCtx" from-field="parameters"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />
			<entity-condition entity-name="LeavesBalanceView" list="listIt"></entity-condition>

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>

                            <widgets>
                              <screenlet title="Search Leave Balances">
                                        <include-form name="FindLeaveBalances"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>


                                <screenlet title="Leave Balances">
                                <include-form name="ListAllLeaveBalances"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                                </screenlet>



                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="activeleavespdf">
                <section>
                        <actions>
             <set field="today" value="${nowTimestamp}" type="Date"/>
			<!-- <entity-condition entity-name="EmplLeave"></entity-condition> -->
			 <entity-condition entity-name="EmplLeave" list="EmplLeave">
				  <condition-list>
				<!-- 	 <condition-expr field-name="responsibleEmployee"
						operator="equals" from-field="userLogin.partyId" /> -->
					<condition-expr field-name="fromDate" operator="less-equals"
						from-field="today" />
					<condition-expr field-name="thruDate" operator="greater-equals"
						from-field="today" />
					<condition-expr field-name="applicationStatus" operator="equals"
						value="Approved" />
				</condition-list>
			</entity-condition>
			<set field="viewSize" value="100000"/>

                        </actions>
                        <widgets>
                         <decorator-screen name="FoReportDecorator"
                            location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="body">
                                <include-form name="ActivelLeavescsv"
                        location="component://humanres/widget/forms/EmplLeaveForms.xml"/>
                                        </decorator-section>
                                </decorator-screen>
                        </widgets>
                </section>
        </screen>
    <screen name="activeleavescsv">
        <section>
            <actions>
            <set field="viewSize" value="100000"/>
			<set field="today" value="${nowTimestamp}" type="Date"/>
			<!-- <entity-condition entity-name="EmplLeave"></entity-condition> -->
			 <entity-condition entity-name="EmplLeave" list="EmplLeave">
				  <condition-list>
					<condition-expr field-name="fromDate" operator="less-equals"
						from-field="today" />
					<condition-expr field-name="thruDate" operator="greater-equals"
						from-field="today" />
					<condition-expr field-name="applicationStatus" operator="equals"
						value="Approved" />

				</condition-list>
			</entity-condition>
            </actions>
            <widgets>

                <!-- decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                   <decorator-section name="body" -->

                        <section name="ActiveLeaves">
                                <widgets>
                                        <screenlet title="List Activel Leaves">
                                                <include-form name="ActivelLeavescsv" location="component://humanres/widget/forms/EmplLeaveForms.xml"/>
                                        </screenlet>
                                </widgets>
                        </section>
                    <!-- /decorator-section>
               </decorator-screen -->
            </widgets>
        </section>
    </screen>


	<screen name="ActiveEmplLeaves">
        <section>
            <actions>
				<set field="titleProperty" value="HumanResFindEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="ActiveEmplLeaves" />
				<set field="leaveCtx" from-field="parameters"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />
			<set field="today" value="${nowTimestamp}" type="Date"/>
			<!-- <entity-condition entity-name="EmplLeave"></entity-condition> -->
			 <entity-condition entity-name="EmplLeave" list="EmplLeave">
				  <condition-list>
					<condition-expr field-name="fromDate" operator="less-equals"
						from-field="today" />
					<condition-expr field-name="thruDate" operator="greater-equals"
						from-field="today" />
					<condition-expr field-name="applicationStatus" operator="equals"
						value="Approved" />
				</condition-list>
				<order-by field-name="leaveId"/>
			</entity-condition>

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>

                            <widgets>
                              <screenlet title="Search Active Leaves">
                                        <include-form name="FindActiveLeaves"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>
                                <screenlet title="Active Leaves List">
                                <include-form name="ListActivelLeaves"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                                 </screenlet>

                                 <screenlet>
                                 	<link target="activeleaves.csv" text="Export Excel" style="buttontext">
                                                <parameter param-name="partyId"/>

                                                <image url-mode="raw" src="${iconsLocation}/page_excel.png"/>
                                            </link>
                                            <link target="activeleaves.pdf" text="Export Pdf" style="buttontext">
                                                <parameter param-name="partyId"/>
                                                <image url-mode="raw" src="${iconsLocation}/page_white_acrobat.png"/>

                                            </link>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>



    <screen name="callBackEmployee">
        <section>
            <actions>
				<set field="titleProperty" value="HumanResFindEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="ActiveEmplLeaves" />

				<set field="leaveCtx" from-field="parameters"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />
			<set field="today" value="${nowTimestamp}" type="Date"/>
			<!-- <entity-condition entity-name="EmplLeave"></entity-condition> -->
			 <entity-condition entity-name="EmplLeave" list="EmplLeave">
				  <condition-list>
				<!-- 	 <condition-expr field-name="responsibleEmployee"
						operator="equals" from-field="userLogin.partyId" /> -->
					<condition-expr field-name="fromDate" operator="less-equals"
						from-field="today" />
					<condition-expr field-name="thruDate" operator="greater-equals"
						from-field="today" />
					<condition-expr field-name="applicationStatus" operator="equals"
						value="Approved" />
				</condition-list>
			</entity-condition>

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>

                            <widgets>
                              <screenlet title="Employee Call Back">
                                        <include-form name="EmployeeCallBack"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>

                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>


     <screen name="resetEmployeeLeaveDaysLost">
        <section>
            <actions>
				<set field="titleProperty" value="HumanResFindEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="LeaveBalances" />
				<set field="leaveCtx" from-field="parameters"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>

                            <widgets>
                              <screenlet title="Reset Staff Leave Days Lost">
                                        <include-form name="ResetStaffLeaveDaysLost"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>

                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>


	  <screen name="FindEmplLeaves">
        <section>
            <actions>
                <set field="thruDate" from-field="parameters.thruDate" />
				<set field="titleProperty" value="HumanResFindEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="EmployeeLeave" />
				<set field="leaveCtx" from-field="parameters"/>
<!-- 				<set field="partyId" from-field="userLogin.partyId"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service> -->
				<!-- <set field="hasAdminPermission" from-field="permResult.hasPermission" /> -->
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />

				<entity-condition entity-name="EmplLeave" list="EmplLeave">
        			<condition-expr field-name="partyId" operator="equals" from-field="userLogin.partyId"/>
        	</entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
<!--                             <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition> -->

                            <widgets>
										<section>
											<widgets>
												<container style="button-bar">
													<link target="EditEmplLeave" text="${uiLabelMap.HumanResNewLeave}"
														style="buttontext create" />
												</container>
											</widgets>
										</section>
                              <screenlet title="Search My Leaves">
                                        <include-form name="FindEmplLeaves"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>
                                <screenlet title="My Leaves List">
                              <include-form name="ListEmplLeaves"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />

											<!--  <include-form name="ListEmplLeavesForUpdateAndDelete"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" /> -->
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

     <screen name="FindLeaveApprovals">
        <section>
            <actions>
            	<set field="titleProperty" value="PageTitleFindApprovals" />
				<set field="tabButtonItem" value="Approval" />
				<set field="headerItem" value="Leave" />
				<set field="responsibleEmployee" value="${userLogin.partyId}"/>

				<set field="leaveApprovalCtx" from-field="parameters"/>

						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />
			<entity-condition entity-name="EmplLeave" list="listIt">
					<condition-expr field-name="responsibleEmployee"
						operator="equals" from-field="${userLogin.partyId}" />
			</entity-condition>

			<entity-one entity-name="Party" value-field="party">
				<field-map field-name="partyId" from-field="userLogin.partyId"/>
			</entity-one>

			<set field="organizationUnitId" value="${bsh:org.ofbiz.humanres.LeaveServices.getEmplUnit(party);}"/>

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <!-- do check for PARTYMGR, _VIEW permission -->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>

                            <widgets>
	                         <screenlet title="Search Leaves">
                                        <include-form name="FindLeaveApprovals"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>
                                <screenlet title="Leaves List">
                                <include-form name="ListLeaveApprovals"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>




                            <!--  FOR CHAI HOME -->

      <screen name="LeaveApprovals">
        <section>
            <actions>
            	<set field="titleProperty" value="PageTitleFindApprovals" />
				<set field="tabButtonItem" value="LeaveApprovals" />
				<set field="headerItem" value="EmployeeLeave" />
				<set field="responsibleEmployee" value="${userLogin.partyId}"/>
                
				<set field="leaveApprovalCtx" from-field="parameters"/>

						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />
			<entity-condition entity-name="EmplLeave" list="listIt">
					<condition-expr field-name="responsibleEmployee"
						operator="equals" from-field="${userLogin.partyId}" />
			</entity-condition>

			<entity-one entity-name="Party" value-field="party">
				<field-map field-name="partyId" from-field="userLogin.partyId"/>
			</entity-one>

			<set field="organizationUnitId" value="${bsh:org.ofbiz.humanres.LeaveServices.getEmplUnit(party);}"/>

            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                						<decorator-section name="pre-body">
						<include-menu name="UniversalEmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
	                         <screenlet title="Search Leaves">
                                        <include-form name="FindLeaveApprovals"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                            	</screenlet>
                                <screenlet title="Leaves List">
                                <include-form name="ListLeaveApprovals"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
                                </screenlet>
                               
                            </widgets>
                            <fail-widgets>
                                <label style="h3" text="${uiLabelMap.PartyMgrViewPermissionError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>





	<screen name="EditEmplLeave">
		<section>
			<actions>
				<set field="titleProperty" value="HumanResEditEmplLeave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="EmployeeLeave" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="leaveTypeId" from-field="parameters.leaveTypeId" />
				<set field="fromDate" from-field="parameters.fromDate" />
				<set field="thruDate" from-field="parameters.thruDate" />
				<entity-one entity-name="EmplLeave" value-field="leaveApp"
					auto-field-map="false">
					<field-map field-name="partyId" from-field="partyId" />
					<field-map field-name="leaveTypeId" from-field="leaveTypeId" />
					<field-map field-name="fromDate" from-field="fromDate" />
					<field-map field-name="thruDate" from-field="thruDate" />
				</entity-one>
				<entity-one entity-name="Person" value-field="person">
				<field-map field-name="partyId" from-field="userLogin.partyId"/>
				</entity-one>
			<set field="appointmentdate" value="${bsh:org.ofbiz.humanres.LeaveServices.getLeaveAppointmentDate(person);}"/>
			<set field="organizationUnitId" value="${bsh:org.ofbiz.humanres.LeaveServices.getEmplUnit(person);}"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />

							<section>
											<widgets>
												<container style="button-bar">
													<link target="EditEmplLeave" text="Refresh Page"
														style="buttontext create" />
												</container>
											</widgets>
										</section>

						<screenlet id="AddEmplLeavePanel" title="${uiLabelMap.HumanResAddEmplLeave}"
							collapsible="true">
							<include-form name="EditEmplLeave"
								location="component://humanres/widget/forms/EmplLeaveForms.xml" />
						</screenlet>
						<!-- <screenlet id="AddEmplLeavePanel2" title="Leave list"
							collapsible="true">
							<include-form name="ListEmplLeaves"
								location="component://humanres/widget/forms/EmplLeaveForms.xml" />
						</screenlet> -->
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditEmplLeaveStatus">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleEditApprovalStatus" />
				<set field="tabButtonItem" value="Approval" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="leaveTypeId" from-field="parameters.leaveTypeId" />
				<set field="fromDate" from-field="parameters.fromDate" />
				<entity-one entity-name="EmplLeave" value-field="leaveApp"
					auto-field-map="false">
					<field-map field-name="partyId" from-field="partyId" />
					<field-map field-name="leaveTypeId" from-field="leaveTypeId" />
					<field-map field-name="fromDate" from-field="fromDate" />
				</entity-one>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
						<screenlet id="EditEmplLeaveStatus"
							title="${uiLabelMap.HumanResEditLeaveApprovalStatus}"
							collapsible="true">
							<include-menu location="component://humanres/widget/HumanresMenus.xml"
								name="ApproveReject" />


							<include-form name="approveEmplLeaveStatus"
								location="component://humanres/widget/forms/EmplLeaveForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="viewEmplLeaveDetails">
		<section>
			<actions>
				<property-map resource="HumanResUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="findLeaveApprovals" />
				<!-- <set field="tabButtonItem" value="invoiceOverview" /> -->
				<set field="partyId" from-field="parameters.partyId" />
				<set field="fromDate" from-field="parameters.fromDate" />
				<set field="leaveTypeId" from-field="parameters.leaveTypeId" />
				<set field="leaveId" from-field="parameters.leaveId" />

				<entity-one entity-name="EmplLeaveView" value-field="empleave" />
				<entity-and entity-name="EmplLeave" list="emplLeaves">
					<field-map from-field="parameters.partyId" field-name="partyId" />
					<field-map from-field="parameters.fromDate" field-name="fromDate" />
					<field-map from-field="parameters.leaveTypeId" field-name="leaveTypeId" />
					<field-map from-field="parameters.leaveId" field-name="leaveId" />
					<!-- <order-by field-name="leaveId" /> -->
				</entity-and>
				<entity-and entity-name="LeaveStatusLog" list="leaveLogs">
					<field-map from-field="parameters.partyId" field-name="partyId" />
					<!-- <field-map from-field="parameters.leaveId" field-name="leaveId" /> -->
				</entity-and>
				<entity-and entity-name="EmplLeave" list="listIt">
					<field-map from-field="parameters.partyId" field-name="partyId" />
				</entity-and>
				<entity-one entity-name="Person" value-field="memberContext"/>

			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
						<section>
							<widgets>
								<screenlet>

						<container style="button-bar">
						<!-- <link target="forwardApplication" style="buttontext create" text="APPROVE EMPLOYEE LEAVE"  height="500" width="500">
                		<parameter param-name="partyId"/>
                		<parameter param-name="fromDate"/>
                		<parameter param-name="leaveTypeId"/>
                		<parameter param-name="leaveId" />
            			</link> -->

						 <link target="approveApplication" style="buttontext create" text="APPROVE EMPLOYEE LEAVE"  height="500" width="500">
                		<parameter param-name="leaveId" />
            			</link>

						<link target="popup" link-type="ajax-window" height="400" width="700" text="REJECT EMPLOYEE LEAVE" style="buttontext create">
						<parameter param-name="partyId"/>
                        <parameter param-name="fromDate"/>
                        <parameter param-name="leaveTypeId"/>
                         <parameter param-name="leaveId" />
						</link>
						</container>

						<container style="button-bar">

						</container>
								</screenlet>
								<screenlet title="${uiLabelMap.StaffLeaveDetails} : ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ListMyLeaves"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
								<screenlet>

								</screenlet>
								<!-- <container style="lefthalf">
									<screenlet title="${uiLabelMap.HumanResStaffHistory} : ${memberContext.firstName} ${memberContext.lastName}"
										navigation-form-name="ListEmplLeaves">
										<include-form name="ListEmplLeaves"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
									</screenlet>
								</container> -->
							<!-- 	<container style="righthalf">
									<screenlet title="${uiLabelMap.LeaveLogs} : ${memberContext.firstName} ${memberContext.lastName}"					navigation-form-name="ListLeaveLogs">
										<include-form name="ListLeaveLogs"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
									</screenlet>
								 </container>  -->
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>



	<screen name="viewEmplLeaveDetailsForHome">
		<section>
			<actions>
				<property-map resource="HumanResUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="findLeaveApprovals" />
				<!-- <set field="tabButtonItem" value="invoiceOverview" /> -->
				<set field="partyId" from-field="parameters.partyId" />
				<set field="fromDate" from-field="parameters.fromDate" />
				<set field="leaveTypeId" from-field="parameters.leaveTypeId" />
				<set field="leaveId" from-field="parameters.leaveId" />

				<entity-one entity-name="EmplLeaveView" value-field="empleave" />
				<entity-and entity-name="EmplLeave" list="emplLeaves">
					<field-map from-field="parameters.partyId" field-name="partyId" />
					<field-map from-field="parameters.fromDate" field-name="fromDate" />
					<field-map from-field="parameters.leaveTypeId" field-name="leaveTypeId" />
					<field-map from-field="parameters.leaveId" field-name="leaveId" />
					<!-- <order-by field-name="leaveId" /> -->
				</entity-and>
				<entity-and entity-name="LeaveStatusLog" list="leaveLogs">
					<field-map from-field="parameters.partyId" field-name="partyId" />
					<!-- <field-map from-field="parameters.leaveId" field-name="leaveId" /> -->
				</entity-and>
				<entity-and entity-name="EmplLeave" list="listIt">
					<field-map from-field="parameters.partyId" field-name="partyId" />
				</entity-and>
				<entity-one entity-name="Person" value-field="memberContext"/>

			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="UniversalEmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
						<section>
							<widgets>
								<screenlet>

						<container style="button-bar">

						 <link target="approveApplication" style="buttontext create" text="APPROVE EMPLOYEE LEAVE"  height="500" width="500">
                		<parameter param-name="leaveId" />
            			</link>

						<link target="popup" link-type="ajax-window" height="400" width="700" text="REJECT EMPLOYEE LEAVE" style="buttontext create">
						<parameter param-name="partyId"/>
                        <parameter param-name="fromDate"/>
                        <parameter param-name="leaveTypeId"/>
                         <parameter param-name="leaveId" />
						</link>
						</container>

						<container style="button-bar">

						</container>
								</screenlet>
								<screenlet title="${uiLabelMap.StaffLeaveDetails} : ${memberContext.firstName} ${memberContext.lastName}">
									<include-form name="ListMyLeaves"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
                                <screenlet title="Leave Balances">
                                <include-form location="component://humanres/widget/forms/EmplLeaveForms.xml" name="ListPerApproverLeaveBalances"/>
                                </screenlet>
								<!-- <container style="lefthalf">
									<screenlet title="${uiLabelMap.HumanResStaffHistory} : ${memberContext.firstName} ${memberContext.lastName}"
										navigation-form-name="ListEmplLeaves">
										<include-form name="ListEmplLeaves"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
									</screenlet>
								</container> -->
							<!-- 	<container style="righthalf">
									<screenlet title="${uiLabelMap.LeaveLogs} : ${memberContext.firstName} ${memberContext.lastName}"					navigation-form-name="ListLeaveLogs">
										<include-form name="ListLeaveLogs"
											location="component://humanres/widget/forms/EmplLeaveForms.xml" />
									</screenlet>
								 </container>  -->
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>







	<screen name="StaffOpeningBalance">
		<section>
			<actions>
				<set field="titleProperty" value="leave" />
				<set field="headerItem" value="openingLeaveBalance" />
				<set field="tabButtonItem" value="openingLeaveBalance" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<entity-one entity-name="EmplLeaveOpeningBalance" value-field="OpeningLeaveBalanceContext" />
				<set field="partyId" from-field="OpeningLeaveBalanceContext.partyId"
					default-value="${OpeningLeaveBalanceContext.partyId}" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
				<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
					<decorator-section name="body">
						<section>
						<condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>
							<widgets>
								<screenlet title="Add Staff Balance">
									<include-form name="EditOpeningLeaveBalanceForm"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Opening Balances">
									<include-form name="OpeningLeaveBalanceListForm"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>




     <screen name="leaveRejectionReason">
        <section>

            <actions>
              <!--   <property-map resource="ExampleUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/> -->
                <set field="titleProperty" value="RejectReason"/>
                <set field="tabButtonItem" value="RejectReason"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <set field="fromDate" from-field="parameters.fromDate"/>
                <set field="leaveTypeId" from-field="parameters.leaveTypeId"/>
                <set field="leaveId" from-field="parameters.leaveId"/>
                <entity-one entity-name="LeaveStatusLog" value-field="reason"/>
            </actions>
            <widgets>
            <screenlet title="Add A reason for Rejecting This Leave Application">
                <include-form name="LeaveRejectionReason" location="component://humanres/widget/forms/EmplLeaveForms.xml"/>
                </screenlet>
            </widgets>
        </section>
    </screen>

     <screen name="leaveSentBackReason">
        <section>

            <actions>
              <!--   <property-map resource="ExampleUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/> -->
                <set field="titleProperty" value="RejectReason"/>
                <set field="tabButtonItem" value="RejectReason"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <set field="fromDate" from-field="parameters.fromDate"/>
                <set field="leaveTypeId" from-field="parameters.leaveTypeId"/>
                <set field="leaveId" from-field="parameters.leaveId"/>
                <entity-one entity-name="LeaveStatusLog" value-field="reason"/>
            </actions>
            <widgets>
            <screenlet title="Add A reason/Comment for Sending Back This Leave Application">
                <include-form name="LeaveSentBackReason" location="component://humanres/widget/forms/EmplLeaveForms.xml"/>
                </screenlet>
            </widgets>
        </section>
    </screen>

     <screen name="StaffLeaveCalender">
		<section>
			<actions>
				<set field="titleProperty" value="leave" />
				<set field="headerItem" value="leaveCalender" />
				<set field="tabButtonItem" value="leaveCalender" />

				<set field="OpeningLeaveBalanceContext" from-field="parameters"/>
						<service service-name="humanResManagerPermission"
					result-map="permResult">
					<field-map field-name="mainAction" value="ADMIN" />
				</service>
				<set field="hasAdminPermission" from-field="permResult.hasPermission" />
				<property-map map-name="uiLabelMap" resource="HumanResUiLabels"
					global="true" />

				<entity-one entity-name="EmplLeaveCalender" value-field="EmplLeaveCalenderContext" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
				<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
					<decorator-section name="body">


					 <section>
							<widgets>
								<screenlet title="Add Leave To Leave Calender">
									<include-form name="EditEmplLeaveCalender"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<section name="search-results">
							<widgets>
								<screenlet title="Preferred Personal Leave Calender">
									<include-form name="EditEmplLeaveCalenderListForm"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
							</widgets>
						</section>
						<screenlet>
						</screenlet>

						 <section>
                           <!-- do check for PARTYMGR, _VIEW permission-->
                            <condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>
							<widgets>
								<screenlet title="Staff Leave Calender">
									<include-form name="EditEmplLeaveCalenderListForHRForm"
										location="component://humanres/widget/forms/EmplLeaveForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>




	<screen name="mailScheduler">
		<section>
			<actions>


			</actions>
			<widgets>

				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<screenlet>

                        <container style="button-bar">
                         <link target="scheduleInterestCalculationsLeave" style="buttontext create" text="Annual Leave Days Calculations"  height="500" width="500">
                        </link>

                            <link target="scheduleDisableLogins" style="buttontext create" text="Enable/Disable User Names For Staff On Leave"  height="500" width="500">
                        </link>
                         <link target="scheduleSendEmailNotification" style="buttontext create" text="Staff Mail Notification"  height="500" width="500">
                        </link>
                        </container>

                                </screenlet>

                                 <screenlet>

                        <container style="button-bar">
                         <link target="SaveEmail_ToBeSendafterwards" style="buttontext create" text="Staff Mail Notification To Staff Handed Over Duties By Staff On Leave"  height="500" width="500">
                        </link>

                        <link target="scheduleSendEmailNotificationNonStaff" style="buttontext create" text="Mail Notification To Non Staff"  height="500" width="500">
                        </link>

                        <link target="sendMailNow" style="buttontext create" text="Send Mail"  height="500" width="500">
                        </link>
                         <link target="sendMailNow_NonStaff" style="buttontext create" text="Send Mail To Non Staff"  height="500" width="500">
                        </link>
                        </container>

                                </screenlet>


					</decorator-section>
					</decorator-screen>
			</widgets>
		</section>
	</screen>

<screen name="leaveRecord">
		<section>
			<actions>
				<set field="titleProperty" value="leave" />
				<set field="headerItem" value="Leave" />
				<set field="tabButtonItem" value="leaveRecord" />
				<set field="previousParams" from-field="sessionAttributes._PREVIOUS_PARAMS_" />
				<entity-one entity-name="EmplLeaveOpeningBalance" value-field="OpeningLeaveBalanceContext" />
				<set field="partyId" from-field="OpeningLeaveBalanceContext.partyId"
					default-value="${OpeningLeaveBalanceContext.partyId}" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
				<decorator-section name="pre-body">
						<include-menu name="EmplLeaveTabBar"
							location="component://humanres/widget/HumanresMenus.xml" />
					</decorator-section>
					<decorator-section name="body">
						<section>
						<condition>
                                <if-has-permission permission="HUMANRES"
									action="_VIEW" />
                            </condition>
							<widgets>


							</widgets>
						</section>
						<section name="search-results">
							<widgets>
							<screenlet title="Search Leave Records">
							<include-form location="component://humanres/widget/forms/EmplLeaveForms.xml" name="findLeaveRecord"/>
							</screenlet>

                              <screenlet title="Leave Records">
                                     <include-form location="component://humanres/widget/forms/EmplLeaveForms.xml" name="ListLeaveRecord"/>                              
                              </screenlet>

							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>




</screens>
