<?xml version="1.0" encoding="UTF-8"?>
<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
	<!-- ========================================================= -->
	<!-- ======================== Defaults ======================= -->
	<!-- ========================================================= -->
	<title>Entity of Registry Component</title>
	<description>None</description>
	<copyright></copyright>
	<version></version>
	<!-- Registry Employer Entity -->
	<!-- entity entity-name="Employer" package-name="org.ofbiz.registry" title="Registry
		Employer Entity"> <field name="employerId" type="id-ne"></field> <field name="employerName"
		type="name"></field> <prim-key field="employerId" /> </entity -->




	<!-- Registry File Type Entity -->
	<entity entity-name="RegistryDocumentType" package-name="org.ofbiz.registry"
		title="File Types">
		<field name="DocumentTypeId" type="id-ne"></field>
		<field name="DocumentType" type="name" not-null="true"></field>
		<field name="retentionPeriod" type="name"></field>
		<prim-key field="DocumentTypeId" />
	</entity>
	
	<entity entity-name="RegistryFileActionTypes" package-name="org.ofbiz.registry"
		title="File Actions">
		<field name="fileActionTypeId" type="id-ne"></field>
		<field name="fileActionType" type="name" not-null="true"></field>
		<field name="status" type="name"></field>
		<prim-key field="fileActionTypeId" />
	</entity>

	<entity entity-name="RegistryFiles" package-name="org.ofbiz.registry"
		title="Member File Book">
		<field name="partyId" type="id"></field>
		<field name="folioNo" type="name"></field>
		<field name="currentPossesser" type="id-ne"></field>
		<field name="status" type="name" ></field>
		<field name="recieptStatus" type="name"></field>
		<field name="creator" type="id-ne"></field>
		<field name="actionBy" type="id-ne"></field>
		<field name="payrollNumber" type="name"></field>
		<field name="memberNumber" type="name"></field>
		<field name="firstName" type="name" ></field>
    	<field name="lastName" type="name"></field>
		<field name="fileLocation" type="name"></field>
		<field name="creationDate" type="date-time"></field>
		<prim-key field="partyId" />
		<relation type="one" fk-name="FILE_MEMBER" rel-entity-name="Member">
			<key-map field-name="partyId" />
		</relation>
		<relation type="one" fk-name="FILE_CREATOR_PERSONS" title="Creator" rel-entity-name="Person">
        	<key-map field-name="creator" rel-field-name="partyId"/>
	     </relation>
	</entity>
	
     <entity entity-name="RegistryRequestedFiles" package-name="org.ofbiz.registry"
		title="Member File Book">
		<field name="partyId" type="id"></field>
		<field name="folioNo" type="name"></field>
		<field name="Reason" type="name"></field>
		<field name="actionBy" type="id-ne"></field>
		<field name="creationDate" type="date-time"></field>
		<prim-key field="partyId" />
		<relation type="one" fk-name="FILE_REQ" rel-entity-name="RegistryFiles">
			<key-map field-name="partyId" />
		</relation>
	</entity>
	
	<entity entity-name="RegistryFilesInCirculation" package-name="org.ofbiz.registry"
		title="Member File Book">
		<field name="partyId" type="id"></field>
		<field name="currentPossesser" type="id-ne"></field>
		<field name="folioNo" type="name"></field>
		<field name="Reason" type="name"></field>
		<field name="recieptStatus" type="name"></field>
		<field name="creationDate" type="date-time"></field>
		<prim-key field="partyId" />
		<relation type="one" fk-name="FILE_CIRC" rel-entity-name="RegistryFiles">
			<key-map field-name="partyId" />
		</relation>
	</entity>
	
	<entity entity-name="RegistryFileLogs" package-name="org.ofbiz.registry"
		title="Member File actions">
		<field name="logId" type="id-ne"></field>
		<field name="fileActionTypeId" type="name"></field>
		<field name="currentPossesser" type="id-ne"></field>
		<field name="carriedBy" type="name"></field>
		<field name="actionBy" type="id-ne"></field>
		<field name="receiptStatus" type="name"></field>
		<field name="partyId" type="id"></field>
		<field name="folioNo" type="name"></field>
		<field name="actionDate" type="date-time"></field>
		<prim-key field="logId" />
		<relation type="one" fk-name="FILEACTION_MEMBERFILE" rel-entity-name="RegistryFiles">
			<key-map field-name="partyId" />
		</relation>
	</entity>
	
	<entity entity-name="RegistryFileActions" package-name="org.ofbiz.registry"
		title="Member File actions">
		<field name="actionId" type="id-ne"></field>
		<field name="fileActionTypeId" type="id-ne"></field>
		<field name="partyId" type="id"></field>
		<field name="actionBy" type="id-ne"></field>
		<field name="actionDate" type="date-time"></field>
		<prim-key field="actionId" />
		<relation type="one" fk-name="FILEACTION_MEMBERFILE" rel-entity-name="RegistryFiles">
			<key-map field-name="partyId" />
		</relation>
	</entity>

	<entity entity-name="RegistryDocuments" package-name="org.ofbiz.registry"
		title="Member Documents">
		<field name="documentId" type="id-ne"></field>
		<field name="DocumentTypeId" type="id-ne"></field>
		<field name="partyId" type="id-ne" ></field>
		<field name="referenceNo" type="name" ></field>
		<field name="documentValue" type="currency-amount" ></field>
		<field name="receiptDate" type="date-time"></field>
		<prim-key field="documentId" />
		<relation type="one" fk-name="DOCUMENT_FILE" rel-entity-name="RegistryFiles">
			<key-map field-name="partyId" />
		</relation>
	</entity>

	<entity entity-name="RegistryFileLocations" package-name="org.ofbiz.registry"
		title="Member Files">
		<field name="locationId" type="id-ne"></field>
		<field name="fileLocation" type="name" not-null="true"></field>
		<field name="description" type="description" not-null="true"></field>
		<prim-key field="locationId" />
	</entity>
	
	
	  <view-entity entity-name="fileMovementView" package-name="org.ofbiz.humanres">
	    <member-entity entity-alias="log" entity-name="RegistryFileLogs"></member-entity>
	    <member-entity entity-alias="action" entity-name="RegistryFileActions"></member-entity>
	    
	    <alias-all entity-alias="log"></alias-all>

			<alias entity-alias="action" name="actionId" field="actionId"/>

	    <view-link  entity-alias="log" rel-entity-alias="action">
	    	<key-map field-name="partyId" rel-field-name="partyId"/>
	    </view-link>
    </view-entity>

	
	
</entitymodel>



